<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas 状态存储与恢复</title>
	<script>
		window.addEventListener('load', eventWindowLoaded, false);

		function eventWindowLoaded() {
			canvasApp();
		}

		function canvasApp() {
			var theCanvas = document.getElementById('canvas');
			var context = theCanvas.getContext('2d');

			// 在 Canvas 环境中绘图时，可利用绘图堆栈状态
			// 保留内容包括（画布当前属性、变换矩阵信息）
			// 状态的存储与恢复对于坐标变换尤其重要
			context.fillStyle = 'red';
			context.save();
			context.fillStyle = 'blue';
			context.fillRect(0, 0, 100, 100);
			context.save();
			context.fillStyle = 'green';
			context.fillRect(100, 100, 100, 100);
			context.restore();
			context.fillRect(200, 200, 100, 100);
			context.restore();
			context.fillRect(300, 300, 100, 100);

			// save() 和 restore() 更多参考https://www.w3cplus.com/canvas/canvas-states.html
		}
	</script>
</head>
<body>
	<div>
		<canvas id="canvas" width="500" height="500" style="border: 2px solid #ccc;">
			Your browser does not support the HTML 5 Canvas.
		</canvas>
	</div>
</body>
</html>