{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension/assets/frameworks/cocos2d-html5/extensions/gui/control-extension/CCControlSlider.js"],"names":["cc","SLIDER_MARGIN_H","SLIDER_MARGIN_V","ControlSlider","Control","extend","_value","_minimumValue","_maximumValue","_minimumAllowedValue","_maximumAllowedValue","_thumbSprite","_progressSprite","_backgroundSprite","_className","ctor","bgFile","progressFile","thumbFile","prototype","call","undefined","bgSprite","Sprite","progressSprite","thumbSprite","initWithSprites","getValue","setValue","value","Math","max","min","needsLayout","sendActionsForControlEvents","CONTROL_EVENT_VALUECHANGED","getMinimumValue","setMinimumValue","minimumValue","getMaximumValue","setMaximumValue","maximumValue","isTouchInside","touch","touchLocation","getLocation","getParent","convertToNodeSpace","rect","getBoundingBox","width","getContentSize","x","rectContainsPoint","locationFromTouch","getMinimumAllowedValue","setMinimumAllowedValue","val","getMaximumAllowedValue","setMaximumAllowedValue","getThumbSprite","getProgressSprite","getBackgroundSprite","backgroundSprite","init","ignoreAnchorPointForPosition","maxRect","ControlUtils","CCRectUnion","setContentSize","height","setAnchorPoint","setPosition","addChild","setEnabled","enabled","setOpacity","sliderBegan","location","setSelected","setColor","color","GRAY","valueForLocation","sliderMoved","sliderEnded","isSelected","getPosition","WHITE","getTouchLocationInControl","onTouchBegan","event","isEnabled","isVisible","onTouchMoved","onTouchEnded","p","percent","setPositionX","textureRect","getTextureRect","y","getPositionX","setTextureRect","isTextureRectRotated","_renderCmd","transform","_p","defineGetterSetter","minValue","maxValue","minAllowedValue","maxAllowedValue","create"],"mappings":"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","file":"CCControlSlider.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension","sourcesContent":["/**\n *\n * Copyright (c) 2008-2010 Ricardo Quesada\n * Copyright (c) 2011-2012 cocos2d-x.org\n * Copyright (c) 2013-2014 Chukong Technologies Inc.\n *\n * Copyright 2011 Yannick Loriot. All rights reserved.\n * http://yannickloriot.com\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n *\n * converted to Javascript / cocos2d-x by Angus C\n */\n\n/**\n * @ignore\n */\ncc.SLIDER_MARGIN_H = 24;\ncc.SLIDER_MARGIN_V = 8;\n\n/**\n * ControlSlider: Slider ui component.\n * @class\n * @extends cc.Control\n *\n * @property {Number}       value               - The value of the slider\n * @property {Number}       minValue            - The minimum value of the slider\n * @property {Number}       maxValue            - The maximum value of the slider\n * @property {Number}       minAllowedValue     - The minimum allowed value of the slider\n * @property {Number}       maxAllowedValue     - The maximum allowed value of the slider\n * @property {Number}       thumbSprite         - <@readonly> Brightness value of the picker\n * @property {cc.Sprite}    progressSprite      - <@readonly> The background sprite\n * @property {cc.Sprite}    backgroundSprite    - <@readonly> The overlay sprite\n */\ncc.ControlSlider = cc.Control.extend(/** @lends cc.ControlSlider# */{\n    _value:0,\n    _minimumValue:0,\n    _maximumValue:0,\n    _minimumAllowedValue:0,\n    _maximumAllowedValue:0,\n\n    _thumbSprite:null,\n    _progressSprite:null,\n    _backgroundSprite:null,\n    _className:\"ControlSlider\",\n\n    ctor:function (bgFile, progressFile, thumbFile) {\n        cc.Control.prototype.ctor.call(this);\n        if (thumbFile != undefined) {\n            // Prepare background for slider\n            var bgSprite = new cc.Sprite(bgFile);\n\n            // Prepare progress for slider\n            var progressSprite = new cc.Sprite(progressFile);\n\n            // Prepare thumb (menuItem) for slider\n            var thumbSprite = new cc.Sprite(thumbFile);\n\n            this.initWithSprites(bgSprite, progressSprite, thumbSprite);\n        }\n    },\n\n    getValue:function () {\n        return this._value;\n    },\n    setValue:function (value) {\n        //clamp between the two bounds\n        value = Math.max(value, this._minimumValue);\n        value = Math.min(value, this._maximumValue);\n        this._value = value;\n        this.needsLayout();\n        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);\n    },\n\n    getMinimumValue:function () {\n        return this._minimumValue;\n    },\n    setMinimumValue:function (minimumValue) {\n        this._minimumValue = minimumValue;\n        this._minimumAllowedValue = minimumValue;\n        if (this._minimumValue >= this._maximumValue)\n            this._maximumValue = this._minimumValue + 1.0;\n        this.setValue(this._value);\n    },\n\n    getMaximumValue:function () {\n        return this._maximumValue;\n    },\n    setMaximumValue:function (maximumValue) {\n        this._maximumValue = maximumValue;\n        this._maximumAllowedValue = maximumValue;\n        if (this._maximumValue <= this._minimumValue)\n            this._minimumValue = this._maximumValue - 1.0;\n        this.setValue(this._value);\n    },\n    isTouchInside:function (touch) {\n        var touchLocation = touch.getLocation();\n        touchLocation = this.getParent().convertToNodeSpace(touchLocation);\n\n        var rect = this.getBoundingBox();\n        rect.width += this._thumbSprite.getContentSize().width;\n        rect.x -= this._thumbSprite.getContentSize().width / 2;\n\n        return cc.rectContainsPoint(rect, touchLocation);\n    },\n    locationFromTouch:function (touch) {\n        var touchLocation = touch.getLocation();                      // Get the touch position\n        touchLocation = this.convertToNodeSpace(touchLocation);                  // Convert to the node space of this class\n\n        if (touchLocation.x < 0) {\n            touchLocation.x = 0;\n        } else if (touchLocation.x > this._backgroundSprite.getContentSize().width) {\n            touchLocation.x = this._backgroundSprite.getContentSize().width;\n        }\n\n        return touchLocation;\n    },\n    getMinimumAllowedValue:function () {\n        return this._minimumAllowedValue;\n    },\n    setMinimumAllowedValue:function (val) {\n        this._minimumAllowedValue = val;\n    },\n\n    getMaximumAllowedValue:function () {\n        return this._maximumAllowedValue;\n    },\n\n    setMaximumAllowedValue:function (val) {\n        this._maximumAllowedValue = val;\n    },\n\n    getThumbSprite:function () {\n        return this._thumbSprite;\n    },\n    getProgressSprite:function () {\n        return this._progressSprite;\n    },\n    getBackgroundSprite:function () {\n        return this._backgroundSprite;\n    },\n\n    /**\n     * Initializes a slider with a background sprite, a progress bar and a thumb\n     * item.\n     *\n     * @param {cc.Sprite} backgroundSprite  CCSprite, that is used as a background.\n     * @param {cc.Sprite} progressSprite    CCSprite, that is used as a progress bar.\n     * @param {cc.Sprite} thumbSprite         CCMenuItem, that is used as a thumb.\n     */\n    initWithSprites:function (backgroundSprite, progressSprite, thumbSprite) {\n        if (cc.Control.prototype.init.call(this)) {\n            this.ignoreAnchorPointForPosition(false);\n\n            this._backgroundSprite = backgroundSprite;\n            this._progressSprite = progressSprite;\n            this._thumbSprite = thumbSprite;\n\n            // Defines the content size\n            var maxRect = cc.ControlUtils.CCRectUnion(backgroundSprite.getBoundingBox(), thumbSprite.getBoundingBox());\n            this.setContentSize(maxRect.width, maxRect.height);\n\n            // Add the slider background\n            this._backgroundSprite.setAnchorPoint(0.5, 0.5);\n            this._backgroundSprite.setPosition(maxRect.width / 2, maxRect.height / 2);\n            this.addChild(this._backgroundSprite);\n\n            // Add the progress bar\n            this._progressSprite.setAnchorPoint(0.0, 0.5);\n            this._progressSprite.setPosition(0, maxRect.height / 2);\n            this.addChild(this._progressSprite);\n\n            // Add the slider thumb\n            this._thumbSprite.setPosition(0, maxRect.height / 2);\n            this.addChild(this._thumbSprite);\n\n            // Init default values\n            this._minimumValue = 0.0;\n            this._maximumValue = 1.0;\n            this.setValue(this._minimumValue);\n            return true;\n        } else\n            return false;\n    },\n\n    setEnabled:function (enabled) {\n        cc.Control.prototype.setEnabled.call(this, enabled);\n        if (this._thumbSprite) {\n            this._thumbSprite.setOpacity(enabled ? 255 : 128);\n        }\n    },\n\n    sliderBegan:function (location) {\n        this.setSelected(true);\n        this._thumbSprite.setColor(cc.color.GRAY);\n        this.setValue(this.valueForLocation(location));\n    },\n    sliderMoved:function (location) {\n        this.setValue(this.valueForLocation(location));\n    },\n    sliderEnded:function (location) {\n        if (this.isSelected()) {\n            this.setValue(this.valueForLocation(this._thumbSprite.getPosition()));\n        }\n        this._thumbSprite.setColor(cc.color.WHITE);\n        this.setSelected(false);\n    },\n\n    getTouchLocationInControl:function (touch) {\n        var touchLocation = touch.getLocation();                      // Get the touch position\n        touchLocation = this.convertToNodeSpace(touchLocation);         // Convert to the node space of this class\n\n        if (touchLocation.x < 0) {\n            touchLocation.x = 0;\n        } else if (touchLocation.x > this._backgroundSprite.getContentSize().width + cc.SLIDER_MARGIN_H) {\n            touchLocation.x = this._backgroundSprite.getContentSize().width + cc.SLIDER_MARGIN_H;\n        }\n        return touchLocation;\n    },\n\n    onTouchBegan:function (touch, event) {\n        if (!this.isTouchInside(touch)|| !this.isEnabled() || !this.isVisible())\n            return false;\n\n        var location = this.locationFromTouch(touch);\n        this.sliderBegan(location);\n        return true;\n    },\n    onTouchMoved:function (touch, event) {\n        var location = this.locationFromTouch(touch);\n        this.sliderMoved(location);\n    },\n    onTouchEnded:function (touch, event) {\n        this.sliderEnded(cc.p(0,0));\n    },\n    needsLayout:function(){\n        var percent = (this._value - this._minimumValue) / (this._maximumValue - this._minimumValue);\n        this._thumbSprite.setPositionX(percent * this._backgroundSprite.getContentSize().width);\n\n        // Stretches content proportional to newLevel\n        var textureRect = this._progressSprite.getTextureRect();\n        textureRect = cc.rect(textureRect.x, textureRect.y, this._thumbSprite.getPositionX(), textureRect.height);\n        this._progressSprite.setTextureRect(textureRect, this._progressSprite.isTextureRectRotated());\n        this._thumbSprite._renderCmd.transform(this._renderCmd);\n    },\n    /** Returns the value for the given location. */\n    valueForLocation:function (location) {\n        var percent = location.x / this._backgroundSprite.getContentSize().width;\n        return Math.max(Math.min(this._minimumValue + percent * (this._maximumValue - this._minimumValue), this._maximumAllowedValue), this._minimumAllowedValue);\n    }\n});\n\nvar _p = cc.ControlSlider.prototype;\n\n// Extended properties\n/** @expose */\n_p.value;\ncc.defineGetterSetter(_p, \"value\", _p.getValue, _p.setValue);\n/** @expose */\n_p.minValue;\ncc.defineGetterSetter(_p, \"minValue\", _p.getMinimumValue, _p.setMinimumValue);\n/** @expose */\n_p.maxValue;\ncc.defineGetterSetter(_p, \"maxValue\", _p.getMaximumValue, _p.setMaximumValue);\n/** @expose */\n_p.minAllowedValue;\ncc.defineGetterSetter(_p, \"minAllowedValue\", _p.getMinimumAllowedValue, _p.setMinimumAllowedValue);\n/** @expose */\n_p.maxAllowedValue;\ncc.defineGetterSetter(_p, \"maxAllowedValue\", _p.getMaximumAllowedValue, _p.setMaximumAllowedValue);\n/** @expose */\n_p.thumbSprite;\ncc.defineGetterSetter(_p, \"thumbSprite\", _p.getThumbSprite);\n/** @expose */\n_p.progressSprite;\ncc.defineGetterSetter(_p, \"progressSprite\", _p.getProgressSprite);\n/** @expose */\n_p.backgroundSprite;\ncc.defineGetterSetter(_p, \"backgroundSprite\", _p.getBackgroundSprite);\n\n_p = null;\n\n/**\n * Creates a slider with a given background sprite and a progress bar and a\n * thumb item.\n * @deprecated\n * @see cc.ControlSlider\n */\ncc.ControlSlider.create = function (bgFile, progressFile, thumbFile) {\n    return new cc.ControlSlider(bgFile, progressFile, thumbFile);\n};"]}