{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/external/gaf/Library/assets/frameworks/cocos2d-html5/external/gaf/Library/GAFAssetPreload.js"],"names":["gaf","CGAffineTransformCocosFormatFromFlashFormat","transform","t","a","b","c","d","tx","ty","_AssetPreload","End","Atlases","AnimationMasks","AnimationObjects","AnimationFrames","NamedParts","Sequences","TextFields","Stage","TimeLine","prototype","asset","content","timeLine","getFps","getSceneFps","Tag","tag","tagId","call","Tags","tags","self","forEach","AtlasCreateFrames","elements","spriteFrames","item","texture","_atlases","atlasId","rect","cc","origin","x","y","size","frame","SpriteFrame","_gafAnchor","pivot","elementAtlasId","_atlasScales","scale","csf","Director","_getInstance","getContentScaleFactor","atlases","id","finalizeLoading","atlasPath","sources","atlasSource","source","assert","_textureLoadDelegate","loaded","paths","_getSearchPaths","i","len","length","path","atlas","textureCache","getTextureForKey","isLoaded","handleLoadedTexture","success","_onAtlasLoaded","fail","log","getGAFFileName","_atlasesToLoad","hasOwnProperty","_AtlasLoader","loadArray","_onLoadTasks","push","type","undefined","TYPE_TEXTURE","_objects","objectId","convertTint","mat","alpha","mult","r","redMultiplier","g","greenMultiplier","blueMultiplier","offset","redOffset","greenOffset","blueOffset","alphaOffset","convertState","state","hasColorTransform","hasMask","hasEffect","objectIdRef","depth","matrix","colorTransform","effect","maskObjectIdRef","statesForId","frames","lastFrame","stateArray","obj","states","actions","getFrames","parts","name","getNamedParts","sequences","start","end","getSequences","_sceneFps","fps","_sceneColor","color","_sceneWidth","width","_sceneHeight","height","_masks","result","_TimeLineProto","animationFrameCount","boundingBox","pivotPoint","linkageName","_pushTimeLine"],"mappings":"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","file":"GAFAssetPreload.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/external/gaf/Library","sourcesContent":["\ngaf.CGAffineTransformCocosFormatFromFlashFormat = function(transform)\n{\n    var t = {};\n    t.a = transform.a;\n    t.b = -transform.b;\n    t.c = -transform.c;\n    t.d = transform.d;\n    t.tx = transform.tx;\n    t.ty = -transform.ty;\n    return t;\n};\n\ngaf._AssetPreload = function()\n{\n    this[\"0\"] = this.End;\n    this[\"1\"] = this.Atlases;\n    this[\"2\"] = this.AnimationMasks;\n    this[\"3\"] = this.AnimationObjects;\n    this[\"4\"] = this.AnimationFrames;\n    this[\"5\"] = this.NamedParts;\n    this[\"6\"] = this.Sequences;\n    this[\"7\"] = this.TextFields;\n    this[\"8\"] = this.Atlases; // 2\n    this[\"9\"] = this.Stage;\n    this[\"10\"] = this.AnimationObjects; //2\n    this[\"11\"] = this.AnimationMasks; // 2\n    this[\"12\"] = this.AnimationFrames; // 2\n    this[\"13\"] = this.TimeLine;\n};\n\ngaf._AssetPreload.prototype.End = function(asset, content, timeLine){\n    if(timeLine)\n    {\n        timeLine.getFps = function()\n        {\n            return asset.getSceneFps();\n        };\n    }\n};\n\ngaf._AssetPreload.prototype.Tag = function(asset, tag, timeLine)\n{\n    (this[tag.tagId]).call(this, asset, tag.content, timeLine);\n};\n\ngaf._AssetPreload.prototype.Tags = function(asset, tags, timeLine)\n{\n    var self = this;\n    tags.forEach(function(tag)\n    {\n        self.Tag(asset, tag, timeLine);\n    });\n};\n\ngaf._AssetPreload.prototype.AtlasCreateFrames = function(elements, asset, spriteFrames)\n{\n    elements.forEach(function (item) {\n        var texture = asset._atlases[item.atlasId];\n        var rect = cc.rect(item.origin.x, item.origin.y, item.size.x, item.size.y);\n        var frame = new cc.SpriteFrame(texture, rect);\n        frame._gafAnchor =\n        {\n            x: (0 - (0 - (item.pivot.x / item.size.x))),\n            y: (0 + (1 - (item.pivot.y / item.size.y)))\n        };\n        spriteFrames[item.elementAtlasId] = frame;\n        // 9 grid\n    });\n};\n\n\n\ngaf._AssetPreload.prototype.Atlases = function(asset, content, timeLine)\n{\n    var spriteFrames = asset._atlasScales[content.scale] = asset._atlasScales[content.scale] || [];\n    var csf = cc.Director._getInstance().getContentScaleFactor();\n\n    content.atlases.forEach(function(item)\n    {\n        var atlasId = item.id;\n        var finalizeLoading = function()\n        {\n            gaf._AssetPreload.AtlasCreateFrames(content.elements, asset, spriteFrames);\n        };\n\n        var atlasPath = \"\";\n        item.sources.forEach(function(atlasSource)\n        {\n            if(atlasSource.csf === csf)\n            {\n                atlasPath = atlasSource.source;\n            }\n        });\n        cc.assert(atlasPath, \"GAF Error. Texture for current CSF not found. Reconvert animation with correct parameters.\");\n\n        if(asset._textureLoadDelegate)\n        {\n            atlasPath = asset._textureLoadDelegate(atlasPath);\n        }\n\n        var loaded = false;\n        var paths = asset._getSearchPaths(atlasPath);\n        for(var i = 0, len = paths.length; i < len; ++i){\n            var path = paths[i];\n            var atlas = cc.textureCache.getTextureForKey(path);\n            if(atlas && atlas.isLoaded())\n            {\n                atlas.handleLoadedTexture(true);\n                loaded = true;\n                asset._atlases[atlasId] = atlas;\n                finalizeLoading();\n                break;\n            }\n        }\n        // Need to load atlases async\n        if(!loaded)\n        {\n            var success = function (atlas) {\n                atlas.handleLoadedTexture(true);\n                asset._onAtlasLoaded(atlasId, atlas);\n            };\n\n            var fail = function () {\n                cc.log(\"GAF Error. Couldn't find `\" + atlasPath + \"` required by `\" + asset.getGAFFileName() + \"`\");\n            };\n\n            if(!asset._atlasesToLoad.hasOwnProperty(atlasId))\n            {\n                gaf._AtlasLoader.loadArray(paths, success, fail);\n                asset._atlasesToLoad[atlasId] = {};\n            }\n            asset._onLoadTasks.push(finalizeLoading);\n        }\n    });\n};\n\ngaf._AssetPreload.prototype.AnimationObjects = function(asset, content, timeLine)\n{\n    content.forEach(function(item)\n    {\n        item.type = (item.type === undefined) ? gaf.TYPE_TEXTURE : item.type;\n        timeLine._objects.push(item.objectId);\n        asset._objects[item.objectId] = item;\n    });\n};\n\ngaf._AssetPreload.prototype.convertTint = function(mat, alpha)\n{\n    if(!mat)\n        return null;\n    return {\n        mult:\n        {\n            r: mat.redMultiplier * 255,\n            g: mat.greenMultiplier * 255,\n            b: mat.blueMultiplier * 255,\n            a: alpha * 255\n        },\n        offset:\n        {\n            r: mat.redOffset * 255,\n            g: mat.greenOffset * 255,\n            b: mat.blueOffset * 255,\n            a: mat.alphaOffset * 255\n        }\n    };\n};\n\ngaf._AssetPreload.prototype.convertState = function(state)\n{\n    return {\n        hasColorTransform: state.hasColorTransform,\n        hasMask: state.hasMask,\n        hasEffect: state.hasEffect,\n        objectIdRef: state.objectIdRef,\n        depth: state.depth,\n        alpha: state.alpha * 255,\n        matrix: gaf.CGAffineTransformCocosFormatFromFlashFormat(state.matrix),\n        colorTransform: this.convertTint(state.colorTransform, state.alpha),\n        effect: state.effect,\n        maskObjectIdRef: state.maskObjectIdRef\n    };\n};\n\ngaf._AssetPreload.prototype.AnimationFrames = function(asset, content, timeLine)\n{\n    var self = this;\n    cc.assert(timeLine, \"Error. Time Line should not be null.\");\n    var statesForId = {};\n    var frames = [];\n    var lastFrame = {};\n    for(var i = 0, len = content.length; i < len; ++i)\n    {\n        var frame = content[i];\n        if(frame.state)\n        {\n            frame.state.forEach(function (state)\n            {\n                if (state.alpha !== 0)\n                {\n                    statesForId[state.objectIdRef] = self.convertState(state);\n                }\n                else\n                {\n                    statesForId[state.objectIdRef] = null;\n                }\n            });\n        }\n        var stateArray = [];\n        for(var obj in statesForId){ if(statesForId.hasOwnProperty(obj) && statesForId[obj])\n        {\n            stateArray.push(statesForId[obj]);\n        }}\n        lastFrame = frame;\n        frames[frame.frame - 1] = {states: stateArray, actions: frame.actions || null};\n    }\n    timeLine.getFrames = function(){return frames};\n};\n\ngaf._AssetPreload.prototype.NamedParts = function(asset, content, timeLine)\n{\n    var parts = {};\n    content.forEach(function(item)\n    {\n        parts[item.name] = item.objectId;\n    });\n    timeLine.getNamedParts = function(){return parts};\n};\n\ngaf._AssetPreload.prototype.Sequences = function(asset, content, timeLine)\n{\n    var sequences = {};\n    content.forEach(function(item){\n        sequences[item.id] = {start: item.start - 1, end: item.end};\n    });\n    timeLine.getSequences = function(){return sequences};\n};\n\ngaf._AssetPreload.prototype.TextFields = function(asset, content, timeLine)\n{\n    debugger;\n};\n\ngaf._AssetPreload.prototype.Stage = function(asset, content, timeLine)\n{\n    asset._sceneFps = content.fps;\n    asset._sceneColor = content.color;\n    asset._sceneWidth = content.width;\n    asset._sceneHeight = content.height;\n};\n\ngaf._AssetPreload.prototype.AnimationMasks = function(asset, content, timeLine)\n{\n    content.forEach(function(item)\n    {\n        item.type = (item.type === undefined) ? gaf.TYPE_TEXTURE : item.type;\n        timeLine._objects.push(item.objectId);\n        asset._masks[item.objectId] = item;\n    });\n};\n\ngaf._AssetPreload.prototype.TimeLine = function(asset, content, timeLine)\n{\n    var result = new gaf._TimeLineProto(asset, content.animationFrameCount, content.boundingBox, content.pivotPoint, content.id, content.linkageName);\n    asset._pushTimeLine(result);\n    this.Tags(asset, content.tags, result);\n};\n\ngaf._AssetPreload = new gaf._AssetPreload();\n"]}