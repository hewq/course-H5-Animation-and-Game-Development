{"version":3,"sources":["../../../../../../assets/frameworks/cocos2d-html5/tools/assets/frameworks/cocos2d-html5/tools/core4cc.js"],"names":["fs","require","path","exec","spawn","url","core4cc","module","exports","trans2Module","src","targetDir","requireArr","name","existsSync","mkdirSync","srcBaseName","basename","content","readFileSync","toString","requireStr","i","li","length","strs","split","writeFileSync","merge2Module","srcs","target","dirname","getKeyName","key","replace","r","match","getDependencies","temp","dependencies","push","unzip","srcZip","cb","execCode","err","data","info","download","downLoadDir","fileUrl","fileName","parse","pathname","pop","file","createWriteStream","join","curl","stdout","on","write","end","console","log","code","error","rmdirSyncRecursive","filePath","ignores","files","indexOf","statSync","isDirectory","unlinkSync","readdirSync","curPath","rmdirSync","mkdirRecursive","arr","index","dir","process","cwd","slice","sep","mkdir","mkdirSyncRecursive","targetPath","isAbsolute","normalize","tempStr","newPath","substring","search","copyFiles","srcPath","handler","fmt","getStr4Cmd","str","mergeData","defData"],"mappings":"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","file":"core4cc.js","sourceRoot":"../../../../../../assets/frameworks/cocos2d-html5/tools","sourcesContent":["var fs = require(\"fs\");\nvar path = require(\"path\");\nvar exec = require('child_process').exec;\nvar spawn = require('child_process').spawn;\nvar url = require('url');\n\nvar core4cc = {};\nmodule.exports = core4cc;\n\n/**\n * Desc:merge js code from client to server.\n * @param src               src path\n * @param targetDir         target path\n * @param requireArr        dependencies\n * @param name\n */\ncore4cc.trans2Module = function(src, targetDir, requireArr, name){\n    if(!fs.existsSync(targetDir)) fs.mkdirSync(targetDir);\n    var srcBaseName = path.basename(src);\n    name = name || path.basename(src, \".js\");\n    var content = fs.readFileSync(src).toString();\n    var requireStr = \"\";\n    for(var i = 0, li = requireArr.length; i < li; ++i){\n        var strs = requireArr[i].split(\"->\");\n        requireStr = requireStr + \"var \" + strs[0] + \" = require('\" + strs[1] + \"');\\r\\n\";\n    }\n    fs.writeFileSync(targetDir + srcBaseName, requireStr + content + \"\\r\\nmodule.exports = \" + name + \";\");\n};\n\n/**\n * Desc:merge js arr to one\n * @param srcs\n * @param target\n * @param requireArr\n * @param name\n */\ncore4cc.merge2Module = function(srcs, target, requireArr, name){\n    var targetDir = path.dirname(target);\n    if(!fs.existsSync(targetDir)) fs.mkdirSync(targetDir);\n    var content = \"\";\n    for(var i = 0, li = srcs.length; i < li; ++i){\n        content += fs.readFileSync(srcs[i]).toString() + \"\\r\\n\";\n    }\n    var requireStr = \"\";\n    for(var i = 0, li = requireArr.length; i < li; ++i){\n        var strs = requireArr[i].split(\"->\");\n        requireStr = requireStr + \"var \" + strs[0] + \" = require('\" + strs[1] + \"');\\r\\n\";\n    }\n    fs.writeFileSync(target, requireStr + content + \"\\r\\nmodule.exports = \" + name + \";\");\n};\n\n/**\n * dESC: Get key name by the file name.\n * @param name\n * @returns {String}\n */\ncore4cc.getKeyName = function(name){\n    var key = name.replace(/[.]/g, \"_\");\n    key = key.replace(/[\\-\\(\\)]/g, \"_\");\n    var r = key.match(/^[0-9]/);\n    if(r != null) key = \"_\" + key;\n    return key.replace(/\\s/g, \"\");\n};\n/**\n * Desc: Returns array for dependencies.\n * @param temp\n * @returns {Array}\n * @private\n */\ncore4cc.getDependencies = function(temp){\n    var dependencies = [];\n    for(var key in temp){\n        dependencies.push(key);\n    };\n    return dependencies;\n};\n\n/**\n * Desc: unzip\n * @param srcZip\n * @param targetDir\n * @param cb\n */\ncore4cc.unzip = function(srcZip, targetDir, cb){\n    var execCode = \"unzip \" + srcZip + \" -d \" + targetDir;\n    exec(execCode, function(err, data, info){\n        if(err) return cb(err);\n        else cb(null);\n    });\n};\n\n\n\n/**\n * Desc: Download resources.\n * @param downLoadDir\n * @param fileUrl\n * @param cb\n */\ncore4cc.download = function(downLoadDir, fileUrl, cb) {\n    // extract the file name\n    var fileName = url.parse(fileUrl).pathname.split('/').pop();\n    // create an instance of writable stream\n    var file = fs.createWriteStream(path.join(downLoadDir, fileName));\n    // execute curl using child_process' spawn function\n    var curl = spawn('curl', [fileUrl]);\n    // add a 'data' event listener for the spawn instance\n    curl.stdout.on('data', function(data) { file.write(data); });\n    // add an 'end' event listener to close the writeable stream\n    curl.stdout.on('end', function(data) {\n        file.end();\n        console.log(fileName + ' downloaded to ' + downLoadDir);\n        cb(null);\n    });\n    // when the spawn child process exits, check if there were any errors and close the writeable stream\n    curl.on('exit', function(code) {\n        if (code != 0) {\n            console.error('Failed: ' + code);\n            cb(\"error\")\n        }\n    });\n};\n\n/**\n * Desc: Remove dir recursively.\n * @param filePath\n * @param ignores\n */\ncore4cc.rmdirSyncRecursive = function(filePath, ignores) {\n    var files = [];\n    if( fs.existsSync(filePath) ) {\n        if(ignores && ignores.length > 0 && ignores.indexOf(filePath) >= 0) return;\n        if(!fs.statSync(filePath).isDirectory()) return fs.unlinkSync(filePath);\n        files = fs.readdirSync(filePath);\n        for(var i = 0, li = files.length; i < li; i++){\n            var curPath = path.join(filePath, files[i]);\n            core4cc.rmdirSyncRecursive(curPath, ignores); // recurse\n        }\n        files = fs.readdirSync(filePath);//read again\n        if(files.length == 0) fs.rmdirSync(filePath);\n    }\n};\n\n/**\n * Desc: Create dir recursively.\n * @param arr\n * @param index\n * @param cb\n * @returns {*}\n */\ncore4cc.mkdirRecursive = function(arr, index, cb){\n    if(index >= arr.length) cb();\n    var dir = path.join(process.cwd(), arr.slice(0, index +1).join(path.sep));\n    if(fs.existsSync(dir)) return core4cc.mkdirRecursive(arr, index+1, cb);\n    fs.mkdir(dir, function(){\n        core4cc.mkdirRecursive(arr, index+1, cb);\n    });\n}\n/**\n * Desc: create dir sync recursively.\n * @param targetPath\n */\ncore4cc.mkdirSyncRecursive = function(targetPath){\n    if(targetPath == null || targetPath == \"\") return;\n    targetPath = core4cc.isAbsolute(targetPath) ? path.normalize(targetPath) : path.join(process.cwd(), targetPath);\n    if(fs.existsSync(targetPath)) return;\n\n    var arr = targetPath.split(path.sep);\n    var index = arr.length - 1;\n    var tempStr = arr[index];\n    while(tempStr == \"\" && arr.length > 0){\n        index--;\n        tempStr = arr[index];\n    }\n    if(tempStr == \"\") return;\n    var newPath = targetPath.substring(0, targetPath.length - tempStr.length - 1);\n    if(!fs.existsSync(newPath)) core4cc.mkdirSyncRecursive(newPath);\n    fs.mkdirSync(targetPath);\n}\n/**\n * Desc: Returns true if the filePath is absolute.\n * @param filePath\n * @returns {boolean}\n */\ncore4cc.isAbsolute = function(filePath){\n    filePath = path.normalize(filePath);\n    if(filePath.substring(0, 1) == \"/\") return true;\n    if(filePath.search(/[\\w]+:/) == 0) return true;\n    return false;\n};\n\n/**\n * Desc: Copy files in srcPath to targetPath, then replace info by config.\n * @param srcPath\n * @param targetPath\n * @param handler\n * @private\n */\ncore4cc.copyFiles = function(srcPath, targetPath, handler){\n    if(!fs.statSync(srcPath).isDirectory()) return fs.writeFileSync(targetPath, fs.readFileSync(srcPath));//copy if it`s a file\n\n    if(!fs.existsSync(targetPath)) fs.mkdirSync(targetPath);\n    var files = fs.readdirSync(srcPath);\n    for(var i = 0, li = files.length; i < li; i++){\n        var file = files[i];\n        if(fs.statSync(path.join(srcPath, file)).isDirectory()){//make dir if it`s a dir\n            var dir = path.join(targetPath, file, \"./\");\n            if(!fs.existsSync(dir)) fs.mkdirSync(dir);\n            core4cc.copyFiles(path.join(srcPath, file + \"/\"), dir, handler);//goes on\n        }else{\n            var filePath = path.join(targetPath, file);\n            fs.writeFileSync(filePath, fs.readFileSync(path.join(srcPath, file)));//copy if it`s a file\n            if(handler) {\n                handler.fmt(filePath);\n            }\n        }\n    }\n}\n\n/**\n * Desc: Get string for command.\n * e.g. aaaa ---> aaaa\n *      \"a a\" ---> a a\n * @param str\n * @returns {*}\n */\ncore4cc.getStr4Cmd = function(str){\n    if(!str) return null;\n    if(str.length < 2) return str;\n    return str.substring(0, 1) == '\"' && str.substring(str.length - 1) == '\"' ? str.substring(1, str.length - 1) : str;\n}\n/**\n * Desc: Merge data by default value\n * @param data\n * @param defData default value\n * @returns {{}|*}\n */\ncore4cc.mergeData = function(data, defData){\n    data = data || {};\n    if(defData == null) return data;;\n    for (var key in defData) {\n        if(data[key] == null && defData[key] != null) data[key] = defData[key];\n    }\n    return data;\n}\n"]}