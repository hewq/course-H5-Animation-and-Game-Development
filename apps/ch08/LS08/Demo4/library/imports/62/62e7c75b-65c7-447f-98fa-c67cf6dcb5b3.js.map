{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/kmMat4Transpose.js"],"names":["kernelConfig","kernelName","kernelInit","init","kernelCleanup","cleanup","kernelSimd","simd","kernelNonSimd","nonSimd","kernelIterations","benchmarks","add","Benchmark","T1","cc","kmMat4","T2","T1x4","T2x4","equals","A","B","i","printMatrix","matrix","print","r","str","ri","c","value","toFixed","mat","n","transpose","transposeSIMD"],"mappings":"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","file":"kmMat4Transpose.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark","sourcesContent":["// kmMat4Transpose\n\n(function () {\n\n  // Kernel configuration\n  var kernelConfig = {\n    kernelName:       \"kmMat4Transpose\",\n    kernelInit:       init,\n    kernelCleanup:    cleanup,\n    kernelSimd:       simd,\n    kernelNonSimd:    nonSimd,\n    kernelIterations: 10000\n  };\n\n  // Hook up to the harness\n  benchmarks.add(new Benchmark(kernelConfig));\n\n  // Benchmark data, initialization and kernel functions\n  var T1 = new cc.kmMat4();\n  var T2 = new cc.kmMat4();\n  var T1x4 = new cc.kmMat4();\n  var T2x4 = new cc.kmMat4();\n\n  function equals(A, B) {\n    for (var i = 0; i < 16; ++i) {\n      if (A[i] != B[i])\n        return false;\n    }\n    return true;\n  }\n\n  function printMatrix(matrix) {\n    print('--------matrix----------');\n    for (var r = 0; r < 4; ++r) {\n      var str = \"\";\n      var ri = r*4;\n      for (var c = 0; c < 4; ++c) {\n        var value = matrix[ri + c];\n        str += \" \" + value.toFixed(2);\n      }\n      print(str);\n    }\n  }\n\n  function init() {\n    T1.mat [0]  =  0;  T1.mat[1] =  1; T1.mat[2]  =  2; T1.mat[3]  =  3;\n    T1.mat [4]  = -1; T1.mat[5]  = -2; T1.mat[6]  = -3; T1.mat[7]  = -4;\n    T1.mat [8]  =  0;  T1.mat[9] =  0; T1.mat[10] =  2; T1.mat[11] =  3;\n    T1.mat [12] = -1; T1.mat[13] = -2; T1.mat[14] =  0; T1.mat[15] = -4;\n\n    T1x4.mat [0]  =  0;  T1x4.mat[1] =  1; T1x4.mat[2]  =  2; T1x4.mat[3]  =  3;\n    T1x4.mat [4]  = -1; T1x4.mat[5]  = -2; T1x4.mat[6]  = -3; T1x4.mat[7]  = -4;\n    T1x4.mat [8]  =  0;  T1x4.mat[9] =  0; T1x4.mat[10] =  2; T1x4.mat[11] =  3;\n    T1x4.mat [12] = -1; T1x4.mat[13] = -2; T1x4.mat[14] =  0; T1x4.mat[15] = -4;\n\n    nonSimd(1);\n    //printMatrix(T2.mat);\n    simd(1);\n    //printMatrix(T2x4.mat);\n    return equals(T1.mat, T1x4.mat) && equals(T2.mat, T2x4.mat);\n    \n  }\n\n  function cleanup() {\n    return init(); // Sanity checking before and after are the same\n  }\n\n  function nonSimd(n) {\n    for (var i = 0; i < n; i++) {\n      T2 = T1.transpose();\n      //T1.transpose();\n    }\n  }\n\n  function simd(n) {\n    for (var i = 0; i < n; i++) {\n      T2x4 = T1x4.transposeSIMD();\n      //T1x4.transposeSIMD();\n    }\n  }\n\n} ());\n"]}