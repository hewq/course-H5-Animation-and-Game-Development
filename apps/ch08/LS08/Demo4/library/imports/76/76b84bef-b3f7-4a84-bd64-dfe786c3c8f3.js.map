{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension/assets/frameworks/cocos2d-html5/extensions/gui/control-extension/CCControlButton.js"],"names":["cc","CONTROL_ZOOM_ACTION_TAG","ControlButton","Control","extend","_doesAdjustBackgroundImage","zoomOnTouchDown","_preferredSize","_labelAnchorPoint","_currentTitle","_currentTitleColor","_titleLabel","_backgroundSprite","_opacity","_isPushed","_titleDispatchTable","_titleColorDispatchTable","_titleLabelDispatchTable","_backgroundSpriteDispatchTable","_parentInited","_marginV","_marginH","_className","ctor","label","backgroundSprite","fontSize","prototype","call","size","p","color","WHITE","undefined","initWithTitleAndFontNameAndFontSize","initWithLabelAndBackgroundSprite","initWithBackgroundSprite","init","LabelTTF","Scale9Sprite","needsLayout","setVisible","setLabelAnchorPoint","locState","_state","getTitleForState","getTitleColorForState","getTitleLabelForState","setString","setColor","locContentSize","getContentSize","setPosition","width","height","getBackgroundSpriteForState","locBackgroundSprite","titleLabelSize","boundingBox","getBoundingBox","setContentSize","preferredSize","getPreferredSize","rectTitle","rect","rectBackground","maxRect","rectUnion","Error","setAdjustBackgroundImage","setPreferredSize","ignoreAnchorPointForPosition","setAnchorPoint","setOpacity","setOpacityModifyRGB","tempString","getString","setTitleForState","CONTROL_STATE_NORMAL","setTitleColorForState","getColor","setTitleLabelForState","setBackgroundSpriteForState","title","fontName","sprite","doesAdjustBackgroundImage","adjustBackgroundImage","getZoomOnTouchDown","setZoomOnTouchDown","locTable","itemKey","getLabelAnchorPoint","labelAnchorPoint","_getCurrentTitle","_getCurrentTitleColor","getOpacity","opacity","key","locRealColor","_realColor","r","g","b","a","isPushed","_getVerticalMargin","_getHorizontalOrigin","setMargins","marginH","marginV","setEnabled","enabled","setSelected","setHighlighted","CONTROL_STATE_HIGHLIGHTED","action","getActionByTag","stopAction","scaleValue","isHighlighted","isEnabled","isSelected","zoomAction","scaleTo","setTag","runAction","onTouchBegan","touch","event","isTouchInside","isVisible","hasVisibleParents","sendActionsForControlEvents","CONTROL_EVENT_TOUCH_DOWN","onTouchMoved","_enabled","_selected","_highlighted","isTouchMoveInside","CONTROL_EVENT_TOUCH_DRAG_ENTER","CONTROL_EVENT_TOUCH_DRAG_INSIDE","CONTROL_EVENT_TOUCH_DRAG_EXIT","CONTROL_EVENT_TOUCH_DRAG_OUTSIDE","onTouchEnded","CONTROL_EVENT_TOUCH_UP_INSIDE","CONTROL_EVENT_TOUCH_UP_OUTSIDE","onTouchCancelled","CONTROL_EVENT_TOUCH_CANCEL","state","getState","colorObject","titleLabel","previousLabel","removeChild","addChild","setTitleTTFForState","fntFile","getTitleTTFForState","labelTTF","getFontName","setTitleTTFSizeForState","setFontSize","getTitleTTFSizeForState","getFontSize","setTitleBMFontForState","LabelBMFont","getTitleBMFontForState","labelBMFont","getFntFile","previousSprite","locPreferredSize","setBackgroundSpriteFrameForState","spriteFrame","createWithSpriteFrame","_p","adjustBackground","defineGetterSetter","getAdjustBackgroundImage","labelAnchor","create"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;;AAGAA,GAAGC,uBAAH,GAA6B,UAA7B;;AAEA;;;;;;;;;;AAUAD,GAAGE,aAAH,GAAmBF,GAAGG,OAAH,CAAWC,MAAX,EAAkB,+BAA+B;AAChEC,gCAA4B,KADoC;AAEhEC,qBAAiB,KAF+C;AAGhEC,oBAAgB,IAHgD;AAIhEC,uBAAmB,IAJ6C;AAKhEC,mBAAe,IALiD;AAMhEC,wBAAoB,IAN4C;AAOhEC,iBAAa,IAPmD;AAQhEC,uBAAmB,IAR6C;AAShEC,cAAU,CATsD;AAUhEC,eAAW,KAVqD;AAWhEC,yBAAqB,IAX2C;AAYhEC,8BAA0B,IAZsC;AAahEC,8BAA0B,IAbsC;AAchEC,oCAAgC,IAdgC;AAehEC,mBAAe,KAfiD;;AAiBhEC,cAAU,CAjBsD;AAkBhEC,cAAU,CAlBsD;AAmBhEC,gBAAY,eAnBoD;;AAqBhEC,UAAM,cAAUC,KAAV,EAAiBC,gBAAjB,EAAmCC,QAAnC,EAA6C;AAC/C1B,WAAGG,OAAH,CAAWwB,SAAX,CAAqBJ,IAArB,CAA0BK,IAA1B,CAA+B,IAA/B;AACA,aAAKrB,cAAL,GAAsBP,GAAG6B,IAAH,CAAQ,CAAR,EAAW,CAAX,CAAtB;AACA,aAAKrB,iBAAL,GAAyBR,GAAG8B,CAAH,CAAK,CAAL,EAAQ,CAAR,CAAzB;AACA,aAAKrB,aAAL,GAAqB,EAArB;AACA,aAAKC,kBAAL,GAA0BV,GAAG+B,KAAH,CAASC,KAAnC;AACA,aAAKjB,mBAAL,GAA2B,EAA3B;AACA,aAAKC,wBAAL,GAAgC,EAAhC;AACA,aAAKC,wBAAL,GAAgC,EAAhC;AACA,aAAKC,8BAAL,GAAsC,EAAtC;;AAEA,YAAGQ,YAAYO,SAAf,EACI,KAAKC,mCAAL,CAAyCV,KAAzC,EAAgDC,gBAAhD,EAAkEC,QAAlE,EADJ,KAEK,IAAGD,oBAAoBQ,SAAvB,EACD,KAAKE,gCAAL,CAAsCX,KAAtC,EAA6CC,gBAA7C,EADC,KAEA,IAAGD,SAASS,SAAZ,EACD,KAAKG,wBAAL,CAA8BZ,KAA9B,EADC,KAGD,KAAKa,IAAL;AACP,KAxC+D;;AA0ChEA,UAAM,gBAAY;AACd,eAAO,KAAKF,gCAAL,CAAsC,IAAInC,GAAGsC,QAAP,CAAgB,EAAhB,EAAoB,OAApB,EAA6B,EAA7B,CAAtC,EAAwE,IAAItC,GAAGuC,YAAP,EAAxE,CAAP;AACH,KA5C+D;;AA8ChEC,iBAAa,uBAAY;AACrB,YAAI,CAAC,KAAKrB,aAAV,EAAyB;AACrB;AACH;AACD;AACA,YAAI,KAAKR,WAAT,EACI,KAAKA,WAAL,CAAiB8B,UAAjB,CAA4B,KAA5B;AACJ,YAAI,KAAK7B,iBAAT,EACI,KAAKA,iBAAL,CAAuB6B,UAAvB,CAAkC,KAAlC;;AAEJ;AACA,aAAKC,mBAAL,CAAyB,KAAKlC,iBAA9B;;AAEA;AACA;AACA,YAAImC,WAAW,KAAKC,MAApB;;AAEA,aAAKnC,aAAL,GAAqB,KAAKoC,gBAAL,CAAsBF,QAAtB,CAArB;AACA,aAAKjC,kBAAL,GAA0B,KAAKoC,qBAAL,CAA2BH,QAA3B,CAA1B;AACA,aAAKhC,WAAL,GAAmB,KAAKoC,qBAAL,CAA2BJ,QAA3B,CAAnB;;AAEA,YAAInB,QAAQ,KAAKb,WAAjB;AACA,YAAIa,SAASA,MAAMwB,SAAnB,EACIxB,MAAMwB,SAAN,CAAgB,KAAKvC,aAArB;AACJ,YAAIe,KAAJ,EACIA,MAAMyB,QAAN,CAAe,KAAKvC,kBAApB;;AAEJ,YAAIwC,iBAAiB,KAAKC,cAAL,EAArB;AACA,YAAI3B,KAAJ,EACIA,MAAM4B,WAAN,CAAkBF,eAAeG,KAAf,GAAuB,CAAzC,EAA4CH,eAAeI,MAAf,GAAwB,CAApE;;AAEJ;AACA,aAAK1C,iBAAL,GAAyB,KAAK2C,2BAAL,CAAiCZ,QAAjC,CAAzB;AACA,YAAIa,sBAAsB,KAAK5C,iBAA/B;AACA,YAAI4C,mBAAJ,EACIA,oBAAoBJ,WAApB,CAAgCF,eAAeG,KAAf,GAAuB,CAAvD,EAA0DH,eAAeI,MAAf,GAAwB,CAAlF;;AAEJ;AACA,YAAIG,iBAAiBzD,GAAG6B,IAAH,CAAQ,CAAR,EAAW,CAAX,CAArB;AACA,YAAIL,KAAJ,EAAW;AACP,gBAAIkC,cAAclC,MAAMmC,cAAN,EAAlB;AACAF,2BAAeJ,KAAf,GAAuBK,YAAYL,KAAnC;AACAI,2BAAeH,MAAf,GAAwBI,YAAYJ,MAApC;AACH;AACD;AACA,YAAI,KAAKjD,0BAAT,EAAqC;AACjC;AACA,gBAAImD,mBAAJ,EACIA,oBAAoBI,cAApB,CAAmCH,eAAeJ,KAAf,GAAuB,KAAKhC,QAAL,GAAgB,CAA1E,EAA6EoC,eAAeH,MAAf,GAAwB,KAAKlC,QAAL,GAAgB,CAArH;AACP,SAJD,MAIO;AACH;AACA,gBAAIoC,mBAAJ,EAAyB;AACrB,oBAAIK,gBAAgBL,oBAAoBM,gBAApB,EAApB;AACAD,gCAAgB7D,GAAG6B,IAAH,CAAQgC,cAAcR,KAAtB,EAA6BQ,cAAcP,MAA3C,CAAhB;AACA,oBAAIO,cAAcR,KAAd,IAAuB,CAA3B,EACIQ,cAAcR,KAAd,GAAsBI,eAAeJ,KAArC;AACJ,oBAAIQ,cAAcP,MAAd,IAAwB,CAA5B,EACIO,cAAcP,MAAd,GAAuBG,eAAeH,MAAtC;;AAEJE,oCAAoBI,cAApB,CAAmCC,aAAnC;AACH;AACJ;;AAED;AACA,YAAIE,YAAYvC,QAAQA,MAAMmC,cAAN,EAAR,GAAiC3D,GAAGgE,IAAH,CAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAjD;AACA,YAAIC,iBAAiBT,sBAAsBA,oBAAoBG,cAApB,EAAtB,GAA6D3D,GAAGgE,IAAH,CAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAlF;AACA,YAAIE,UAAUlE,GAAGmE,SAAH,CAAaJ,SAAb,EAAwBE,cAAxB,CAAd;AACA,aAAKL,cAAL,CAAoBM,QAAQb,KAA5B,EAAmCa,QAAQZ,MAA3C;AACAJ,yBAAiB,KAAKC,cAAL,EAAjB;AACA,YAAI3B,KAAJ,EAAW;AACPA,kBAAM4B,WAAN,CAAkBF,eAAeG,KAAf,GAAuB,CAAzC,EAA4CH,eAAeI,MAAf,GAAwB,CAApE;AACA9B,kBAAMiB,UAAN,CAAiB,IAAjB;AACH;AACD,YAAIe,mBAAJ,EAAyB;AACrBA,gCAAoBJ,WAApB,CAAgCF,eAAeG,KAAf,GAAuB,CAAvD,EAA0DH,eAAeI,MAAf,GAAwB,CAAlF;AACAE,gCAAoBf,UAApB,CAA+B,IAA/B;AACH;AACJ,KA3H+D;;AA6HhEN,sCAAkC,0CAAUX,KAAV,EAAiBC,gBAAjB,EAAmC;AACjE,YAAI,CAACD,KAAL,EACI,MAAM,IAAI4C,KAAJ,CAAU,+EAAV,CAAN;AACJ,YAAI,CAAC3C,gBAAL,EACI,MAAM,IAAI2C,KAAJ,CAAU,0FAAV,CAAN;AACJ,YAAIpE,GAAGG,OAAH,CAAWwB,SAAX,CAAqBU,IAArB,CAA0BT,IAA1B,CAA+B,IAA/B,EAAqC,IAArC,CAAJ,EAAgD;AAC5C,iBAAKT,aAAL,GAAqB,IAArB;;AAEA;AACA,iBAAKJ,mBAAL,GAA2B,EAA3B;AACA,iBAAKC,wBAAL,GAAgC,EAAhC;AACA,iBAAKC,wBAAL,GAAgC,EAAhC;AACA,iBAAKC,8BAAL,GAAsC,EAAtC;;AAEA,iBAAKJ,SAAL,GAAiB,KAAjB;AACA,iBAAKR,eAAL,GAAuB,IAAvB;;AAEA,iBAAKG,aAAL,GAAqB,IAArB;;AAEA;AACA,iBAAK4D,wBAAL,CAA8B,IAA9B;AACA,iBAAKC,gBAAL,CAAsBtE,GAAG6B,IAAH,CAAQ,CAAR,EAAW,CAAX,CAAtB;;AAEA;AACA,iBAAKvB,eAAL,GAAuB,IAAvB;;AAEA;AACA,iBAAKiE,4BAAL,CAAkC,KAAlC;AACA,iBAAKC,cAAL,CAAoB,GAApB,EAAyB,GAAzB;;AAEA;AACA,iBAAK7D,WAAL,GAAmBa,KAAnB;AACA,iBAAKZ,iBAAL,GAAyBa,gBAAzB;;AAEA;AACA,iBAAKgD,UAAL,CAAgB,GAAhB;AACA,iBAAKC,mBAAL,CAAyB,IAAzB;;AAEA;AACA,gBAAIC,aAAanD,MAAMoD,SAAN,EAAjB;AACA;AACA,iBAAKC,gBAAL,CAAsBF,UAAtB,EAAkC3E,GAAG8E,oBAArC;AACA,iBAAKC,qBAAL,CAA2BvD,MAAMwD,QAAN,EAA3B,EAA6ChF,GAAG8E,oBAAhD;AACA,iBAAKG,qBAAL,CAA2BzD,KAA3B,EAAkCxB,GAAG8E,oBAArC;AACA,iBAAKI,2BAAL,CAAiCzD,gBAAjC,EAAmDzB,GAAG8E,oBAAtD;;AAEA,iBAAKlC,MAAL,GAAc5C,GAAG8E,oBAAjB;;AAEA;AACA,iBAAKzD,QAAL,GAAgB,EAAhB;AACA,iBAAKD,QAAL,GAAgB,EAAhB;;AAEA,iBAAKZ,iBAAL,GAAyBR,GAAG8B,CAAH,CAAK,GAAL,EAAU,GAAV,CAAzB;;AAEA,iBAAKwC,gBAAL,CAAsBtE,GAAG6B,IAAH,CAAQ,CAAR,EAAW,CAAX,CAAtB;;AAEA;AACA,iBAAKW,WAAL;AACA,mBAAO,IAAP;AACH,SAtDD,CAsDC;AAtDD,aAwDI,OAAO,KAAP;AACP,KA3L+D;;AA6LhEN,yCAAqC,6CAAUiD,KAAV,EAAiBC,QAAjB,EAA2B1D,QAA3B,EAAqC;AACtE,YAAIF,QAAQ,IAAIxB,GAAGsC,QAAP,CAAgB6C,KAAhB,EAAuBC,QAAvB,EAAiC1D,QAAjC,CAAZ;AACA,eAAO,KAAKS,gCAAL,CAAsCX,KAAtC,EAA6C,IAAIxB,GAAGuC,YAAP,EAA7C,CAAP;AACH,KAhM+D;;AAkMhEH,8BAA0B,kCAAUiD,MAAV,EAAkB;AACxC,YAAI7D,QAAQ,IAAIxB,GAAGsC,QAAP,CAAgB,EAAhB,EAAoB,OAApB,EAA6B,EAA7B,CAAZ,CADwC,CACK;AAC7C,eAAO,KAAKH,gCAAL,CAAsCX,KAAtC,EAA6C6D,MAA7C,CAAP;AACH,KArM+D;;AAuMhE;;;;AAIAC,+BAA2B,qCAAY;AACnC,eAAO,KAAKjF,0BAAZ;AACH,KA7M+D;;AA+MhEgE,8BAA0B,kCAAUkB,qBAAV,EAAiC;AACvD,aAAKlF,0BAAL,GAAkCkF,qBAAlC;AACA,aAAK/C,WAAL;AACH,KAlN+D;;AAoNhE;AACAgD,wBAAoB,8BAAY;AAC5B,eAAO,KAAKlF,eAAZ;AACH,KAvN+D;;AAyNhEmF,wBAAoB,4BAAUnF,eAAV,EAA2B;AAC3C,eAAO,KAAKA,eAAL,GAAuBA,eAA9B;AACH,KA3N+D;;AA6NhE;AACAwD,sBAAkB,4BAAY;AAC1B,eAAO,KAAKvD,cAAZ;AACH,KAhO+D;;AAkOhE+D,sBAAkB,0BAAUzC,IAAV,EAAgB;AAC9B,YAAIA,KAAKwB,KAAL,KAAe,CAAf,IAAoBxB,KAAKyB,MAAL,KAAgB,CAAxC,EAA2C;AACvC,iBAAKjD,0BAAL,GAAkC,IAAlC;AACH,SAFD,MAEO;AACH,iBAAKA,0BAAL,GAAkC,KAAlC;AACA,gBAAIqF,WAAW,KAAKxE,8BAApB;AACA,iBAAK,IAAIyE,OAAT,IAAoBD,QAApB;AACIA,yBAASC,OAAT,EAAkBrB,gBAAlB,CAAmCzC,IAAnC;AADJ;AAEH;AACD,aAAKtB,cAAL,GAAsBsB,IAAtB;AACA,aAAKW,WAAL;AACH,KA7O+D;;AA+OhEoD,yBAAqB,+BAAY;AAC7B,eAAO,KAAKpF,iBAAZ;AACH,KAjP+D;AAkPhEkC,yBAAqB,6BAAUmD,gBAAV,EAA4B;AAC7C,aAAKrF,iBAAL,GAAyBqF,gBAAzB;AACA,YAAI,KAAKlF,WAAT,EACI,KAAKA,WAAL,CAAiB6D,cAAjB,CAAgCqB,gBAAhC;AACP,KAtP+D;;AAwPhE;;;;AAIAC,sBAAkB,4BAAY;AAC1B,eAAO,KAAKrF,aAAZ;AACH,KA9P+D;;AAgQhE;AACAsF,2BAAuB,iCAAY;AAC/B,eAAO,KAAKrF,kBAAZ;AACH,KAnQ+D;;AAqQhE;AACAsF,gBAAY,sBAAY;AACpB,eAAO,KAAKnF,QAAZ;AACH,KAxQ+D;;AA0QhE4D,gBAAY,oBAAUwB,OAAV,EAAmB;AAC3B;AACAjG,WAAGG,OAAH,CAAWwB,SAAX,CAAqB8C,UAArB,CAAgC7C,IAAhC,CAAqC,IAArC,EAA2CqE,OAA3C;AACA;;;;;;;AAOA,YAAIP,WAAW,KAAKxE,8BAApB;AACA,aAAK,IAAIyE,OAAT,IAAoBD,QAApB;AACIA,qBAASC,OAAT,EAAkBlB,UAAlB,CAA6BwB,OAA7B;AADJ;AAEH,KAvR+D;;AAyRhEhD,cAAU,kBAAUlB,KAAV,EAAiB;AACvB/B,WAAGG,OAAH,CAAWwB,SAAX,CAAqBsB,QAArB,CAA8BrB,IAA9B,CAAmC,IAAnC,EAAyCG,KAAzC;AACA,YAAI2D,WAAW,KAAKxE,8BAApB;AACA,aAAK,IAAIgF,GAAT,IAAgBR,QAAhB;AACIA,qBAASQ,GAAT,EAAcjD,QAAd,CAAuBlB,KAAvB;AADJ;AAEH,KA9R+D;;AAgShEiD,cAAU,oBAAY;AAClB,YAAImB,eAAe,KAAKC,UAAxB;AACA,eAAOpG,GAAG+B,KAAH,CAASoE,aAAaE,CAAtB,EAAyBF,aAAaG,CAAtC,EAAyCH,aAAaI,CAAtD,EAAyDJ,aAAaK,CAAtE,CAAP;AACH,KAnS+D;;AAsShE;AACAC,cAAU,oBAAY;AAClB,eAAO,KAAK3F,SAAZ;AACH,KAzS+D;;AA2ShE;AACA4F,wBAAoB,8BAAY;AAC5B,eAAO,KAAKtF,QAAZ;AACH,KA9S+D;AA+ShE;AACAuF,0BAAsB,gCAAY;AAC9B,eAAO,KAAKtF,QAAZ;AACH,KAlT+D;;AAoThE;;;;;AAKAuF,gBAAY,oBAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AACpC,aAAK1F,QAAL,GAAgB0F,OAAhB;AACA,aAAKzF,QAAL,GAAgBwF,OAAhB;AACA,aAAKrE,WAAL;AACH,KA7T+D;;AA+ThEuE,gBAAY,oBAAUC,OAAV,EAAmB;AAC3BhH,WAAGG,OAAH,CAAWwB,SAAX,CAAqBoF,UAArB,CAAgCnF,IAAhC,CAAqC,IAArC,EAA2CoF,OAA3C;AACA,aAAKxE,WAAL;AACH,KAlU+D;AAmUhEyE,iBAAa,qBAAUD,OAAV,EAAmB;AAC5BhH,WAAGG,OAAH,CAAWwB,SAAX,CAAqBsF,WAArB,CAAiCrF,IAAjC,CAAsC,IAAtC,EAA4CoF,OAA5C;AACA,aAAKxE,WAAL;AACH,KAtU+D;;AAwUhE0E,oBAAgB,wBAAUF,OAAV,EAAmB;AAC/B,aAAKpE,MAAL,GAAcoE,UAAUhH,GAAGmH,yBAAb,GAAyCnH,GAAG8E,oBAA1D;;AAEA9E,WAAGG,OAAH,CAAWwB,SAAX,CAAqBuF,cAArB,CAAoCtF,IAApC,CAAyC,IAAzC,EAA+CoF,OAA/C;AACA,YAAII,SAAS,KAAKC,cAAL,CAAoBrH,GAAGC,uBAAvB,CAAb;AACA,YAAImH,MAAJ,EACI,KAAKE,UAAL,CAAgBF,MAAhB;;AAEJ;AACA,YAAI,KAAK9G,eAAT,EAA0B;AACtB,gBAAIiH,aAAc,KAAKC,aAAL,MAAwB,KAAKC,SAAL,EAAxB,IAA4C,CAAC,KAAKC,UAAL,EAA9C,GAAmE,GAAnE,GAAyE,GAA1F;AACA,gBAAIC,aAAa3H,GAAG4H,OAAH,CAAW,IAAX,EAAiBL,UAAjB,CAAjB;AACAI,uBAAWE,MAAX,CAAkB7H,GAAGC,uBAArB;AACA,iBAAK6H,SAAL,CAAeH,UAAf;AACH;AACJ,KAvV+D;;AAyVhEI,kBAAc,sBAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AAClC,YAAI,CAAC,KAAKC,aAAL,CAAmBF,KAAnB,CAAD,IAA8B,CAAC,KAAKP,SAAL,EAA/B,IAAmD,CAAC,KAAKU,SAAL,EAApD,IAAwE,CAAC,KAAKC,iBAAL,EAA7E,EACI,OAAO,KAAP;;AAEJ,aAAKtH,SAAL,GAAiB,IAAjB;AACA,aAAKoG,cAAL,CAAoB,IAApB;AACA,aAAKmB,2BAAL,CAAiCrI,GAAGsI,wBAApC;AACA,eAAO,IAAP;AACH,KAjW+D;;AAmWhEC,kBAAc,sBAAUP,KAAV,EAAiBC,KAAjB,EAAwB;AAClC,YAAI,CAAC,KAAKO,QAAN,IAAkB,CAAC,KAAK1H,SAAxB,IAAqC,KAAK2H,SAA9C,EAAyD;AACrD,gBAAI,KAAKC,YAAT,EACI,KAAKxB,cAAL,CAAoB,KAApB;AACJ;AACH;;AAED,YAAIyB,oBAAoB,KAAKT,aAAL,CAAmBF,KAAnB,CAAxB;AACA,YAAIW,qBAAqB,CAAC,KAAKD,YAA/B,EAA6C;AACzC,iBAAKxB,cAAL,CAAoB,IAApB;AACA,iBAAKmB,2BAAL,CAAiCrI,GAAG4I,8BAApC;AACH,SAHD,MAGO,IAAID,qBAAqB,KAAKD,YAA9B,EAA4C;AAC/C,iBAAKL,2BAAL,CAAiCrI,GAAG6I,+BAApC;AACH,SAFM,MAEA,IAAI,CAACF,iBAAD,IAAsB,KAAKD,YAA/B,EAA6C;AAChD,iBAAKxB,cAAL,CAAoB,KAApB;AACA,iBAAKmB,2BAAL,CAAiCrI,GAAG8I,6BAApC;AACH,SAHM,MAGA,IAAI,CAACH,iBAAD,IAAsB,CAAC,KAAKD,YAAhC,EAA8C;AACjD,iBAAKL,2BAAL,CAAiCrI,GAAG+I,gCAApC;AACH;AACJ,KAtX+D;AAuXhEC,kBAAc,sBAAUhB,KAAV,EAAiBC,KAAjB,EAAwB;AAClC,aAAKnH,SAAL,GAAiB,KAAjB;AACA,aAAKoG,cAAL,CAAoB,KAApB;;AAEA,YAAI,KAAKgB,aAAL,CAAmBF,KAAnB,CAAJ,EAA+B;AAC3B,iBAAKK,2BAAL,CAAiCrI,GAAGiJ,6BAApC;AACH,SAFD,MAEO;AACH,iBAAKZ,2BAAL,CAAiCrI,GAAGkJ,8BAApC;AACH;AACJ,KAhY+D;;AAkYhEC,sBAAkB,0BAAUnB,KAAV,EAAiBC,KAAjB,EAAwB;AACtC,aAAKnH,SAAL,GAAiB,KAAjB;AACA,aAAKoG,cAAL,CAAoB,KAApB;AACA,aAAKmB,2BAAL,CAAiCrI,GAAGoJ,0BAApC;AACH,KAtY+D;;AAwYhE;;;;;;AAMAvG,sBAAkB,0BAAUwG,KAAV,EAAiB;AAC/B,YAAI3D,WAAW,KAAK3E,mBAApB;AACA,YAAI2E,QAAJ,EAAc;AACV,gBAAIA,SAAS2D,KAAT,CAAJ,EACI,OAAO3D,SAAS2D,KAAT,CAAP;AACJ,mBAAO3D,SAAS1F,GAAG8E,oBAAZ,CAAP;AACH;AACD,eAAO,EAAP;AACH,KAtZ+D;;AAwZhE;;;;;;;;AAQAD,sBAAkB,0BAAUM,KAAV,EAAiBkE,KAAjB,EAAwB;AACtC,aAAKtI,mBAAL,CAAyBsI,KAAzB,IAAkClE,SAAS,EAA3C;;AAEA;AACA,YAAI,KAAKmE,QAAL,OAAoBD,KAAxB,EACI,KAAK7G,WAAL;AACP,KAta+D;;AAwahE;;;;;;AAMAM,2BAAuB,+BAAUuG,KAAV,EAAiB;AACpC,YAAIE,cAAc,KAAKvI,wBAAL,CAA8BqI,KAA9B,CAAlB;AACA,YAAIE,WAAJ,EACI,OAAOA,WAAP;AACJA,sBAAc,KAAKvI,wBAAL,CAA8BhB,GAAG8E,oBAAjC,CAAd;AACA,YAAIyE,WAAJ,EACI,OAAOA,WAAP;AACJ,eAAOvJ,GAAG+B,KAAH,CAASC,KAAhB;AACH,KAtb+D;;AAwbhE;;;;;;AAMA+C,2BAAuB,+BAAUhD,KAAV,EAAiBsH,KAAjB,EAAwB;AAC3C;AACA,aAAKrI,wBAAL,CAA8BqI,KAA9B,IAAuCtH,KAAvC;;AAEA;AACA,YAAI,KAAKuH,QAAL,OAAoBD,KAAxB,EACI,KAAK7G,WAAL;AACP,KArc+D;;AAuchE;;;;;;AAMAO,2BAAuB,+BAAUsG,KAAV,EAAiB;AACpC,YAAI3D,WAAW,KAAKzE,wBAApB;AACA,YAAIyE,SAAS2D,KAAT,CAAJ,EACI,OAAO3D,SAAS2D,KAAT,CAAP;;AAEJ,eAAO3D,SAAS1F,GAAG8E,oBAAZ,CAAP;AACH,KAnd+D;;AAqdhE;;;;;;;AAOAG,2BAAuB,+BAAUuE,UAAV,EAAsBH,KAAtB,EAA6B;AAChD,YAAI3D,WAAW,KAAKzE,wBAApB;AACA,YAAIyE,SAAS2D,KAAT,CAAJ,EAAqB;AACjB,gBAAII,gBAAgB/D,SAAS2D,KAAT,CAApB;AACA,gBAAII,aAAJ,EACI,KAAKC,WAAL,CAAiBD,aAAjB,EAAgC,IAAhC;AACP;;AAED/D,iBAAS2D,KAAT,IAAkBG,UAAlB;AACAA,mBAAW/G,UAAX,CAAsB,KAAtB;AACA+G,mBAAWhF,cAAX,CAA0B,GAA1B,EAA+B,GAA/B;AACA,aAAKmF,QAAL,CAAcH,UAAd,EAA0B,CAA1B;;AAEA;AACA,YAAI,KAAKF,QAAL,OAAoBD,KAAxB,EACI,KAAK7G,WAAL;AACP,KA5e+D;;AA8ehE;;;;;AAKAoH,yBAAqB,6BAAUC,OAAV,EAAmBR,KAAnB,EAA0B;AAC3C,YAAIlE,QAAQ,KAAKtC,gBAAL,CAAsBwG,KAAtB,CAAZ;AACA,YAAI,CAAClE,KAAL,EACIA,QAAQ,EAAR;AACJ,aAAKF,qBAAL,CAA2B,IAAIjF,GAAGsC,QAAP,CAAgB6C,KAAhB,EAAuB0E,OAAvB,EAAgC,EAAhC,CAA3B,EAAgER,KAAhE;AACH,KAxf+D;;AA0fhE;;;;;AAKAS,yBAAqB,6BAAUT,KAAV,EAAiB;AAClC,YAAIU,WAAW,KAAKhH,qBAAL,CAA2BsG,KAA3B,CAAf;AACA,YAAKU,YAAY,IAAb,IAAuBA,oBAAqB/J,GAAGsC,QAAnD,EAA8D;AAC1D,mBAAOyH,SAASC,WAAT,EAAP;AACH,SAFD,MAEO;AACH,mBAAO,EAAP;AACH;AACJ,KAtgB+D;;AAwgBhE;;;;AAIAC,6BAAyB,iCAAUpI,IAAV,EAAgBwH,KAAhB,EAAuB;AAC5C,YAAIU,WAAW,KAAKhH,qBAAL,CAA2BsG,KAA3B,CAAf;AACA,YAAKU,YAAY,IAAb,IAAuBA,oBAAqB/J,GAAGsC,QAAnD,EAA8D;AAC1DyH,qBAASG,WAAT,CAAqBrI,IAArB;AACH;AACJ,KAjhB+D;;AAmhBhE;;;;;AAKAsI,6BAAyB,iCAAUd,KAAV,EAAiB;AACtC,YAAIU,WAAW,KAAKhH,qBAAL,CAA2BsG,KAA3B,CAAf;AACA,YAAKU,YAAY,IAAb,IAAuBA,oBAAqB/J,GAAGsC,QAAnD,EAA8D;AAC1D,mBAAOyH,SAASK,WAAT,EAAP;AACH;AACD,eAAO,CAAP;AACH,KA9hB+D;;AAgiBhE;;;;;AAKAC,4BAAwB,gCAAUR,OAAV,EAAmBR,KAAnB,EAA0B;AAC9C,YAAIlE,QAAQ,KAAKtC,gBAAL,CAAsBwG,KAAtB,CAAZ;AACA,YAAI,CAAClE,KAAL,EACIA,QAAQ,EAAR;AACJ,aAAKF,qBAAL,CAA2B,IAAIjF,GAAGsK,WAAP,CAAmBnF,KAAnB,EAA0B0E,OAA1B,CAA3B,EAA+DR,KAA/D;AACH,KA1iB+D;;AA4iBhEkB,4BAAwB,gCAAUlB,KAAV,EAAiB;AACrC,YAAImB,cAAc,KAAKzH,qBAAL,CAA2BsG,KAA3B,CAAlB;AACA,YAAKmB,eAAe,IAAhB,IAA0BA,uBAAwBxK,GAAGsK,WAAzD,EAAuE;AACnE,mBAAOE,YAAYC,UAAZ,EAAP;AACH;AACD,eAAO,EAAP;AACH,KAljB+D;;AAojBhE;;;;;AAKAlH,iCAA6B,qCAAU8F,KAAV,EAAiB;AAC1C,YAAI3D,WAAW,KAAKxE,8BAApB;AACA,YAAIwE,SAAS2D,KAAT,CAAJ,EAAqB;AACjB,mBAAO3D,SAAS2D,KAAT,CAAP;AACH;AACD,eAAO3D,SAAS1F,GAAG8E,oBAAZ,CAAP;AACH,KA/jB+D;;AAikBhE;;;;;;AAMAI,iCAA6B,qCAAUG,MAAV,EAAkBgE,KAAlB,EAAyB;AAClD,YAAI3D,WAAW,KAAKxE,8BAApB;AACA,YAAIwE,SAAS2D,KAAT,CAAJ,EAAqB;AACjB,gBAAIqB,iBAAiBhF,SAAS2D,KAAT,CAArB;AACA,gBAAIqB,cAAJ,EACI,KAAKhB,WAAL,CAAiBgB,cAAjB,EAAiC,IAAjC;AACP;;AAEDhF,iBAAS2D,KAAT,IAAkBhE,MAAlB;AACAA,eAAO5C,UAAP,CAAkB,KAAlB;AACA4C,eAAOb,cAAP,CAAsB,GAAtB,EAA2B,GAA3B;AACA,aAAKmF,QAAL,CAActE,MAAd;;AAEA,YAAIsF,mBAAmB,KAAKpK,cAA5B;AACA,YAAIoK,iBAAiBtH,KAAjB,KAA2B,CAA3B,IAAgCsH,iBAAiBrH,MAAjB,KAA4B,CAAhE,EAAmE;AAC/D+B,mBAAOf,gBAAP,CAAwBqG,gBAAxB;AACH;;AAED;AACA,YAAI,KAAK/H,MAAL,KAAgByG,KAApB,EACI,KAAK7G,WAAL;AACP,KA5lB+D;;AA8lBhE;;;;;;AAMAoI,sCAAkC,0CAAUC,WAAV,EAAuBxB,KAAvB,EAA8B;AAC5D,YAAIhE,SAASrF,GAAGuC,YAAH,CAAgBuI,qBAAhB,CAAsCD,WAAtC,CAAb;AACA,aAAK3F,2BAAL,CAAiCG,MAAjC,EAAyCgE,KAAzC;AACH;AAvmB+D,CAAjD,CAAnB;;AA0mBA,IAAI0B,KAAK/K,GAAGE,aAAH,CAAiByB,SAA1B;;AAEA;AACA;AACAoJ,GAAGC,gBAAH;AACAhL,GAAGiL,kBAAH,CAAsBF,EAAtB,EAA0B,kBAA1B,EAA8CA,GAAGG,wBAAjD,EAA2EH,GAAG1G,wBAA9E;AACA;AACA0G,GAAGlH,aAAH;AACA7D,GAAGiL,kBAAH,CAAsBF,EAAtB,EAA0B,eAA1B,EAA2CA,GAAGjH,gBAA9C,EAAgEiH,GAAGzG,gBAAnE;AACA;AACAyG,GAAGI,WAAH;AACAnL,GAAGiL,kBAAH,CAAsBF,EAAtB,EAA0B,aAA1B,EAAyCA,GAAGnF,mBAA5C,EAAiEmF,GAAGrI,mBAApE;;AAEAqI,KAAK,IAAL;;AAEA;;;;;;;AAOA/K,GAAGE,aAAH,CAAiBkL,MAAjB,GAA0B,UAAU5J,KAAV,EAAiBC,gBAAjB,EAAmCC,QAAnC,EAA6C;AACnE,WAAO,IAAI1B,GAAGE,aAAP,CAAqBsB,KAArB,EAA4BC,gBAA5B,EAA8CC,QAA9C,CAAP;AACH,CAFD","file":"CCControlButton.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension","sourcesContent":["/**\n * CCControlButton.m\n *\n * Copyright (c) 2008-2010 Ricardo Quesada\n * Copyright (c) 2011-2012 cocos2d-x.org\n * Copyright (c) 2013-2014 Chukong Technologies Inc.\n * Copyright 2011 Yannick Loriot.\n * http://yannickloriot.com\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @ignore\n */\ncc.CONTROL_ZOOM_ACTION_TAG = 0xCCCB0001;\n\n/**\n * CCControlButton: Button control for Cocos2D.\n * @class\n * @extends cc.Control\n *\n * @property {Boolean}  adjustBackgroundImage   - Indicate whether the background image will be adjusted\n * @property {Boolean}  zoomOnTouchDown         - Indicate whether the button will be zoomed while touch down\n * @property {cc.Size}  preferredSize           - The preferred size of the control button\n * @property {Boolean}  labelAnchor             - The anchor point for the label of the control button\n */\ncc.ControlButton = cc.Control.extend(/** @lends cc.ControlButton# */{\n    _doesAdjustBackgroundImage: false,\n    zoomOnTouchDown: false,\n    _preferredSize: null,\n    _labelAnchorPoint: null,\n    _currentTitle: null,\n    _currentTitleColor: null,\n    _titleLabel: null,\n    _backgroundSprite: null,\n    _opacity: 0,\n    _isPushed: false,\n    _titleDispatchTable: null,\n    _titleColorDispatchTable: null,\n    _titleLabelDispatchTable: null,\n    _backgroundSpriteDispatchTable: null,\n    _parentInited: false,\n\n    _marginV: 0,\n    _marginH: 0,\n    _className: \"ControlButton\",\n\n    ctor: function (label, backgroundSprite, fontSize) {\n        cc.Control.prototype.ctor.call(this);\n        this._preferredSize = cc.size(0, 0);\n        this._labelAnchorPoint = cc.p(0, 0);\n        this._currentTitle = \"\";\n        this._currentTitleColor = cc.color.WHITE;\n        this._titleDispatchTable = {};\n        this._titleColorDispatchTable = {};\n        this._titleLabelDispatchTable = {};\n        this._backgroundSpriteDispatchTable = {};\n\n        if(fontSize != undefined)\n            this.initWithTitleAndFontNameAndFontSize(label, backgroundSprite, fontSize);\n        else if(backgroundSprite != undefined)\n            this.initWithLabelAndBackgroundSprite(label, backgroundSprite);\n        else if(label != undefined)\n            this.initWithBackgroundSprite(label);\n        else\n            this.init();\n    },\n\n    init: function () {\n        return this.initWithLabelAndBackgroundSprite(new cc.LabelTTF(\"\", \"Arial\", 12), new cc.Scale9Sprite());\n    },\n\n    needsLayout: function () {\n        if (!this._parentInited) {\n            return;\n        }\n        // Hide the background and the label\n        if (this._titleLabel)\n            this._titleLabel.setVisible(false);\n        if (this._backgroundSprite)\n            this._backgroundSprite.setVisible(false);\n\n        // Update anchor of all labels\n        this.setLabelAnchorPoint(this._labelAnchorPoint);\n\n        // Update the label to match with the current state\n        //CC_SAFE_RELEASE(this._currentTitle)\n        var locState = this._state;\n\n        this._currentTitle = this.getTitleForState(locState);\n        this._currentTitleColor = this.getTitleColorForState(locState);\n        this._titleLabel = this.getTitleLabelForState(locState);\n\n        var label = this._titleLabel;\n        if (label && label.setString)\n            label.setString(this._currentTitle);\n        if (label)\n            label.setColor(this._currentTitleColor);\n\n        var locContentSize = this.getContentSize();\n        if (label)\n            label.setPosition(locContentSize.width / 2, locContentSize.height / 2);\n\n        // Update the background sprite\n        this._backgroundSprite = this.getBackgroundSpriteForState(locState);\n        var locBackgroundSprite = this._backgroundSprite;\n        if (locBackgroundSprite)\n            locBackgroundSprite.setPosition(locContentSize.width / 2, locContentSize.height / 2);\n\n        // Get the title label size\n        var titleLabelSize = cc.size(0, 0);\n        if (label) {\n            var boundingBox = label.getBoundingBox();\n            titleLabelSize.width = boundingBox.width;\n            titleLabelSize.height = boundingBox.height;\n        }\n        // Adjust the background image if necessary\n        if (this._doesAdjustBackgroundImage) {\n            // Add the margins\n            if (locBackgroundSprite)\n                locBackgroundSprite.setContentSize(titleLabelSize.width + this._marginH * 2, titleLabelSize.height + this._marginV * 2);\n        } else {\n            //TODO: should this also have margins if one of the preferred sizes is relaxed?\n            if (locBackgroundSprite) {\n                var preferredSize = locBackgroundSprite.getPreferredSize();\n                preferredSize = cc.size(preferredSize.width, preferredSize.height);\n                if (preferredSize.width <= 0)\n                    preferredSize.width = titleLabelSize.width;\n                if (preferredSize.height <= 0)\n                    preferredSize.height = titleLabelSize.height;\n\n                locBackgroundSprite.setContentSize(preferredSize);\n            }\n        }\n\n        // Set the content size\n        var rectTitle = label ? label.getBoundingBox() : cc.rect(0, 0, 0, 0);\n        var rectBackground = locBackgroundSprite ? locBackgroundSprite.getBoundingBox() : cc.rect(0, 0, 0, 0);\n        var maxRect = cc.rectUnion(rectTitle, rectBackground);\n        this.setContentSize(maxRect.width, maxRect.height);\n        locContentSize = this.getContentSize();\n        if (label) {\n            label.setPosition(locContentSize.width / 2, locContentSize.height / 2);\n            label.setVisible(true);\n        }\n        if (locBackgroundSprite) {\n            locBackgroundSprite.setPosition(locContentSize.width / 2, locContentSize.height / 2);\n            locBackgroundSprite.setVisible(true);\n        }\n    },\n\n    initWithLabelAndBackgroundSprite: function (label, backgroundSprite) {\n        if (!label)\n            throw new Error(\"cc.ControlButton.initWithLabelAndBackgroundSprite(): label should be non-null\");\n        if (!backgroundSprite)\n            throw new Error(\"cc.ControlButton.initWithLabelAndBackgroundSprite(): backgroundSprite should be non-null\");\n        if (cc.Control.prototype.init.call(this, true)) {\n            this._parentInited = true;\n\n            // Initialize the button state tables\n            this._titleDispatchTable = {};\n            this._titleColorDispatchTable = {};\n            this._titleLabelDispatchTable = {};\n            this._backgroundSpriteDispatchTable = {};\n\n            this._isPushed = false;\n            this.zoomOnTouchDown = true;\n\n            this._currentTitle = null;\n\n            // Adjust the background image by default\n            this.setAdjustBackgroundImage(true);\n            this.setPreferredSize(cc.size(0, 0));\n\n            // Zooming button by default\n            this.zoomOnTouchDown = true;\n\n            // Set the default anchor point\n            this.ignoreAnchorPointForPosition(false);\n            this.setAnchorPoint(0.5, 0.5);\n\n            // Set the nodes\n            this._titleLabel = label;\n            this._backgroundSprite = backgroundSprite;\n\n            // Set the default color and opacity\n            this.setOpacity(255);\n            this.setOpacityModifyRGB(true);\n\n            // Initialize the dispatch table\n            var tempString = label.getString();\n            //tempString.autorelease();\n            this.setTitleForState(tempString, cc.CONTROL_STATE_NORMAL);\n            this.setTitleColorForState(label.getColor(), cc.CONTROL_STATE_NORMAL);\n            this.setTitleLabelForState(label, cc.CONTROL_STATE_NORMAL);\n            this.setBackgroundSpriteForState(backgroundSprite, cc.CONTROL_STATE_NORMAL);\n\n            this._state = cc.CONTROL_STATE_NORMAL;\n\n            //default margins\n            this._marginH = 24;\n            this._marginV = 12;\n\n            this._labelAnchorPoint = cc.p(0.5, 0.5);\n\n            this.setPreferredSize(cc.size(0, 0));\n\n            // Layout update\n            this.needsLayout();\n            return true;\n        }//couldn't init the CCControl\n        else\n            return false;\n    },\n\n    initWithTitleAndFontNameAndFontSize: function (title, fontName, fontSize) {\n        var label = new cc.LabelTTF(title, fontName, fontSize);\n        return this.initWithLabelAndBackgroundSprite(label, new cc.Scale9Sprite());\n    },\n\n    initWithBackgroundSprite: function (sprite) {\n        var label = new cc.LabelTTF(\"\", \"Arial\", 30);//\n        return this.initWithLabelAndBackgroundSprite(label, sprite);\n    },\n\n    /**\n     * Adjust the background image. YES by default. If the property is set to NO, the background will use the preferred size of the background image.\n     * @return {Boolean}\n     */\n    doesAdjustBackgroundImage: function () {\n        return this._doesAdjustBackgroundImage;\n    },\n\n    setAdjustBackgroundImage: function (adjustBackgroundImage) {\n        this._doesAdjustBackgroundImage = adjustBackgroundImage;\n        this.needsLayout();\n    },\n\n    /** Adjust the button zooming on touchdown. Default value is YES. */\n    getZoomOnTouchDown: function () {\n        return this.zoomOnTouchDown;\n    },\n\n    setZoomOnTouchDown: function (zoomOnTouchDown) {\n        return this.zoomOnTouchDown = zoomOnTouchDown;\n    },\n\n    /** The preferred size of the button, if label is larger it will be expanded. */\n    getPreferredSize: function () {\n        return this._preferredSize;\n    },\n\n    setPreferredSize: function (size) {\n        if (size.width === 0 && size.height === 0) {\n            this._doesAdjustBackgroundImage = true;\n        } else {\n            this._doesAdjustBackgroundImage = false;\n            var locTable = this._backgroundSpriteDispatchTable;\n            for (var itemKey in locTable)\n                locTable[itemKey].setPreferredSize(size);\n        }\n        this._preferredSize = size;\n        this.needsLayout();\n    },\n\n    getLabelAnchorPoint: function () {\n        return this._labelAnchorPoint;\n    },\n    setLabelAnchorPoint: function (labelAnchorPoint) {\n        this._labelAnchorPoint = labelAnchorPoint;\n        if (this._titleLabel)\n            this._titleLabel.setAnchorPoint(labelAnchorPoint);\n    },\n\n    /**\n     * The current title that is displayed on the button.\n     * @return {string}\n     */\n    _getCurrentTitle: function () {\n        return this._currentTitle;\n    },\n\n    /** The current color used to display the title. */\n    _getCurrentTitleColor: function () {\n        return this._currentTitleColor;\n    },\n\n    /* Override setter to affect a background sprite too */\n    getOpacity: function () {\n        return this._opacity;\n    },\n\n    setOpacity: function (opacity) {\n        // XXX fixed me if not correct\n        cc.Control.prototype.setOpacity.call(this, opacity);\n        /*this._opacity = opacity;\n         var controlChildren = this.getChildren();\n         for (var i = 0; i < controlChildren.length; i++) {\n         var selChild = controlChildren[i];\n         if (selChild)\n         selChild.setOpacity(opacity);\n         }*/\n        var locTable = this._backgroundSpriteDispatchTable;\n        for (var itemKey in locTable)\n            locTable[itemKey].setOpacity(opacity);\n    },\n\n    setColor: function (color) {\n        cc.Control.prototype.setColor.call(this, color);\n        var locTable = this._backgroundSpriteDispatchTable;\n        for (var key in locTable)\n            locTable[key].setColor(color);\n    },\n\n    getColor: function () {\n        var locRealColor = this._realColor;\n        return cc.color(locRealColor.r, locRealColor.g, locRealColor.b, locRealColor.a);\n    },\n\n\n    /** Flag to know if the button is currently pushed.  */\n    isPushed: function () {\n        return this._isPushed;\n    },\n\n    /* Define the button margin for Top/Bottom edge */\n    _getVerticalMargin: function () {\n        return this._marginV;\n    },\n    /* Define the button margin for Left/Right edge */\n    _getHorizontalOrigin: function () {\n        return this._marginH;\n    },\n\n    /**\n     * set the margins at once (so we only have to do one call of needsLayout)\n     * @param {Number} marginH\n     * @param {Number} marginV\n     */\n    setMargins: function (marginH, marginV) {\n        this._marginV = marginV;\n        this._marginH = marginH;\n        this.needsLayout();\n    },\n\n    setEnabled: function (enabled) {\n        cc.Control.prototype.setEnabled.call(this, enabled);\n        this.needsLayout();\n    },\n    setSelected: function (enabled) {\n        cc.Control.prototype.setSelected.call(this, enabled);\n        this.needsLayout();\n    },\n\n    setHighlighted: function (enabled) {\n        this._state = enabled ? cc.CONTROL_STATE_HIGHLIGHTED : cc.CONTROL_STATE_NORMAL;\n\n        cc.Control.prototype.setHighlighted.call(this, enabled);\n        var action = this.getActionByTag(cc.CONTROL_ZOOM_ACTION_TAG);\n        if (action)\n            this.stopAction(action);\n\n        //this.needsLayout();// needn't\n        if (this.zoomOnTouchDown) {\n            var scaleValue = (this.isHighlighted() && this.isEnabled() && !this.isSelected()) ? 1.1 : 1.0;\n            var zoomAction = cc.scaleTo(0.05, scaleValue);\n            zoomAction.setTag(cc.CONTROL_ZOOM_ACTION_TAG);\n            this.runAction(zoomAction);\n        }\n    },\n\n    onTouchBegan: function (touch, event) {\n        if (!this.isTouchInside(touch) || !this.isEnabled() || !this.isVisible() || !this.hasVisibleParents())\n            return false;\n\n        this._isPushed = true;\n        this.setHighlighted(true);\n        this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DOWN);\n        return true;\n    },\n\n    onTouchMoved: function (touch, event) {\n        if (!this._enabled || !this._isPushed || this._selected) {\n            if (this._highlighted)\n                this.setHighlighted(false);\n            return;\n        }\n\n        var isTouchMoveInside = this.isTouchInside(touch);\n        if (isTouchMoveInside && !this._highlighted) {\n            this.setHighlighted(true);\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_ENTER);\n        } else if (isTouchMoveInside && this._highlighted) {\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE);\n        } else if (!isTouchMoveInside && this._highlighted) {\n            this.setHighlighted(false);\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_EXIT);\n        } else if (!isTouchMoveInside && !this._highlighted) {\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE);\n        }\n    },\n    onTouchEnded: function (touch, event) {\n        this._isPushed = false;\n        this.setHighlighted(false);\n\n        if (this.isTouchInside(touch)) {\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_INSIDE);\n        } else {\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE);\n        }\n    },\n\n    onTouchCancelled: function (touch, event) {\n        this._isPushed = false;\n        this.setHighlighted(false);\n        this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_CANCEL);\n    },\n\n    /**\n     * Returns the title used for a state.\n     *\n     * @param {Number} state The state that uses the title. Possible values are described in \"CCControlState\".\n     * @return {string} The title for the specified state.\n     */\n    getTitleForState: function (state) {\n        var locTable = this._titleDispatchTable;\n        if (locTable) {\n            if (locTable[state])\n                return locTable[state];\n            return locTable[cc.CONTROL_STATE_NORMAL];\n        }\n        return \"\";\n    },\n\n    /**\n     * <p>\n     * Sets the title string to use for the specified state.                                                  <br/>\n     * If a property is not specified for a state, the default is to use the CCButtonStateNormal value.\n     * </p>\n     * @param {string} title The title string to use for the specified state.\n     * @param {Number} state The state that uses the specified title. The values are described in \"CCControlState\".\n     */\n    setTitleForState: function (title, state) {\n        this._titleDispatchTable[state] = title || \"\";\n\n        // If the current state if equal to the given state we update the layout\n        if (this.getState() === state)\n            this.needsLayout();\n    },\n\n    /**\n     * Returns the title color used for a state.\n     *\n     * @param {Number} state The state that uses the specified color. The values are described in \"CCControlState\".\n     * @return {cc.Color} The color of the title for the specified state.\n     */\n    getTitleColorForState: function (state) {\n        var colorObject = this._titleColorDispatchTable[state];\n        if (colorObject)\n            return colorObject;\n        colorObject = this._titleColorDispatchTable[cc.CONTROL_STATE_NORMAL];\n        if (colorObject)\n            return colorObject;\n        return cc.color.WHITE;\n    },\n\n    /**\n     * Sets the color of the title to use for the specified state.\n     *\n     * @param {cc.Color} color The color of the title to use for the specified state.\n     * @param {Number} state The state that uses the specified color. The values are described in \"CCControlState\".\n     */\n    setTitleColorForState: function (color, state) {\n        //ccColor3B* colorValue=&color;\n        this._titleColorDispatchTable[state] = color;\n\n        // If the current state if equal to the given state we update the layout\n        if (this.getState() === state)\n            this.needsLayout();\n    },\n\n    /**\n     * Returns the title label used for a state.\n     *\n     * @param state The state that uses the title label. Possible values are described in \"CCControlState\".\n     * @return {cc.Node} the title label used for a state.\n     */\n    getTitleLabelForState: function (state) {\n        var locTable = this._titleLabelDispatchTable;\n        if (locTable[state])\n            return locTable[state];\n\n        return locTable[cc.CONTROL_STATE_NORMAL];\n    },\n\n    /**\n     * <p>Sets the title label to use for the specified state.                                          <br/>\n     * If a property is not specified for a state, the default is to use the CCButtonStateNormal value. </p>\n     *\n     * @param {cc.Node} titleLabel The title label to use for the specified state.\n     * @param {Number} state The state that uses the specified title. The values are described in \"CCControlState\".\n     */\n    setTitleLabelForState: function (titleLabel, state) {\n        var locTable = this._titleLabelDispatchTable;\n        if (locTable[state]) {\n            var previousLabel = locTable[state];\n            if (previousLabel)\n                this.removeChild(previousLabel, true);\n        }\n\n        locTable[state] = titleLabel;\n        titleLabel.setVisible(false);\n        titleLabel.setAnchorPoint(0.5, 0.5);\n        this.addChild(titleLabel, 1);\n\n        // If the current state if equal to the given state we update the layout\n        if (this.getState() === state)\n            this.needsLayout();\n    },\n\n    /**\n     * Sets the title TTF filename to use for the specified state.\n     * @param {string} fntFile\n     * @param {Number} state\n     */\n    setTitleTTFForState: function (fntFile, state) {\n        var title = this.getTitleForState(state);\n        if (!title)\n            title = \"\";\n        this.setTitleLabelForState(new cc.LabelTTF(title, fntFile, 12), state);\n    },\n\n    /**\n     * return the title TTF filename to use for the specified state.\n     * @param {Number} state\n     * @returns {string}\n     */\n    getTitleTTFForState: function (state) {\n        var labelTTF = this.getTitleLabelForState(state);\n        if ((labelTTF != null) && (labelTTF instanceof  cc.LabelTTF)) {\n            return labelTTF.getFontName();\n        } else {\n            return \"\";\n        }\n    },\n\n    /**\n     * @param {Number} size\n     * @param {Number} state\n     */\n    setTitleTTFSizeForState: function (size, state) {\n        var labelTTF = this.getTitleLabelForState(state);\n        if ((labelTTF != null) && (labelTTF instanceof  cc.LabelTTF)) {\n            labelTTF.setFontSize(size);\n        }\n    },\n\n    /**\n     * return the font size of LabelTTF to use for the specified state\n     * @param {Number} state\n     * @returns {Number}\n     */\n    getTitleTTFSizeForState: function (state) {\n        var labelTTF = this.getTitleLabelForState(state);\n        if ((labelTTF != null) && (labelTTF instanceof  cc.LabelTTF)) {\n            return labelTTF.getFontSize();\n        }\n        return 0;\n    },\n\n    /**\n     * Sets the font of the label, changes the label to a CCLabelBMFont if necessary.\n     * @param {string} fntFile The name of the font to change to\n     * @param {Number} state The state that uses the specified fntFile. The values are described in \"CCControlState\".\n     */\n    setTitleBMFontForState: function (fntFile, state) {\n        var title = this.getTitleForState(state);\n        if (!title)\n            title = \"\";\n        this.setTitleLabelForState(new cc.LabelBMFont(title, fntFile), state);\n    },\n\n    getTitleBMFontForState: function (state) {\n        var labelBMFont = this.getTitleLabelForState(state);\n        if ((labelBMFont != null) && (labelBMFont instanceof  cc.LabelBMFont)) {\n            return labelBMFont.getFntFile();\n        }\n        return \"\";\n    },\n\n    /**\n     * Returns the background sprite used for a state.\n     *\n     * @param {Number} state The state that uses the background sprite. Possible values are described in \"CCControlState\".\n     */\n    getBackgroundSpriteForState: function (state) {\n        var locTable = this._backgroundSpriteDispatchTable;\n        if (locTable[state]) {\n            return locTable[state];\n        }\n        return locTable[cc.CONTROL_STATE_NORMAL];\n    },\n\n    /**\n     * Sets the background sprite to use for the specified button state.\n     *\n     * @param {Scale9Sprite} sprite The background sprite to use for the specified state.\n     * @param {Number} state The state that uses the specified image. The values are described in \"CCControlState\".\n     */\n    setBackgroundSpriteForState: function (sprite, state) {\n        var locTable = this._backgroundSpriteDispatchTable;\n        if (locTable[state]) {\n            var previousSprite = locTable[state];\n            if (previousSprite)\n                this.removeChild(previousSprite, true);\n        }\n\n        locTable[state] = sprite;\n        sprite.setVisible(false);\n        sprite.setAnchorPoint(0.5, 0.5);\n        this.addChild(sprite);\n\n        var locPreferredSize = this._preferredSize;\n        if (locPreferredSize.width !== 0 || locPreferredSize.height !== 0) {\n            sprite.setPreferredSize(locPreferredSize);\n        }\n\n        // If the current state if equal to the given state we update the layout\n        if (this._state === state)\n            this.needsLayout();\n    },\n\n    /**\n     * Sets the background spriteFrame to use for the specified button state.\n     *\n     * @param {SpriteFrame} spriteFrame The background spriteFrame to use for the specified state.\n     * @param {Number} state The state that uses the specified image. The values are described in \"CCControlState\".\n     */\n    setBackgroundSpriteFrameForState: function (spriteFrame, state) {\n        var sprite = cc.Scale9Sprite.createWithSpriteFrame(spriteFrame);\n        this.setBackgroundSpriteForState(sprite, state);\n    }\n});\n\nvar _p = cc.ControlButton.prototype;\n\n// Extended properties\n/** @expose */\n_p.adjustBackground;\ncc.defineGetterSetter(_p, \"adjustBackground\", _p.getAdjustBackgroundImage, _p.setAdjustBackgroundImage);\n/** @expose */\n_p.preferredSize;\ncc.defineGetterSetter(_p, \"preferredSize\", _p.getPreferredSize, _p.setPreferredSize);\n/** @expose */\n_p.labelAnchor;\ncc.defineGetterSetter(_p, \"labelAnchor\", _p.getLabelAnchorPoint, _p.setLabelAnchorPoint);\n\n_p = null;\n\n/**\n * @deprecated\n * @param label\n * @param backgroundSprite\n * @param fontSize\n * @returns {ControlButton}\n */\ncc.ControlButton.create = function (label, backgroundSprite, fontSize) {\n    return new cc.ControlButton(label, backgroundSprite, fontSize);\n};\n\n\n"]}