{"version":3,"sources":["../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/audio/assets/frameworks/cocos2d-html5/cocos2d/audio/CCAudio.js"],"names":["DEBUG","sys","cc","version","browserVersion","supportWebAudio","window","AudioContext","webkitAudioContext","mozAudioContext","support","ONLY_ONE","WEB_AUDIO","DELAY_CREATE_CTX","ONE_SOURCE","browserType","BROWSER_TYPE_FIREFOX","USE_LOADER_EVENT","os","OS_IOS","OS_ANDROID","BROWSER_TYPE_UC","__audioSupport","setTimeout","log","MULTI_CHANNEL","AUTOPLAY","Audio","Class","extend","interruptPlay","src","_element","_AUDIO_TYPE","ctor","url","setBuffer","buffer","WebAudio","setElement","element","addEventListener","loop","paused","play","offset","stop","touchPlayList","push","audio","bindTouch","game","canvas","touchStart","getPlaying","pause","currentTime","err","resume","setVolume","volume","getVolume","cloneNode","elem","document","createElement","sources","getElementsByTagName","i","length","appendChild","list","item","pop","context","_context","value","_volume","_loop","_startTime","_currentSource","playedLength","_currextTimer","prototype","constructor","duration","bool","num","start","self","clearTimeout","polyfill","SWA","SWB","canPlayType","ogg","mp3","wav","mp4","m4a","error","loader","cache","useWebAudio","loadBuffer","cb","request","getXMLHttpRequest","open","responseType","onload","_timeoutId","response","onerror","ontimeout","undefined","timeout","send","load","realUrl","res","getRes","audioPath","path","join","extname","typeList","loadAudioFromExtList","ERRSTR","replace","forEach","ext","status","errorMessage","dom","source","changeExtname","timer","readyState","failure","success","removeEventListener","register","audioEngine","_currMusic","_musicVolume","features","willPlayMusic","playMusic","bgMusic","musicVolume","stopMusic","releaseData","splice","release","pauseMusic","resumeMusic","rewindMusic","getMusicVolume","setMusicVolume","isNaN","isMusicPlaying","_audioPool","_maxAudioInstance","_effectVolume","playEffect","effectList","first","shift","setEffectsVolume","audioPool","p","audioList","Array","isArray","getEffectsVolume","pauseEffect","pauseAllEffects","ap","resumeEffect","resumeAllEffects","stopEffect","stopAllEffects","unloadEffect","pool","end","_pauseCache","_pausePlaying","_resumePlaying"],"mappings":"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","file":"CCAudio.js","sourceRoot":"../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/audio","sourcesContent":["/****************************************************************************\n Copyright (c) 2008-2010 Ricardo Quesada\n Copyright (c) 2011-2012 cocos2d-x.org\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n\n http://www.cocos2d-x.org\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n\n/**\n * Audio support in the browser\n *\n * MULTI_CHANNEL        : Multiple audio while playing - If it doesn't, you can only play background music\n * WEB_AUDIO            : Support for WebAudio - Support W3C WebAudio standards, all of the audio can be played\n * AUTOPLAY             : Supports auto-play audio - if Don‘t support it, On a touch detecting background music canvas, and then replay\n * REPLAY_AFTER_TOUCH   : The first music will fail, must be replay after touchstart\n * USE_EMPTIED_EVENT    : Whether to use the emptied event to replace load callback\n * DELAY_CREATE_CTX     : delay created the context object - only webAudio\n * NEED_MANUAL_LOOP     : loop attribute failure, need to perform loop manually\n *\n * May be modifications for a few browser version\n */\n(function () {\n\n    var DEBUG = false;\n\n    var sys = cc.sys;\n    var version = sys.browserVersion;\n\n    // check if browser supports Web Audio\n    // check Web Audio's context\n    var supportWebAudio = !!(window.AudioContext || window.webkitAudioContext || window.mozAudioContext);\n\n    var support = {ONLY_ONE: false, WEB_AUDIO: supportWebAudio, DELAY_CREATE_CTX: false, ONE_SOURCE: false};\n\n    if (sys.browserType === sys.BROWSER_TYPE_FIREFOX) {\n        support.DELAY_CREATE_CTX = true;\n        support.USE_LOADER_EVENT = 'canplay';\n    }\n\n    if (sys.os === sys.OS_IOS) {\n        support.USE_LOADER_EVENT = 'loadedmetadata';\n    }\n\n    if (sys.os === sys.OS_ANDROID) {\n        if (sys.browserType === sys.BROWSER_TYPE_UC) {\n            support.ONE_SOURCE = true;\n        }\n    }\n\n    window.__audioSupport = support;\n\n    if (DEBUG) {\n        setTimeout(function () {\n            cc.log(\"browse type: \" + sys.browserType);\n            cc.log(\"browse version: \" + version);\n            cc.log(\"MULTI_CHANNEL: \" + window.__audioSupport.MULTI_CHANNEL);\n            cc.log(\"WEB_AUDIO: \" + window.__audioSupport.WEB_AUDIO);\n            cc.log(\"AUTOPLAY: \" + window.__audioSupport.AUTOPLAY);\n        }, 0);\n    }\n\n})();\n\n/**\n * Encapsulate DOM and webAudio\n */\ncc.Audio = cc.Class.extend({\n    interruptPlay: false,\n    src: null,\n    _element: null,\n    _AUDIO_TYPE: \"AUDIO\",\n\n    ctor: function (url) {\n        this.src = url;\n    },\n\n    setBuffer: function (buffer) {\n        this._AUDIO_TYPE = \"WEBAUDIO\";\n        this._element = new cc.Audio.WebAudio(buffer);\n    },\n\n    setElement: function (element) {\n        this._AUDIO_TYPE = \"AUDIO\";\n        this._element = element;\n\n        // Prevent partial browser from playing after the end does not reset the paused tag\n        // Will cause the player to judge the status of the error\n        element.addEventListener('ended', function () {\n            if (!element.loop) {\n                element.paused = true;\n            }\n        });\n    },\n\n    play: function (offset, loop) {\n        if (!this._element) {\n            this.interruptPlay = false;\n            return;\n        }\n        this._element.loop = loop;\n        this._element.play();\n        if (this._AUDIO_TYPE === 'AUDIO' && this._element.paused) {\n            this.stop();\n            cc.Audio.touchPlayList.push({ loop: loop, offset: offset, audio: this._element });\n        }\n\n        if (cc.Audio.bindTouch === false) {\n            cc.Audio.bindTouch = true;\n            // Listen to the touchstart body event and play the audio when necessary.\n            cc.game.canvas.addEventListener('touchstart', cc.Audio.touchStart);\n        }\n    },\n\n    getPlaying: function () {\n        if (!this._element) return true;\n        return !this._element.paused;\n    },\n\n    stop: function () {\n        if (!this._element) {\n            this.interruptPlay = true;\n            return;\n        }\n        this._element.pause();\n        try {\n            this._element.currentTime = 0;\n        } catch (err) {\n        }\n    },\n\n    pause: function () {\n        if (!this._element) {\n            this.interruptPlay = true;\n            return;\n        }\n        this._element.pause();\n    },\n\n    resume: function () {\n        if (!this._element) {\n            this.interruptPlay = false;\n            return;\n        }\n        this._element.play();\n    },\n\n    setVolume: function (volume) {\n        if (!this._element) return;\n        this._element.volume = volume;\n    },\n\n    getVolume: function () {\n        if (!this._element) return;\n        return this._element.volume;\n    },\n\n    cloneNode: function () {\n        var audio = new cc.Audio(this.src);\n        if (this._AUDIO_TYPE === \"AUDIO\") {\n            var elem = document.createElement(\"audio\");\n            var sources = elem.getElementsByTagName('source');\n            for (var i = 0; i < sources.length; i++) {\n                elem.appendChild(sources[i]);\n            }\n            elem.src = this.src;\n            audio.setElement(elem);\n        } else {\n            audio.setBuffer(this._element.buffer);\n        }\n        return audio;\n    }\n});\n\ncc.Audio.touchPlayList = [\n    //{ offset: 0, audio: audio }\n];\n\ncc.Audio.bindTouch = false;\ncc.Audio.touchStart = function () {\n    var list = cc.Audio.touchPlayList;\n    var item = null;\n    while (item = list.pop()) {\n        item.audio.loop = !!item.loop;\n        item.audio.play(item.offset);\n    }\n};\n\ncc.Audio.WebAudio = function (buffer) {\n    this.buffer = buffer;\n    this.context = cc.Audio._context;\n\n    var volume = this.context['createGain']();\n    volume['gain'].value = 1;\n    volume['connect'](this.context['destination']);\n    this._volume = volume;\n\n    this._loop = false;\n\n    // The time stamp on the audio time axis when the recording begins to play.\n    this._startTime = -1;\n    // Record the currently playing Source\n    this._currentSource = null;\n    // Record the time has been played\n    this.playedLength = 0;\n\n    this._currextTimer = null;\n};\n\ncc.Audio.WebAudio.prototype = {\n    constructor: cc.Audio.WebAudio,\n\n    get paused() {\n        // If the current audio is a loop, then paused is false\n        if (this._currentSource && this._currentSource.loop)\n            return false;\n\n        // StartTime does not have value, as the default -1, it does not begin to play\n        if (this._startTime === -1)\n            return true;\n\n        // currentTime - startTime > durationTime\n        return this.context.currentTime - this._startTime > this.buffer.duration;\n    },\n    set paused(bool) {\n    },\n\n    get loop() {\n        return this._loop;\n    },\n    set loop(bool) {\n        return this._loop = bool;\n    },\n\n    get volume() {\n        return this._volume['gain'].value;\n    },\n    set volume(num) {\n        return this._volume['gain'].value = num;\n    },\n\n    get currentTime() {\n        return this.playedLength;\n    },\n    set currentTime(num) {\n        return this.playedLength = num;\n    },\n\n    play: function (offset) {\n\n        // If repeat play, you need to stop before an audio\n        if (this._currentSource && !this.paused) {\n            this._currentSource.stop(0);\n            this.playedLength = 0;\n        }\n\n        var audio = this.context[\"createBufferSource\"]();\n        audio.buffer = this.buffer;\n        audio[\"connect\"](this._volume);\n        audio.loop = this._loop;\n\n        this._startTime = this.context.currentTime;\n        offset = offset || this.playedLength;\n\n        var duration = this.buffer.duration;\n        if (!this._loop) {\n            if (audio.start)\n                audio.start(0, offset, duration - offset);\n            else if (audio[\"notoGrainOn\"])\n                audio[\"noteGrainOn\"](0, offset, duration - offset);\n            else\n                audio[\"noteOn\"](0, offset, duration - offset);\n        } else {\n            if (audio.start)\n                audio.start(0);\n            else if (audio[\"notoGrainOn\"])\n                audio[\"noteGrainOn\"](0);\n            else\n                audio[\"noteOn\"](0);\n        }\n\n        this._currentSource = audio;\n\n        // If the current audio context time stamp is 0\n        // There may be a need to touch events before you can actually start playing audio\n        // So here to add a timer to determine whether the real start playing audio, if not, then the incoming touchPlay queue\n        if (this.context.currentTime === 0) {\n            var self = this;\n            clearTimeout(this._currextTimer);\n            this._currextTimer = setTimeout(function () {\n                if (self.context.currentTime === 0) {\n                    cc.Audio.touchPlayList.push({\n                        offset: offset,\n                        audio: self\n                    });\n                }\n            }, 10);\n        }\n    },\n    pause: function () {\n        // Record the time the current has been played\n        this.playedLength = this.context.currentTime - this._startTime;\n        //If the duration of playedLendth exceeds the audio, you should take the remainder\n        this.playedLength %= this.buffer.duration;\n        var audio = this._currentSource;\n        this._currentSource = null;\n        this._startTime = -1;\n        if (audio)\n            audio.stop(0);\n    }\n};\n\n(function (polyfill) {\n\n    var SWA = polyfill.WEB_AUDIO, SWB = polyfill.ONLY_ONE;\n\n    var support = [];\n\n    (function () {\n        var audio = document.createElement(\"audio\");\n        if (audio.canPlayType) {\n            var ogg = audio.canPlayType('audio/ogg; codecs=\"vorbis\"');\n            if (ogg && ogg !== \"\") support.push(\".ogg\");\n            var mp3 = audio.canPlayType(\"audio/mpeg\");\n            if (mp3 && mp3 !== \"\") support.push(\".mp3\");\n            var wav = audio.canPlayType('audio/wav; codecs=\"1\"');\n            if (wav && wav !== \"\") support.push(\".wav\");\n            var mp4 = audio.canPlayType(\"audio/mp4\");\n            if (mp4 && mp4 !== \"\") support.push(\".mp4\");\n            var m4a = audio.canPlayType(\"audio/x-m4a\");\n            if (m4a && m4a !== \"\") support.push(\".m4a\");\n        }\n    })();\n    try {\n        if (SWA) {\n            var context = new (window.AudioContext || window.webkitAudioContext || window.mozAudioContext)();\n            cc.Audio._context = context;\n            // check context integrity\n            if (\n                !context[\"createBufferSource\"] ||\n                !context[\"createGain\"] ||\n                !context[\"destination\"] ||\n                !context[\"decodeAudioData\"]\n            ) {\n                throw 'context is incomplete';\n            }\n            if (polyfill.DELAY_CREATE_CTX)\n                setTimeout(function () {\n                    context = new (window.AudioContext || window.webkitAudioContext || window.mozAudioContext)();\n                    cc.Audio._context = context;\n                }, 0);\n        }\n    } catch (error) {\n        SWA = false;\n        cc.log(\"browser don't support web audio\");\n    }\n\n    var loader = {\n\n        cache: {},\n\n        useWebAudio: true,\n\n        loadBuffer: function (url, cb) {\n            if (!SWA) return; // WebAudio Buffer\n\n            var request = cc.loader.getXMLHttpRequest();\n            request.open(\"GET\", url, true);\n            request.responseType = \"arraybuffer\";\n\n            // Our asynchronous callback\n            request.onload = function () {\n                if (request._timeoutId >= 0) {\n                    clearTimeout(request._timeoutId);\n                }\n                context[\"decodeAudioData\"](request.response, function (buffer) {\n                    //success\n                    cb(null, buffer);\n                    //audio.setBuffer(buffer);\n                }, function () {\n                    //error\n                    cb('decode error - ' + url);\n                });\n            };\n\n            request.onerror = function () {\n                cb('request error - ' + url);\n            };\n            if (request.ontimeout === undefined) {\n                request._timeoutId = setTimeout(function () {\n                    request.ontimeout();\n                }, request.timeout);\n            }\n            request.ontimeout = function () {\n                cb('request timeout - ' + url);\n            };\n\n            request.send();\n        },\n\n        load: function (realUrl, url, res, cb) {\n\n            if (support.length === 0)\n                return cb(\"can not support audio!\");\n\n            var audio = cc.loader.getRes(url);\n            if (audio)\n                return cb(null, audio);\n\n            if (cc.loader.audioPath)\n                realUrl = cc.path.join(cc.loader.audioPath, realUrl);\n\n            var extname = cc.path.extname(realUrl);\n\n            var typeList = [extname];\n            for (var i = 0; i < support.length; i++) {\n                if (extname !== support[i]) {\n                    typeList.push(support[i]);\n                }\n            }\n\n            audio = new cc.Audio(realUrl);\n            cc.loader.cache[url] = audio;\n            this.loadAudioFromExtList(realUrl, typeList, audio, cb);\n            return audio;\n        },\n\n        loadAudioFromExtList: function (realUrl, typeList, audio, cb) {\n            if (typeList.length === 0) {\n                var ERRSTR = \"can not found the resource of audio! Last match url is : \";\n                ERRSTR += realUrl.replace(/\\.(.*)?$/, \"(\");\n                support.forEach(function (ext) {\n                    ERRSTR += ext + \"|\";\n                });\n                ERRSTR = ERRSTR.replace(/\\|$/, \")\");\n                return cb({status: 520, errorMessage: ERRSTR}, null);\n            }\n\n            if (SWA && this.useWebAudio) {\n                this.loadBuffer(realUrl, function (error, buffer) {\n                    if (error)\n                        cc.log(error);\n\n                    if (buffer)\n                        audio.setBuffer(buffer);\n\n                    cb(null, audio);\n                });\n                return;\n            }\n\n            var num = polyfill.ONE_SOURCE ? 1 : typeList.length;\n\n            // 加载统一使用dom\n            var dom = document.createElement('audio');\n            for (var i = 0; i < num; i++) {\n                var source = document.createElement('source');\n                source.src = cc.path.changeExtname(realUrl, typeList[i]);\n                dom.appendChild(source);\n            }\n\n            audio.setElement(dom);\n\n            var timer = setTimeout(function () {\n                if (dom.readyState === 0) {\n                    failure();\n                } else {\n                    success();\n                }\n            }, 8000);\n\n            var success = function () {\n                dom.removeEventListener(\"canplaythrough\", success, false);\n                dom.removeEventListener(\"error\", failure, false);\n                dom.removeEventListener(\"emptied\", success, false);\n                if (polyfill.USE_LOADER_EVENT)\n                    dom.removeEventListener(polyfill.USE_LOADER_EVENT, success, false);\n                clearTimeout(timer);\n                cb(null, audio);\n            };\n            var failure = function () {\n                cc.log('load audio failure - ' + realUrl);\n                success();\n            };\n            dom.addEventListener(\"canplaythrough\", success, false);\n            dom.addEventListener(\"error\", failure, false);\n            if (polyfill.USE_LOADER_EVENT)\n                dom.addEventListener(polyfill.USE_LOADER_EVENT, success, false);\n        }\n    };\n    cc.loader.register([\"mp3\", \"ogg\", \"wav\", \"mp4\", \"m4a\"], loader);\n\n    /**\n     * cc.audioEngine is the singleton object, it provide simple audio APIs.\n     * @namespace\n     */\n    cc.audioEngine = {\n        _currMusic: null,\n        _musicVolume: 1,\n\n        features: polyfill,\n\n        /**\n         * Indicates whether any background music can be played or not.\n         * @returns {boolean} <i>true</i> if the background music is playing, otherwise <i>false</i>\n         */\n        willPlayMusic: function () {\n            return false;\n        },\n\n        /**\n         * Play music.\n         * @param {String} url The path of the music file without filename extension.\n         * @param {Boolean} loop Whether the music loop or not.\n         * @example\n         * //example\n         * cc.audioEngine.playMusic(path, false);\n         */\n        playMusic: function(url, loop){\n            var bgMusic = this._currMusic;\n            if (bgMusic && bgMusic.getPlaying()) {\n                bgMusic.stop();\n            }\n            var musicVolume = this._musicVolume;\n            var audio = cc.loader.getRes(url);\n            if (!audio) {\n                cc.loader.load(url, function () {\n                    if (!audio.getPlaying() && !audio.interruptPlay) {\n                        audio.setVolume(musicVolume);\n                        audio.play(0, loop || false);\n                    }\n                });\n                audio = cc.loader.getRes(url);\n            }\n            audio.setVolume(musicVolume);\n            audio.play(0, loop || false);\n\n            this._currMusic = audio;\n        },\n\n        /**\n         * Stop playing music.\n         * @param {Boolean} [releaseData] If release the music data or not.As default value is false.\n         * @example\n         * //example\n         * cc.audioEngine.stopMusic();\n         */\n        stopMusic: function(releaseData){\n            var audio = this._currMusic;\n            if (audio) {\n                var list = cc.Audio.touchPlayList;\n                for (var i=list.length-1; i>=0; --i) {\n                    if (this[i] && this[i].audio === audio._element)\n                        list.splice(i, 1);\n                }\n\n                audio.stop();\n                this._currMusic = null;\n                if (releaseData)\n                    cc.loader.release(audio.src);\n            }\n        },\n\n        /**\n         * Pause playing music.\n         * @example\n         * //example\n         * cc.audioEngine.pauseMusic();\n         */\n        pauseMusic: function () {\n            var audio = this._currMusic;\n            if (audio)\n                audio.pause();\n        },\n\n        /**\n         * Resume playing music.\n         * @example\n         * //example\n         * cc.audioEngine.resumeMusic();\n         */\n        resumeMusic: function () {\n            var audio = this._currMusic;\n            if (audio)\n                audio.resume();\n        },\n\n        /**\n         * Rewind playing music.\n         * @example\n         * //example\n         * cc.audioEngine.rewindMusic();\n         */\n        rewindMusic: function () {\n            var audio = this._currMusic;\n            if (audio) {\n                audio.stop();\n                audio.play();\n            }\n        },\n\n        /**\n         * The volume of the music max value is 1.0,the min value is 0.0 .\n         * @return {Number}\n         * @example\n         * //example\n         * var volume = cc.audioEngine.getMusicVolume();\n         */\n        getMusicVolume: function () {\n            return this._musicVolume;\n        },\n\n        /**\n         * Set the volume of music.\n         * @param {Number} volume Volume must be in 0.0~1.0 .\n         * @example\n         * //example\n         * cc.audioEngine.setMusicVolume(0.5);\n         */\n        setMusicVolume: function (volume) {\n            volume = volume - 0;\n            if (isNaN(volume)) volume = 1;\n            if (volume > 1) volume = 1;\n            if (volume < 0) volume = 0;\n\n            this._musicVolume = volume;\n            var audio = this._currMusic;\n            if (audio) {\n                audio.setVolume(volume);\n            }\n        },\n\n        /**\n         * Whether the music is playing.\n         * @return {Boolean} If is playing return true,or return false.\n         * @example\n         * //example\n         *  if (cc.audioEngine.isMusicPlaying()) {\n         *      cc.log(\"music is playing\");\n         *  }\n         *  else {\n         *      cc.log(\"music is not playing\");\n         *  }\n         */\n        isMusicPlaying: function () {\n            var audio = this._currMusic;\n            if (audio) {\n                return audio.getPlaying();\n            } else {\n                return false;\n            }\n        },\n\n        _audioPool: {},\n        _maxAudioInstance: 10,\n        _effectVolume: 1,\n        /**\n         * Play sound effect.\n         * @param {String} url The path of the sound effect with filename extension.\n         * @param {Boolean} loop Whether to loop the effect playing, default value is false\n         * @return {Number|null} the audio id\n         * @example\n         * //example\n         * var soundId = cc.audioEngine.playEffect(path);\n         */\n        playEffect: function (url, loop) {\n\n            if (SWB && this._currMusic && this._currMusic.getPlaying()) {\n                cc.log('Browser is only allowed to play one audio');\n                return null;\n            }\n\n            var effectList = this._audioPool[url];\n            if (!effectList) {\n                effectList = this._audioPool[url] = [];\n            }\n\n            for (var i = 0; i < effectList.length; i++) {\n                if (!effectList[i].getPlaying()) {\n                    break;\n                }\n            }\n\n            if (!SWA && i > this._maxAudioInstance) {\n                var first = effectList.shift();\n                first.stop();\n                effectList.push(first);\n                i = effectList.length - 1;\n                // cc.log(\"Error: %s greater than %d\", url, this._maxAudioInstance);\n            }\n\n            var audio;\n            if (effectList[i]) {\n                audio = effectList[i];\n                audio.setVolume(this._effectVolume);\n                audio.play(0, loop || false);\n                return audio;\n            }\n\n            audio = cc.loader.getRes(url);\n\n            if (audio && SWA && audio._AUDIO_TYPE === 'AUDIO') {\n                cc.loader.release(url);\n                audio = null;\n            }\n\n            if (audio) {\n\n                if (SWA && audio._AUDIO_TYPE === 'AUDIO') {\n                    loader.loadBuffer(url, function (error, buffer) {\n                        audio.setBuffer(buffer);\n                        audio.setVolume(cc.audioEngine._effectVolume);\n                        if (!audio.getPlaying())\n                            audio.play(0, loop || false);\n                    });\n                } else {\n                    audio = audio.cloneNode();\n                    audio.setVolume(this._effectVolume);\n                    audio.play(0, loop || false);\n                    effectList.push(audio);\n                    return audio;\n                }\n\n            }\n\n            var cache = loader.useWebAudio;\n            loader.useWebAudio = true;\n            cc.loader.load(url, function (audio) {\n                audio = cc.loader.getRes(url);\n                audio = audio.cloneNode();\n                audio.setVolume(cc.audioEngine._effectVolume);\n                audio.play(0, loop || false);\n                effectList.push(audio);\n            });\n            loader.useWebAudio = cache;\n\n            return audio;\n        },\n\n        /**\n         * Set the volume of sound effects.\n         * @param {Number} volume Volume must be in 0.0~1.0 .\n         * @example\n         * //example\n         * cc.audioEngine.setEffectsVolume(0.5);\n         */\n        setEffectsVolume: function (volume) {\n            volume = volume - 0;\n            if (isNaN(volume)) volume = 1;\n            if (volume > 1) volume = 1;\n            if (volume < 0) volume = 0;\n\n            this._effectVolume = volume;\n            var audioPool = this._audioPool;\n            for (var p in audioPool) {\n                var audioList = audioPool[p];\n                if (Array.isArray(audioList))\n                    for (var i = 0; i < audioList.length; i++) {\n                        audioList[i].setVolume(volume);\n                    }\n            }\n        },\n\n        /**\n         * The volume of the effects max value is 1.0,the min value is 0.0 .\n         * @return {Number}\n         * @example\n         * //example\n         * var effectVolume = cc.audioEngine.getEffectsVolume();\n         */\n        getEffectsVolume: function () {\n            return this._effectVolume;\n        },\n\n        /**\n         * Pause playing sound effect.\n         * @param {Number} audio The return value of function playEffect.\n         * @example\n         * //example\n         * cc.audioEngine.pauseEffect(audioID);\n         */\n        pauseEffect: function (audio) {\n            if (audio) {\n                audio.pause();\n            }\n        },\n\n        /**\n         * Pause all playing sound effect.\n         * @example\n         * //example\n         * cc.audioEngine.pauseAllEffects();\n         */\n        pauseAllEffects: function () {\n            var ap = this._audioPool;\n            for (var p in ap) {\n                var list = ap[p];\n                for (var i = 0; i < ap[p].length; i++) {\n                    if (list[i].getPlaying()) {\n                        list[i].pause();\n                    }\n                }\n            }\n        },\n\n        /**\n         * Resume playing sound effect.\n         * @param {Number} audio The return value of function playEffect.\n         * @audioID\n         * //example\n         * cc.audioEngine.resumeEffect(audioID);\n         */\n        resumeEffect: function (audio) {\n            if (audio)\n                audio.resume();\n        },\n\n        /**\n         * Resume all playing sound effect\n         * @example\n         * //example\n         * cc.audioEngine.resumeAllEffects();\n         */\n        resumeAllEffects: function () {\n            var ap = this._audioPool;\n            for (var p in ap) {\n                var list = ap[p];\n                for (var i = 0; i < ap[p].length; i++) {\n                    list[i].resume();\n                }\n            }\n        },\n\n        /**\n         * Stop playing sound effect.\n         * @param {Number} audio The return value of function playEffect.\n         * @example\n         * //example\n         * cc.audioEngine.stopEffect(audioID);\n         */\n        stopEffect: function (audio) {\n            if (audio) {\n                audio.stop();\n            }\n        },\n\n        /**\n         * Stop all playing sound effects.\n         * @example\n         * //example\n         * cc.audioEngine.stopAllEffects();\n         */\n        stopAllEffects: function () {\n            var ap = this._audioPool;\n            for (var p in ap) {\n                var list = ap[p];\n                for (var i = 0; i < list.length; i++) {\n                    list[i].stop();\n                }\n                list.length = 0;\n            }\n            ap.length = 0;\n        },\n\n        /**\n         * Unload the preloaded effect from internal buffer\n         * @param {String} url\n         * @example\n         * //example\n         * cc.audioEngine.unloadEffect(EFFECT_FILE);\n         */\n        unloadEffect: function (url) {\n            if (!url) {\n                return;\n            }\n\n            cc.loader.release(url);\n            var pool = this._audioPool[url];\n            if (pool) {\n                for (var i = 0; i < pool.length; i++) {\n                    pool[i].stop();\n                }\n                pool.length = 0;\n            }\n            delete this._audioPool[url];\n        },\n\n        /**\n         * End music and effects.\n         */\n        end: function () {\n            this.stopMusic();\n            this.stopAllEffects();\n        },\n\n        _pauseCache: [],\n        _pausePlaying: function () {\n            var bgMusic = this._currMusic;\n            if (bgMusic && bgMusic.getPlaying()) {\n                bgMusic.pause();\n                this._pauseCache.push(bgMusic);\n            }\n            var ap = this._audioPool;\n            for (var p in ap) {\n                var list = ap[p];\n                for (var i = 0; i < ap[p].length; i++) {\n                    if (list[i].getPlaying()) {\n                        list[i].pause();\n                        this._pauseCache.push(list[i]);\n                    }\n                }\n            }\n        },\n\n        _resumePlaying: function () {\n            var list = this._pauseCache;\n            for (var i = 0; i < list.length; i++) {\n                list[i].resume();\n            }\n            list.length = 0;\n        }\n    };\n\n})(window.__audioSupport);\n"]}