{
  "__type__": "cc.TextAsset",
  "_name": "README",
  "_objFlags": 0,
  "_native": "",
  "text": "# CMake Guide\n\nCMake is an open-source, cross-platform family of tools designed to build, test and package software. CMake is used to control the software compilation process using simple platform and compiler independent configuration files, and generates native makefiles and workspaces that can be used in the compiler environment of your choice.\n\n## Requirement\n\n1. Open your terminal and execute:\n  ```sh\n  cmake --version\n  ```\nif the CMake version is lower than 3.1, please upgrade.\n\n2. You should use __out-of-source__ builds, this means you need to create a different directory than __cocos2d-x__ to execute the `cmake` command.\n\n## Step by Step\n\n### Linux\n\n```sh\ncd cocos2d-x\nmkdir linux-build && cd linux-build\ncmake ..\nmake\n``` \n\nExecute `make help` to see all build targets, `make <target>` build specified target\n\n### Generate Visual Studio projects\n\n```sh\ncd cocos2d-x\nmkdir win32-build && cd win32-build\ncmake .. -G\"Visual Studio 15 2017\" -Tv141\n```\n\nExecute `cmake --build .` to compile, or open __Cocos2d-x.sln__ in Explorer to use the generated project. \n\n### Generate macOS Project\n\n```sh\ncd cocos2d-x\nmkdir mac-build && cd mac-build\ncmake .. -GXcode\nopen Cocos2d-x.xcodeproj\n```\n\n### Generate iOS Project\n\n```sh\ncd cocos2d-x\nmkdir ios-build && cd ios-build\ncmake .. -GXcode -DCMAKE_TOOLCHAIN_FILE=../cmake/ios.toolchain.cmake\nopen Cocos2d-x.xcodeproj\n```\n\nThe default build is for running on actual iOS hardware, if you want to run in the simulator, please add `-DIOS_PLATFORM=SIMULATOR` for architecture i386 or `-DIOS_PLATFORM=SIMULATOR64` for x86_64.\n\n### Android Studio\n\nWe use the Gradle for Android applications, and Gradle use cmake to build the native code, see  [gradle.properties](https://github.com/cocos2d/cocos2d-x/blob/84be684e3858393a6f3efc50e3f95d4e0ac92a20/tests/cpp-empty-test/proj.android/gradle.properties#L38): `PROP_NDK_MODE`, it controls how native builds work.\n\n```sh\n# android native code build type\n# none, native code will never be compiled.\n# cmake, native code will be compiled by CMakeLists.txt\n# ndk-build, native code will be compiled by Android.mk\nPROP_BUILD_TYPE=ndk-build\n```\n\nIf you want to add cmake build arguments, please add it at [external Native Build](https://github.com/cocos2d/cocos2d-x/blob/84be684e3858393a6f3efc50e3f95d4e0ac92a20/tests/cpp-empty-test/proj.android/app/build.gradle#L25) block of __app/build.gradle__ file.\n\n## Prebuilt libraries feature\n\nTo solve long compilation times of the engine source code one can use prebuilt libraries. Using this feature you only need build engine sources once for a specific environment or again when the engine version changes and you wish to utilize the new version.\n\n### Example\n\nThis is an example of building c++ libs once, and use them in different c++ projects.\n\n```sh\ncocos new -l cpp -p my.pack.app1 test_app1\nmkdir app1_build && cd app1_build\ncmake ../test_app1 -DGEN_COCOS_PREBUILT=ON\nmake prebuilt\n```\n\nChange option `GEN_COCOS_PREBUILT` and use instead `USE_COCOS_PREBUILT` to use prebuilt in the same project\n\n```sh\ncmake ../test_app1 -DGEN_COCOS_PREBUILT=OFF -DUSE_COCOS_PREBUILT=ON\nmake TemplateCpp\nopen bin/TemplateCpp.app\n```\n\nAdd `-DUSE_COCOS_PREBUILT=ON` to use prebuilt libs in another cmake build.\n\n```sh\ncocos new -l cpp -p my.pack.app2 test_app2\nmkdir app2_build && cd app2_build\ncmake ../test_app2 -DUSE_COCOS_PREBUILT=ON\nmake TemplateCpp\nopen bin/TemplateCpp.app\n```\n\n> Any other cpp project can use prebuilt in this way\n\nWhen using the prebuilt libraries on Android there is a small difference as CMake can't find system environment when built using Gradle. You need to [supply a path](https://github.com/cocos2d/cocos2d-x/blob/c087be314c2c56a757bf66163b173746b5d6ad34/tests/cpp-empty-test/proj.android/app/build.gradle#L34) as the location of prebuilt libs.\n\n## Build Options\n\n### CMake Common Build Options\n\n1. __`-G`__, generate native build project you specified, for example\n\n    * `-GXcode` generate Xcode project files.\n    * `-GVisual Studio 15 2017` generate Visual Studio 2017 project, the default toolset is v141, add `-T` option to specify toolset, like this `-Tv140`\n\n1. __`CMAKE_BUILD_TYPE`__, specify the build mode, Debug or Release\n\n    * `-DCMAKE_BUILD_TYPE=Release` to generate the Release mode project, the default build mode is Debug\n\n1. __`-H -B`__, `-H` specify the CMake project Home directory, `-B` specify CMake-generated project binary directory. for example\n\n    * `-H..\\cocos2d-x -Bmsvc_build` the generated native project's location will be `msvc_build` directory.\n\n1. __`--build  <dir>`__, build a CMake-generated project binary tree, for example\n\n    * `cmake --build ./msvc_build`, cmake will sellect corresponding build tools.\n\n### Cocos2d-x Options\n\n1. __`GEN_COCOS_PREBUILT`__, control the project have the feature to generate pre-build libraries or not. Default value is `OFF`\n\n    * `-DGEN_COCOS_PREBUILT=ON`, will add target prebuilt, build this target will generate prebuilt libraries\n\n1. __`USE_COCOS_PREBUILT`__, control the project have the feature to use pre-build libraries or not. Default value is `OFF`\n\n    * `-DUSE_COCOS_PREBUILT=ON`, will disable libraries target, and make app target use prebuilt libraries\n\n1. __`COCOS_PREBUILT_ROOT`__, a path means the prebuilt libraries root location, it's not optional for Android Project on Android Studio, optional for other supported platforms. the default value is $cocos2dx_root/prebuilt if the cmake can access to cocos2d-x environment variable. for example\n\n    * `arguments \"-DCOCOS_PREBUILT_ROOT=/Users/laptop/cocos-prebuilt\"` set this value on [cmake block](https://github.com/cocos2d/cocos2d-x/blob/84be684e3858393a6f3efc50e3f95d4e0ac92a20/tests/cpp-empty-test/proj.android/app/build.gradle#L31) of build.gradle file.\n\n1. Any options in [SelectModule.cmake](./Modules/SelectModule.cmake) can be set manually. Do it if you know what you're doing.\n\n## Useful Links\n\n* CMake Official website: [cmake.org](https://cmake.org/)\n\n* CMake Documentation: [cmake.org/documentation](https://cmake.org/documentation/)\n\n* CMake FAQ: [Wiki/CMake_FAQ](https://cmake.org/Wiki/CMake_FAQ)"
}