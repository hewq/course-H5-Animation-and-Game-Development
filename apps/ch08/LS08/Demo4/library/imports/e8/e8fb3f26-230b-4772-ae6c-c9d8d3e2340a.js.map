{"version":3,"sources":["../../../../../../../assets/frameworks/cocos2d-html5/extensions/ccb-reader/assets/frameworks/cocos2d-html5/extensions/ccb-reader/CCNodeLoader.js"],"names":["PROPERTY_POSITION","PROPERTY_CONTENTSIZE","PROPERTY_SKEW","PROPERTY_ANCHORPOINT","PROPERTY_SCALE","PROPERTY_ROTATION","PROPERTY_TAG","PROPERTY_IGNOREANCHORPOINTFORPOSITION","PROPERTY_VISIBLE","ASSERT_FAIL_UNEXPECTED_PROPERTY","propertyName","cc","log","ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE","BlockData","selMenuHander","target","BlockCCControlData","selCCControlHandler","controlEvents","NodeLoader","Class","extend","_customProperties","_pt","_size","_arr2","ctor","_Dictionary","p","size","Array","_blockControlData","loadCCNode","parent","ccbReader","_createCCNode","parseProperties","node","numRegularProps","readInt","numExturaProps","propertyCount","i","isExtraProp","type","readCachedString","setProp","platform","_data","_currentByte","CCB_PLATFORM_ALL","CCB_PLATFORM_IOS","CCB_PLATFORM_MAC","ccbFileNode","getExtraPropsNames","userObject","indexOf","_animationManager","getRootNode","extraPropsNames","push","CCB_PROPTYPE_POSITION","position","parsePropTypePosition","onHandlePropTypePosition","CCB_PROPTYPE_POINT","point","parsePropTypePoint","onHandlePropTypePoint","CCB_PROPTYPE_POINTLOCK","pointLock","parsePropTypePointLock","onHandlePropTypePointLock","CCB_PROPTYPE_SIZE","parsePropTypeSize","onHandlePropTypeSize","CCB_PROPTYPE_SCALELOCK","scaleLock","parsePropTypeScaleLock","onHandlePropTypeScaleLock","CCB_PROPTYPE_FLOATXY","xy","parsePropTypeFloatXY","onHandlePropTypeFloatXY","CCB_PROPTYPE_FLOAT","f","parsePropTypeFloat","onHandlePropTypeFloat","CCB_PROPTYPE_DEGREES","degrees","parsePropTypeDegrees","onHandlePropTypeDegrees","CCB_PROPTYPE_FLOATSCALE","floatScale","parsePropTypeFloatScale","onHandlePropTypeFloatScale","CCB_PROPTYPE_INTEGER","integer","parsePropTypeInteger","onHandlePropTypeInteger","CCB_PROPTYPE_INTEGERLABELED","integerLabeled","parsePropTypeIntegerLabeled","onHandlePropTypeIntegerLabeled","CCB_PROPTYPE_FLOATVAR","floatVar","parsePropTypeFloatVar","onHandlePropTypeFloatVar","CCB_PROPTYPE_CHECK","check","parsePropTypeCheck","onHandlePropTypeCheck","CCB_PROPTYPE_SPRITEFRAME","ccSpriteFrame","parsePropTypeSpriteFrame","onHandlePropTypeSpriteFrame","CCB_PROPTYPE_ANIMATION","ccAnimation","parsePropTypeAnimation","onHandlePropTypeAnimation","CCB_PROPTYPE_TEXTURE","ccTexture2D","parsePropTypeTexture","onHandlePropTypeTexture","CCB_PROPTYPE_BYTE","byteValue","parsePropTypeByte","onHandlePropTypeByte","CCB_PROPTYPE_COLOR3","color","parsePropTypeColor3","onHandlePropTypeColor3","CCB_PROPTYPE_COLOR4VAR","color4FVar","parsePropTypeColor4FVar","onHandlePropTypeColor4FVar","CCB_PROPTYPE_FLIP","flip","parsePropTypeFlip","onHandlePropTypeFlip","CCB_PROPTYPE_BLENDMODE","blendFunc","parsePropTypeBlendFunc","onHandlePropTypeBlendFunc","CCB_PROPTYPE_FNTFILE","fntFile","getCCBRootPath","parsePropTypeFntFile","onHandlePropTypeFntFile","CCB_PROPTYPE_FONTTTF","fontTTF","parsePropTypeFontTTF","onHandlePropTypeFontTTF","CCB_PROPTYPE_STRING","stringValue","parsePropTypeString","onHandlePropTypeString","CCB_PROPTYPE_TEXT","textValue","parsePropTypeText","onHandlePropTypeText","CCB_PROPTYPE_BLOCK","blockData","parsePropTypeBlock","onHandlePropTypeBlock","CCB_PROPTYPE_BLOCKCCCONTROL","blockCCControlData","parsePropTypeBlockCCControl","onHandlePropTypeBlockCCControl","CCB_PROPTYPE_CCBFILE","parsePropTypeCCBFile","onHandlePropTypeCCBFile","getCustomProperties","Node","x","readFloat","y","containerSize","_contentSize","_rootContainerSize","getAbsolutePosition","setPosition","_animatedProps","baseValue","setBaseValue","width","height","CCB_SIZETYPE_ABSOLUTE","CCB_SIZETYPE_RELATIVE_CONTAINER","CCB_SIZETYPE_PERCENT","CCB_SIZETYPE_HORIZONTAL_PERCENT","CCB_SIZETYPE_VERTICAL_PERCENT","CCB_SIZETYPE_MULTIPLY_RESOLUTION","resolutionScale","BuilderReader","getResolutionScale","CCB_SCALETYPE_MULTIPLY_RESOLUTION","spriteSheet","spriteFile","spriteFrame","length","_ccbRootPath","texture","textureCache","addImage","locContentSize","getContentSize","bounds","rect","SpriteFrame","frameCache","spriteFrameCache","_loadedSpriteSheets","addSpriteFrames","getSpriteFrame","animationFile","animation","lastPathComponent","animationCache","addAnimations","getAnimation","ret","red","green","blue","alpha","redVar","greenVar","blueVar","alphaVar","r","g","b","a","source","destination","BlendFunc","selectorName","selectorTarget","CCB_TARGETTYPE_NONE","_jsControlled","CCB_TARGETTYPE_DOCUMENTROOT","_rootNode","CCB_TARGETTYPE_OWNER","_owner","selMenuHandler","onResolveCCBCCMenuItemSelector","ccbSelectorResolver","_ccbSelectorResolver","addDocumentCallbackNode","addDocumentCallbackName","addDocumentCallbackControlEvents","addOwnerCallbackNode","addOwnerCallbackName","addOwnerCallbackControlEvents","onResolveCCBCCControlSelector","ccbFileName","ccbFileWithoutPathExtension","deletePathExtension","myCCBReader","bytes","loader","getRes","realUrl","getUrl","hlddz","convertToDownloadURL","loadBinarySync","cache","initWithData","setRootContainerSize","setAnimationManagers","_animationManagers","setOwner","readFileWithCleanUp","_autoPlaySequenceId","runAnimations","setAnchorPoint","sizeValue","setContentSize","setScale","_skewX","_skewY","nameX","nameY","floatValue","setObject","setRotation","tag","_visible","_ignoreAnchorPointForPosition","ccColor3B","ccColor4FVar","ccBlendFunc","strValue"],"mappings":"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","file":"CCNodeLoader.js","sourceRoot":"../../../../../../../assets/frameworks/cocos2d-html5/extensions/ccb-reader","sourcesContent":["/****************************************************************************\n Copyright (c) 2008-2010 Ricardo Quesada\n Copyright (c) 2011-2012 cocos2d-x.org\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n\n http://www.cocos2d-x.org\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n\nvar PROPERTY_POSITION = \"position\";\nvar PROPERTY_CONTENTSIZE = \"contentSize\";\nvar PROPERTY_SKEW = \"skew\";\nvar PROPERTY_ANCHORPOINT = \"anchorPoint\";\nvar PROPERTY_SCALE = \"scale\";\nvar PROPERTY_ROTATION = \"rotation\";\nvar PROPERTY_TAG = \"tag\";\nvar PROPERTY_IGNOREANCHORPOINTFORPOSITION = \"ignoreAnchorPointForPosition\";\nvar PROPERTY_VISIBLE = \"visible\";\n\nvar ASSERT_FAIL_UNEXPECTED_PROPERTY = function (propertyName) {\n    cc.log(\"Unexpected property: '\" + propertyName + \"'!\");\n};\n\nvar ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE = function (propertyName) {\n    cc.log(\"Unexpected property type: '\" + propertyName + \"'!\");\n};\n\nfunction BlockData(selMenuHander, target) {\n    this.selMenuHander = selMenuHander;\n    this.target = target;\n}\n\nfunction BlockCCControlData(selCCControlHandler, target, controlEvents) {\n    this.selCCControlHandler = selCCControlHandler;\n    this.target = target;\n    this.controlEvents = controlEvents;\n}\n\ncc.NodeLoader = cc.Class.extend({\n    _customProperties: null,\n    _pt: null,\n    _size: null,\n    _arr2: null,\n\n    ctor: function () {\n        this._customProperties = new cc._Dictionary();\n        this._pt = cc.p();\n        this._size = cc.size();\n        this._arr2 = new Array(2);\n        this._blockControlData = {\n            selCCControlHandler: null,\n            target: null,\n            controlEvents: null\n        };\n    },\n\n    loadCCNode: function (parent, ccbReader) {\n        return this._createCCNode(parent, ccbReader);\n        //this.parseProperties(node, parent, ccbReader);\n        //return node;\n    },\n\n    parseProperties: function (node, parent, ccbReader) {\n        var numRegularProps = ccbReader.readInt(false);\n        var numExturaProps = ccbReader.readInt(false);\n        var propertyCount = numRegularProps + numExturaProps;\n\n        for (var i = 0; i < propertyCount; i++) {\n            var isExtraProp = (i >= numRegularProps);\n            var type = ccbReader.readInt(false);\n            var propertyName = ccbReader.readCachedString();\n\n            // Check if the property can be set for this platform\n            var setProp = false;\n\n            var platform = ccbReader._data[ccbReader._currentByte++];\n            if ((platform === CCB_PLATFORM_ALL) || (platform === CCB_PLATFORM_IOS) || (platform === CCB_PLATFORM_MAC))\n                setProp = true;\n\n            //forward properties for sub ccb files\n            if (isExtraProp) {\n                if (node.ccbFileNode) {\n                    node = node.ccbFileNode;\n                    //skip properties that doesn't have a value to override\n                    var getExtraPropsNames = node.userObject;\n                    setProp = getExtraPropsNames.indexOf(propertyName) !== -1;\n                } else if (node === ccbReader._animationManager.getRootNode()) {\n                    var extraPropsNames = node.userObject;\n                    if (!extraPropsNames) {\n                        extraPropsNames = [];\n                        node.userObject = extraPropsNames;\n                    }\n                    extraPropsNames.push(propertyName);\n                }\n            }  \n\n            switch (type) {\n                case CCB_PROPTYPE_POSITION:\n                {\n                    var position = this.parsePropTypePosition(node, parent, ccbReader, propertyName);\n                    if (setProp)\n                        this.onHandlePropTypePosition(node, parent, propertyName, position, ccbReader);\n                    break;\n                }\n                case CCB_PROPTYPE_POINT:\n                {\n                    var point = this.parsePropTypePoint(node, parent, ccbReader);\n                    if (setProp)\n                        this.onHandlePropTypePoint(node, parent, propertyName, point, ccbReader);\n                    break;\n                }\n                case CCB_PROPTYPE_POINTLOCK:\n                {\n                    var pointLock = this.parsePropTypePointLock(node, parent, ccbReader);\n                    if (setProp)\n                        this.onHandlePropTypePointLock(node, parent, propertyName, pointLock, ccbReader);\n                    break;\n                }\n                case CCB_PROPTYPE_SIZE:\n                {\n                    var size = this.parsePropTypeSize(node, parent, ccbReader);\n                    if (setProp)\n                        this.onHandlePropTypeSize(node, parent, propertyName, size, ccbReader);\n                    break;\n                }\n                case CCB_PROPTYPE_SCALELOCK:\n                {\n                    var scaleLock = this.parsePropTypeScaleLock(node, parent, ccbReader, propertyName);\n                    if (setProp)\n                        this.onHandlePropTypeScaleLock(node, parent, propertyName, scaleLock, ccbReader);\n                    break;\n                }\n                case CCB_PROPTYPE_FLOATXY:\n                {\n                    var xy = this.parsePropTypeFloatXY(node, parent, ccbReader);\n                    if (setProp)\n                        this.onHandlePropTypeFloatXY(node, parent, propertyName, xy, ccbReader);\n                    break;\n                }\n\n                case CCB_PROPTYPE_FLOAT:\n                {\n                    var f = this.parsePropTypeFloat(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeFloat(node, parent, propertyName, f, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_DEGREES:\n                {\n                    var degrees = this.parsePropTypeDegrees(node, parent, ccbReader, propertyName);\n                    if (setProp) {\n                        this.onHandlePropTypeDegrees(node, parent, propertyName, degrees, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_FLOATSCALE:\n                {\n                    var floatScale = this.parsePropTypeFloatScale(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeFloatScale(node, parent, propertyName, floatScale, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_INTEGER:\n                {\n                    var integer = this.parsePropTypeInteger(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeInteger(node, parent, propertyName, integer, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_INTEGERLABELED:\n                {\n                    var integerLabeled = this.parsePropTypeIntegerLabeled(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeIntegerLabeled(node, parent, propertyName, integerLabeled, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_FLOATVAR:\n                {\n                    var floatVar = this.parsePropTypeFloatVar(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeFloatVar(node, parent, propertyName, floatVar, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_CHECK:\n                {\n                    var check = this.parsePropTypeCheck(node, parent, ccbReader, propertyName);\n                    if (setProp) {\n                        this.onHandlePropTypeCheck(node, parent, propertyName, check, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_SPRITEFRAME:\n                {\n                    var ccSpriteFrame = this.parsePropTypeSpriteFrame(node, parent, ccbReader, propertyName);\n                    if (setProp) {\n                        this.onHandlePropTypeSpriteFrame(node, parent, propertyName, ccSpriteFrame, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_ANIMATION:\n                {\n                    var ccAnimation = this.parsePropTypeAnimation(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeAnimation(node, parent, propertyName, ccAnimation, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_TEXTURE:\n                {\n                    var ccTexture2D = this.parsePropTypeTexture(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeTexture(node, parent, propertyName, ccTexture2D, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_BYTE:\n                {\n                    var byteValue = this.parsePropTypeByte(node, parent, ccbReader, propertyName);\n                    if (setProp) {\n                        this.onHandlePropTypeByte(node, parent, propertyName, byteValue, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_COLOR3:\n                {\n                    var color = this.parsePropTypeColor3(node, parent, ccbReader, propertyName);\n                    if (setProp) {\n                        this.onHandlePropTypeColor3(node, parent, propertyName, color, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_COLOR4VAR:\n                {\n                    var color4FVar = this.parsePropTypeColor4FVar(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeColor4FVar(node, parent, propertyName, color4FVar, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_FLIP:\n                {\n                    var flip = this.parsePropTypeFlip(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeFlip(node, parent, propertyName, flip, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_BLENDMODE:\n                {\n                    var blendFunc = this.parsePropTypeBlendFunc(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeBlendFunc(node, parent, propertyName, blendFunc, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_FNTFILE:\n                {\n                    var fntFile = ccbReader.getCCBRootPath() + this.parsePropTypeFntFile(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeFntFile(node, parent, propertyName, fntFile, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_FONTTTF:\n                {\n                    var fontTTF = this.parsePropTypeFontTTF(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeFontTTF(node, parent, propertyName, fontTTF, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_STRING:\n                {\n                    var stringValue = this.parsePropTypeString(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeString(node, parent, propertyName, stringValue, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_TEXT:\n                {\n                    var textValue = this.parsePropTypeText(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeText(node, parent, propertyName, textValue, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_BLOCK:\n                {\n                    var blockData = this.parsePropTypeBlock(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeBlock(node, parent, propertyName, blockData, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_BLOCKCCCONTROL:\n                {\n                    var blockCCControlData = this.parsePropTypeBlockCCControl(node, parent, ccbReader);\n                    if (setProp && blockCCControlData != null) {\n                        this.onHandlePropTypeBlockCCControl(node, parent, propertyName, blockCCControlData, ccbReader);\n                    }\n                    break;\n                }\n                case CCB_PROPTYPE_CCBFILE:\n                {\n                    var ccbFileNode = this.parsePropTypeCCBFile(node, parent, ccbReader);\n                    if (setProp) {\n                        this.onHandlePropTypeCCBFile(node, parent, propertyName, ccbFileNode, ccbReader);\n                    }\n                    break;\n                }\n                default:\n                    ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE(type);\n                    break;\n            }\n        }\n    },\n\n    getCustomProperties: function () {\n        return this._customProperties;\n    },\n\n    _createCCNode: function (parent, ccbReader) {\n        return new cc.Node();\n    },\n\n    parsePropTypePosition: function (node, parent, ccbReader, propertyName) {\n        var x = ccbReader.readFloat();\n        var y = ccbReader.readFloat();\n\n        var type = ccbReader.readInt(false);\n\n        // var containerSize = ccbReader._animationManager.getContainerSize(parent);\n        var containerSize = parent ? parent._contentSize : ccbReader._animationManager._rootContainerSize;\n        cc.getAbsolutePosition(x, y, type, containerSize, propertyName, this._pt);\n        node.setPosition(this._pt);\n\n        if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n            var baseValue = [x, y, type];\n            ccbReader._animationManager.setBaseValue(baseValue, node, propertyName);\n        }\n        return this._pt;\n    },\n\n    parsePropTypePoint: function (node, parent, ccbReader) {\n        this._pt.x = ccbReader.readFloat();\n        this._pt.y = ccbReader.readFloat();\n        return this._pt;\n    },\n\n    parsePropTypePointLock: function (node, parent, ccbReader) {\n        this._pt.x = ccbReader.readFloat();\n        this._pt.y = ccbReader.readFloat();\n        return this._pt;\n    },\n\n    parsePropTypeSize: function (node, parent, ccbReader) {\n        var width = ccbReader.readFloat();\n        var height = ccbReader.readFloat();\n\n        var type = ccbReader.readInt(false);\n\n        // var containerSize = ccbReader._animationManager.getContainerSize(parent);\n        var containerSize = parent ? parent._contentSize : ccbReader._animationManager._rootContainerSize;\n\n        switch (type) {\n            case CCB_SIZETYPE_ABSOLUTE:\n                /* Nothing. */\n                break;\n            case CCB_SIZETYPE_RELATIVE_CONTAINER:\n                width = containerSize.width - width;\n                height = containerSize.height - height;\n                break;\n            case CCB_SIZETYPE_PERCENT:\n                width = (containerSize.width * width / 100.0);\n                height = (containerSize.height * height / 100.0);\n                break;\n            case CCB_SIZETYPE_HORIZONTAL_PERCENT:\n                width = (containerSize.width * width / 100.0);\n                break;\n            case CCB_SIZETYPE_VERTICAL_PERCENT:\n                height = (containerSize.height * height / 100.0);\n                break;\n            case CCB_SIZETYPE_MULTIPLY_RESOLUTION:\n                var resolutionScale = cc.BuilderReader.getResolutionScale();\n                width *= resolutionScale;\n                height *= resolutionScale;\n                break;\n            default:\n                cc.log(\"Unknown CCB type.\");\n                break;\n        }\n        this._size.width = width;\n        this._size.height = height;\n        return this._size;\n    },\n\n    parsePropTypeScaleLock: function (node, parent, ccbReader, propertyName) {\n        var x = ccbReader.readFloat();\n        var y = ccbReader.readFloat();\n\n        var type = ccbReader.readInt(false);\n\n        // cc.setRelativeScale(node, x, y, type, propertyName);\n\n        if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n            ccbReader._animationManager.setBaseValue([x, y, type], node, propertyName);\n        }\n\n        if (type === CCB_SCALETYPE_MULTIPLY_RESOLUTION) {\n            var resolutionScale = cc.BuilderReader.getResolutionScale();\n            x *= resolutionScale;\n            y *= resolutionScale;\n        }\n        this._pt.x = x;\n        this._pt.y = y;\n        return this._pt;\n    },\n\n    parsePropTypeFloat: function (node, parent, ccbReader) {\n        return ccbReader.readFloat();\n    },\n\n    parsePropTypeDegrees: function (node, parent, ccbReader, propertyName) {\n        var degrees = ccbReader.readFloat();\n        if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n            ccbReader._animationManager.setBaseValue(degrees, node, propertyName);\n        }\n        return degrees;\n    },\n\n    parsePropTypeFloatScale: function (node, parent, ccbReader) {\n        var f = ccbReader.readFloat();\n\n        var type = ccbReader.readInt(false);\n\n        if (type === CCB_SCALETYPE_MULTIPLY_RESOLUTION) {\n            f *= cc.BuilderReader.getResolutionScale();\n        }\n\n        return f;\n    },\n\n    parsePropTypeInteger: function (node, parent, ccbReader) {\n        return ccbReader.readInt(true);\n    },\n\n    parsePropTypeIntegerLabeled: function (node, parent, ccbReader) {\n        return ccbReader.readInt(true);\n    },\n\n    parsePropTypeFloatVar: function (node, parent, ccbReader) {\n        this._arr2[0] = ccbReader.readFloat();\n        this._arr2[1] = ccbReader.readFloat();\n        return this._arr2;\n    },\n\n    parsePropTypeCheck: function (node, parent, ccbReader, propertyName) {\n        var check = !!ccbReader._data[ccbReader._currentByte++];\n        if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n            ccbReader._animationManager.setBaseValue(check, node, propertyName);\n        }\n        return check;\n    },\n\n    parsePropTypeSpriteFrame: function (node, parent, ccbReader, propertyName) {\n        var spriteSheet = ccbReader.readCachedString();\n        var spriteFile = ccbReader.readCachedString();\n\n        var spriteFrame;\n        if (spriteFile) {\n            if (spriteSheet.length === 0) {\n                spriteFile = ccbReader._ccbRootPath + spriteFile;\n                var texture = cc.textureCache.addImage(spriteFile);\n\n                var locContentSize = texture.getContentSize();\n                var bounds = cc.rect(0, 0, locContentSize.width, locContentSize.height);\n                spriteFrame = new cc.SpriteFrame(texture, bounds);\n            } else {\n                var frameCache = cc.spriteFrameCache;\n                spriteSheet = ccbReader._ccbRootPath + spriteSheet;\n                //load the sprite sheet only if it is not loaded\n                if (ccbReader._loadedSpriteSheets.indexOf(spriteSheet) === -1) {\n                    frameCache.addSpriteFrames(spriteSheet);\n                    ccbReader._loadedSpriteSheets.push(spriteSheet);\n                }\n                spriteFrame = frameCache.getSpriteFrame(spriteFile);\n            }\n            if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n                ccbReader._animationManager.setBaseValue(spriteFrame, node, propertyName);\n            }\n        }\n\n        return spriteFrame;\n    },\n\n    parsePropTypeAnimation: function (node, parent, ccbReader) {\n        var animationFile = ccbReader._ccbRootPath + ccbReader.readCachedString();\n        var animation = ccbReader.readCachedString();\n\n        var ccAnimation = null;\n\n        // Support for stripping relative file paths, since ios doesn't currently\n        // know what to do with them, since its pulling from bundle.\n        // Eventually this should be handled by a client side asset manager\n        // interface which figured out what resources to load.\n        // TODO Does this problem exist in C++?\n        animation = cc.BuilderReader.lastPathComponent(animation);\n        animationFile = cc.BuilderReader.lastPathComponent(animationFile);\n\n        if (animation) {\n            var animationCache = cc.animationCache;\n            animationCache.addAnimations(animationFile);\n\n            ccAnimation = animationCache.getAnimation(animation);\n        }\n        return ccAnimation;\n    },\n\n    parsePropTypeTexture: function (node, parent, ccbReader) {\n        var spriteFile = ccbReader._ccbRootPath + ccbReader.readCachedString();\n\n        if (spriteFile)\n            return cc.textureCache.addImage(spriteFile);\n        return null;\n    },\n\n    parsePropTypeByte: function (node, parent, ccbReader, propertyName) {\n        var ret = ccbReader._data[ccbReader._currentByte++];\n        if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n            ccbReader._animationManager.setBaseValue(ret, node, propertyName);\n        }\n        return ret;\n    },\n\n    parsePropTypeColor3: function (node, parent, ccbReader, propertyName) {\n        var red = ccbReader._data[ccbReader._currentByte++];\n        var green = ccbReader._data[ccbReader._currentByte++];\n        var blue = ccbReader._data[ccbReader._currentByte++];\n        var color = cc.color(red, green, blue);\n        if (ccbReader._animatedProps.indexOf(propertyName) > -1) {\n            ccbReader._animationManager.setBaseValue(color, node, propertyName);\n        }\n        return color;\n    },\n\n    parsePropTypeColor4FVar: function (node, parent, ccbReader) {\n        //TODO Color4F doesn't supports on HTML5\n        var red = 0 | (ccbReader.readFloat() * 255);\n        var green = 0 | (ccbReader.readFloat() * 255);\n        var blue = 0 | (ccbReader.readFloat() * 255);\n        var alpha = ccbReader.readFloat();\n        alpha = alpha <= 1 ? (0 | (alpha * 255)) : alpha;\n        var redVar = 0 | (ccbReader.readFloat() * 255);\n        var greenVar = 0 | (ccbReader.readFloat() * 255);\n        var blueVar = 0 | (ccbReader.readFloat() * 255);\n        var alphaVar = ccbReader.readFloat();\n        alphaVar = alphaVar <= 1 ? (0 | (alphaVar * 255)) : alphaVar;\n\n        this._arr2[0] = {r: red, g: green, b: blue, a: alpha};\n        this._arr2[1] = {r: redVar, g: greenVar, b: blueVar, a: alphaVar};\n\n        return this._arr2;\n    },\n\n    parsePropTypeFlip: function (node, parent, ccbReader) {\n        this._arr2[0] = !!ccbReader._data[ccbReader._currentByte++];\n        this._arr2[1] = !!ccbReader._data[ccbReader._currentByte++];\n\n        return this._arr2;\n    },\n\n    parsePropTypeBlendFunc: function (node, parent, ccbReader) {\n        var source = ccbReader.readInt(false);\n        var destination = ccbReader.readInt(false);\n\n        return new cc.BlendFunc(source, destination);\n    },\n\n    parsePropTypeFntFile: function (node, parent, ccbReader) {\n        return ccbReader.readCachedString();\n    },\n\n    parsePropTypeString: function (node, parent, ccbReader) {\n        return ccbReader.readCachedString();\n    },\n\n    parsePropTypeText: function (node, parent, ccbReader) {\n        return ccbReader.readCachedString();\n    },\n\n    parsePropTypeFontTTF: function (node, parent, ccbReader) {\n        return ccbReader.readCachedString();\n        //var ttfEnding = \".ttf\";\n\n        //TODO Fix me if it is wrong\n        /* If the fontTTF comes with the \".ttf\" extension, prepend the absolute path.\n         * System fonts come without the \".ttf\" extension and do not need the path prepended. */\n        /*if (cc.CCBReader.endsWith(fontTTF.toLowerCase(), ttfEnding)) {\n         fontTTF = ccbReader.getCCBRootPath() + fontTTF;\n         }*/\n    },\n\n    parsePropTypeBlock: function (node, parent, ccbReader) {\n        var selectorName = ccbReader.readCachedString();\n        var selectorTarget = ccbReader.readInt(false);\n\n        if (selectorTarget !== CCB_TARGETTYPE_NONE) {\n            var target = null;\n            if (!ccbReader._jsControlled) {\n                if (selectorTarget === CCB_TARGETTYPE_DOCUMENTROOT) {\n                    target = ccbReader._animationManager._rootNode;\n                } else if (selectorTarget === CCB_TARGETTYPE_OWNER) {\n                    target = ccbReader._owner;\n                }\n\n                if (target !== null) {\n                    if (selectorName.length > 0) {\n                        var selMenuHandler = 0;\n\n                        //var targetAsCCBSelectorResolver = target;\n                        if (target.onResolveCCBCCMenuItemSelector)\n                            selMenuHandler = target.onResolveCCBCCMenuItemSelector(target, selectorName);\n\n                        if (selMenuHandler === 0) {\n                            var ccbSelectorResolver = ccbReader._ccbSelectorResolver;\n                            if (ccbSelectorResolver)\n                                selMenuHandler = ccbSelectorResolver.onResolveCCBCCMenuItemSelector(target, selectorName);\n                        }\n\n                        if (selMenuHandler === 0) {\n                            cc.log(\"Skipping selector '\" + selectorName + \"' since no CCBSelectorResolver is present.\");\n                        } else {\n                            return new BlockData(selMenuHandler, target);\n                        }\n                    } else {\n                        cc.log(\"Unexpected empty selector.\");\n                    }\n                } else {\n                    cc.log(\"Unexpected NULL target for selector.\");\n                }\n            } else {\n                if (selectorTarget === CCB_TARGETTYPE_DOCUMENTROOT) {\n                    ccbReader.addDocumentCallbackNode(node);\n                    ccbReader.addDocumentCallbackName(selectorName);\n                    ccbReader.addDocumentCallbackControlEvents(0);\n                } else {\n                    ccbReader.addOwnerCallbackNode(node);\n                    ccbReader.addOwnerCallbackName(selectorName);\n                    ccbReader.addOwnerCallbackControlEvents(0);\n                }\n            }\n        }\n        return null;\n    },\n\n    parsePropTypeBlockCCControl: function (node, parent, ccbReader) {\n        var selectorName = ccbReader.readCachedString();\n        var selectorTarget = ccbReader.readInt(false);\n        var controlEvents = ccbReader.readInt(false);\n\n        if (selectorTarget !== CCB_TARGETTYPE_NONE) {\n            if (!ccbReader._jsControlled) {\n                var target = null;\n                if (selectorTarget === CCB_TARGETTYPE_DOCUMENTROOT) {\n                    target = ccbReader._animationManager._rootNode;\n                } else if (selectorTarget === CCB_TARGETTYPE_OWNER) {\n                    target = ccbReader._owner;\n                }\n\n                if (target !== null) {\n                    if (selectorName.length > 0) {\n                        var selCCControlHandler = 0;\n\n                        if (target.onResolveCCBCCControlSelector) {\n                            selCCControlHandler = target.onResolveCCBCCControlSelector(target, selectorName);\n                        }\n                        if (selCCControlHandler === 0) {\n                            var ccbSelectorResolver = ccbReader._ccbSelectorResolver;\n                            if (ccbSelectorResolver != null) {\n                                selCCControlHandler = ccbSelectorResolver.onResolveCCBCCControlSelector(target, selectorName);\n                            }\n                        }\n\n                        if (selCCControlHandler === 0) {\n                            cc.log(\"Skipping selector '\" + selectorName + \"' since no CCBSelectorResolver is present.\");\n                        } else {\n                            this._blockControlData.selCCControlHandler = selCCControlHandler;\n                            this._blockControlData.target = target;\n                            this._blockControlData.controlEvents = controlEvents;\n                            return this._blockControlData;\n                        }\n                    } else {\n                        cc.log(\"Unexpected empty selector.\");\n                    }\n                } else {\n                    cc.log(\"Unexpected NULL target for selector.\");\n                }\n            } else {\n                if (selectorTarget === CCB_TARGETTYPE_DOCUMENTROOT) {\n                    ccbReader.addDocumentCallbackNode(node);\n                    ccbReader.addDocumentCallbackName(selectorName);\n                    ccbReader.addDocumentCallbackControlEvents(controlEvents);\n                } else {\n                    ccbReader.addOwnerCallbackNode(node);\n                    ccbReader.addOwnerCallbackName(selectorName);\n                    ccbReader.addOwnerCallbackControlEvents(controlEvents);\n                }\n            }\n        }\n        return null;\n    },\n\n    parsePropTypeCCBFile: function (node, parent, ccbReader) {\n        var ccbFileName = ccbReader._ccbRootPath + ccbReader.readCachedString();\n\n        /* Change path extension to .ccbi. */\n        var ccbFileWithoutPathExtension = cc.BuilderReader.deletePathExtension(ccbFileName);\n        ccbFileName = ccbFileWithoutPathExtension + \".ccbi\";\n\n        var myCCBReader = new cc.BuilderReader(ccbReader);\n\n        var bytes = cc.loader.getRes(ccbFileName);\n        if (!bytes) {\n            var realUrl = cc.loader.getUrl(ccbFileName);\n            realUrl = hlddz.convertToDownloadURL(realUrl);\n            bytes = cc.loader.loadBinarySync(realUrl);\n            cc.loader.cache[ccbFileName] = bytes;\n        }\n\n        myCCBReader.initWithData(bytes, ccbReader._owner);\n        myCCBReader._animationManager.setRootContainerSize(parent._contentSize);\n        myCCBReader.setAnimationManagers(ccbReader._animationManagers);\n\n        myCCBReader._animationManager.setOwner(ccbReader._owner);\n        var ccbFileNode = myCCBReader.readFileWithCleanUp(false);\n        ccbReader.setAnimationManagers(myCCBReader._animationManagers);\n\n        if (ccbFileNode && myCCBReader._animationManager._autoPlaySequenceId !== -1)\n            myCCBReader._animationManager.runAnimations(myCCBReader._animationManager._autoPlaySequenceId, 0);\n\n        return ccbFileNode;\n    },\n\n    parsePropTypeFloatXY: function (node, parent, ccbReader) {\n        this._pt.x = ccbReader.readFloat();\n        this._pt.y = ccbReader.readFloat();\n        return this._pt;\n    },\n\n    onHandlePropTypePosition: function (node, parent, propertyName, position, ccbReader) {\n        if (propertyName === PROPERTY_POSITION) {\n            node.setPosition(position);\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n\n    onHandlePropTypePoint: function (node, parent, propertyName, position, ccbReader) {\n        if (propertyName === PROPERTY_ANCHORPOINT) {\n            node.setAnchorPoint(position);\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n\n    onHandlePropTypePointLock: function (node, parent, propertyName, pointLock, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n\n    onHandlePropTypeSize: function (node, parent, propertyName, sizeValue, ccbReader) {\n        if (propertyName === PROPERTY_CONTENTSIZE) {\n            node.setContentSize(sizeValue);\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n\n    onHandlePropTypeScaleLock: function (node, parent, propertyName, scaleLock, ccbReader) {\n        if (propertyName === PROPERTY_SCALE) {\n            node.setScale(scaleLock.x, scaleLock.y);\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n    onHandlePropTypeFloatXY: function (node, parent, propertyName, xy, ccbReader) {\n        if (propertyName === PROPERTY_SKEW) {\n            node._skewX = xy.x;\n            node._skewY = xy.y;\n        } else {\n            var nameX = propertyName + \"X\";\n            var nameY = propertyName + \"Y\";\n            if (!node[nameX] || !node[nameY])\n                ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n            //TODO throw an error when source code was confused\n            node[nameX](xy.x);\n            node[nameY](xy.y);\n        }\n    },\n    onHandlePropTypeFloat: function (node, parent, propertyName, floatValue, ccbReader) {\n        //ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        // It may be a custom property, add it to custom property dictionary.\n        this._customProperties.setObject(floatValue, propertyName);\n    },\n\n    onHandlePropTypeDegrees: function (node, parent, propertyName, degrees, ccbReader) {\n        if (propertyName === PROPERTY_ROTATION) {\n            node.setRotation(degrees);\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n\n    onHandlePropTypeFloatScale: function (node, parent, propertyName, floatScale, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n\n    onHandlePropTypeInteger: function (node, parent, propertyName, integer, ccbReader) {\n        if (propertyName === PROPERTY_TAG) {\n            node.tag = integer;\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n\n    onHandlePropTypeIntegerLabeled: function (node, parent, propertyName, integerLabeled, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n\n    onHandlePropTypeFloatVar: function (node, parent, propertyName, floatVar, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n\n    onHandlePropTypeCheck: function (node, parent, propertyName, check, ccbReader) {\n        if (propertyName === PROPERTY_VISIBLE) {\n            node._visible = check;\n        } else if (propertyName === PROPERTY_IGNOREANCHORPOINTFORPOSITION) {\n            node._ignoreAnchorPointForPosition = check;\n        } else {\n            ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        }\n    },\n\n    onHandlePropTypeSpriteFrame: function (node, parent, propertyName, spriteFrame, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n\n    onHandlePropTypeAnimation: function (node, parent, propertyName, ccAnimation, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n\n    onHandlePropTypeTexture: function (node, parent, propertyName, ccTexture2D, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeByte: function (node, parent, propertyName, byteValue, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeColor3: function (node, parent, propertyName, ccColor3B, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeColor4FVar: function (node, parent, propertyName, ccColor4FVar, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeFlip: function (node, parent, propertyName, flip, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeBlendFunc: function (node, parent, propertyName, ccBlendFunc, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeFntFile: function (node, parent, propertyName, fntFile, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeString: function (node, parent, propertyName, strValue, ccbReader) {\n        //ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n        // It may be a custom property, add it to custom property dictionary.\n        this._customProperties.setObject(strValue, propertyName);\n    },\n    onHandlePropTypeText: function (node, parent, propertyName, textValue, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeFontTTF: function (node, parent, propertyName, fontTTF, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeBlock: function (node, parent, propertyName, blockData, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeBlockCCControl: function (node, parent, propertyName, blockCCControlData, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    },\n    onHandlePropTypeCCBFile: function (node, parent, propertyName, ccbFileNode, ccbReader) {\n        ASSERT_FAIL_UNEXPECTED_PROPERTY(propertyName);\n    }\n});\n\ncc.NodeLoader.loader = function () {\n    return new cc.NodeLoader();\n};\n"]}