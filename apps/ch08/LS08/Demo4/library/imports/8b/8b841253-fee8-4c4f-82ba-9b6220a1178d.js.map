{"version":3,"sources":["../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/core/assets/frameworks/cocos2d-html5/cocos2d/core/CCDrawingPrimitivesCanvas.js"],"names":["cc","PI2","Math","PI","DrawingPrimitiveCanvas","Class","extend","_cacheArray","_renderContext","ctor","renderContext","drawPoint","point","size","ctx","getContext","beginPath","arc","x","y","closePath","fill","drawPoints","points","numberOfPoints","locContext","i","len","length","drawLine","origin","destination","moveTo","lineTo","stroke","drawRect","p","drawSolidRect","color","vertices","drawSolidPoly","drawPoly","numOfVertices","closePolygon","Error","firstPoint","polygons","setDrawColor","r","g","b","a","drawCircle","center","radius","angle","segments","drawLineToCenter","endAngle","drawQuadBezier","control","t","pow","push","drawCubicBezier","control1","control2","drawCatmullRom","drawCardinalSpline","config","tension","setStrokeStyle","lt","deltaT","dt","newPos","CardinalSplineAt","getControlPointAt","drawImage","image","sourcePoint","sourceSize","destPoint","destSize","arguments","height","width","drawStar","wrapper","context","colorStr","setFillStyle","subRadius","rg","createRadialGradient","addColorStop","startAngle_1","endAngle_1","drawColorBall","g1","fillText","strText","setPointSize","pointSize","setLineWidth","lineWidth"],"mappings":";;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;;;AAIAA,GAAGC,GAAH,GAASC,KAAKC,EAAL,GAAU,CAAnB;;AAEA;;;;;;AAMAH,GAAGI,sBAAH,GAA4BJ,GAAGK,KAAH,CAASC,MAAT,EAAgB,wCAAwC;AAChFC,iBAAY,EADoE;AAEhFC,oBAAe,IAFiE;AAGhF;;;;AAIAC,UAAK,cAAUC,aAAV,EAAyB;AAC1B,aAAKF,cAAL,GAAsBE,aAAtB;AACH,KAT+E;;AAWhF;;;;;;AAMAC,eAAU,mBAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AAC7B,YAAI,CAACA,IAAL,EAAW;AACPA,mBAAO,CAAP;AACH;AACD,YAAIC,MAAM,KAAKN,cAAL,CAAoBO,UAApB,EAAV;AACAD,YAAIE,SAAJ;AACAF,YAAIG,GAAJ,CAAQL,MAAMM,CAAd,EAAiB,CAACN,MAAMO,CAAxB,EAA2BN,IAA3B,EAAiC,CAAjC,EAAoCX,KAAKC,EAAL,GAAU,CAA9C,EAAiD,KAAjD;AACAW,YAAIM,SAAJ;AACAN,YAAIO,IAAJ;AACH,KA1B+E;;AA4BhF;;;;;;;AAOAC,gBAAW,oBAAUC,MAAV,EAAkBC,cAAlB,EAAkCX,IAAlC,EAAwC;AAC/C,YAAIU,UAAU,IAAd,EACI;;AAEJ,YAAI,CAACV,IAAL,EAAW;AACPA,mBAAO,CAAP;AACH;AACD,YAAIY,aAAa,KAAKjB,cAAL,CAAoBO,UAApB,EAAjB;;AAEAU,mBAAWT,SAAX;AACA,aAAK,IAAIU,IAAI,CAAR,EAAWC,MAAMJ,OAAOK,MAA7B,EAAqCF,IAAIC,GAAzC,EAA8CD,GAA9C;AACID,uBAAWR,GAAX,CAAeM,OAAOG,CAAP,EAAUR,CAAzB,EAA4B,CAACK,OAAOG,CAAP,EAAUP,CAAvC,EAA0CN,IAA1C,EAAgD,CAAhD,EAAmDX,KAAKC,EAAL,GAAU,CAA7D,EAAgE,KAAhE;AADJ,SAEAsB,WAAWL,SAAX;AACAK,mBAAWJ,IAAX;AACH,KAjD+E;;AAmDhF;;;;;;AAMAQ,cAAS,kBAAUC,MAAV,EAAkBC,WAAlB,EAA+B;AACpC,YAAIN,aAAa,KAAKjB,cAAL,CAAoBO,UAApB,EAAjB;AACAU,mBAAWT,SAAX;AACAS,mBAAWO,MAAX,CAAkBF,OAAOZ,CAAzB,EAA6B,CAACY,OAAOX,CAArC;AACAM,mBAAWQ,MAAX,CAAkBF,YAAYb,CAA9B,EAAiC,CAACa,YAAYZ,CAA9C;AACAM,mBAAWL,SAAX;AACAK,mBAAWS,MAAX;AACH,KAhE+E;;AAkEhF;;;;;AAKAC,cAAS,kBAAUL,MAAV,EAAkBC,WAAlB,EAA+B;AACpC;AACA,aAAKF,QAAL,CAAc7B,GAAGoC,CAAH,CAAKN,OAAOZ,CAAZ,EAAeY,OAAOX,CAAtB,CAAd,EAAwCnB,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAoBY,OAAOX,CAA3B,CAAxC;AACA,aAAKU,QAAL,CAAc7B,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAoBY,OAAOX,CAA3B,CAAd,EAA6CnB,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAoBa,YAAYZ,CAAhC,CAA7C;AACA,aAAKU,QAAL,CAAc7B,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAoBa,YAAYZ,CAAhC,CAAd,EAAkDnB,GAAGoC,CAAH,CAAKN,OAAOZ,CAAZ,EAAea,YAAYZ,CAA3B,CAAlD;AACA,aAAKU,QAAL,CAAc7B,GAAGoC,CAAH,CAAKN,OAAOZ,CAAZ,EAAea,YAAYZ,CAA3B,CAAd,EAA6CnB,GAAGoC,CAAH,CAAKN,OAAOZ,CAAZ,EAAeY,OAAOX,CAAtB,CAA7C;AACH,KA7E+E;;AA+EhF;;;;;;AAMAkB,mBAAc,uBAAUP,MAAV,EAAkBC,WAAlB,EAA+BO,KAA/B,EAAsC;AAChD,YAAIC,WAAW,CACXT,MADW,EAEX9B,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAoBY,OAAOX,CAA3B,CAFW,EAGXY,WAHW,EAIX/B,GAAGoC,CAAH,CAAKN,OAAOZ,CAAZ,EAAea,YAAYZ,CAA3B,CAJW,CAAf;;AAOA,aAAKqB,aAAL,CAAmBD,QAAnB,EAA6B,CAA7B,EAAgCD,KAAhC;AACH,KA9F+E;;AAgGhF;;;;;;;;AAQAG,cAAS,kBAAUF,QAAV,EAAoBG,aAApB,EAAmCC,YAAnC,EAAiDtB,IAAjD,EAAuD;AAC5DA,eAAOA,QAAQ,KAAf;;AAEA,YAAIkB,YAAY,IAAhB,EACI;;AAEJ,YAAIA,SAASX,MAAT,GAAkB,CAAtB,EACI,MAAM,IAAIgB,KAAJ,CAAU,qCAAV,CAAN;;AAEJ,YAAIC,aAAaN,SAAS,CAAT,CAAjB;AAAA,YAA8Bd,aAAa,KAAKjB,cAAL,CAAoBO,UAApB,EAA3C;AACAU,mBAAWT,SAAX;AACAS,mBAAWO,MAAX,CAAkBa,WAAW3B,CAA7B,EAAiC,CAAC2B,WAAW1B,CAA7C;AACA,aAAK,IAAIO,IAAI,CAAR,EAAWC,MAAMY,SAASX,MAA/B,EAAuCF,IAAIC,GAA3C,EAAgDD,GAAhD;AACID,uBAAWQ,MAAX,CAAkBM,SAASb,CAAT,EAAYR,CAA9B,EAAkC,CAACqB,SAASb,CAAT,EAAYP,CAA/C;AADJ,SAGA,IAAIwB,YAAJ,EACIlB,WAAWL,SAAX;;AAEJ,YAAIC,IAAJ,EACII,WAAWJ,IAAX,GADJ,KAGII,WAAWS,MAAX;AACP,KA9H+E;;AAgIhF;;;;;;AAMAM,mBAAc,uBAAUM,QAAV,EAAoBtB,cAApB,EAAoCc,KAApC,EAA2C;AACrD,aAAKS,YAAL,CAAkBT,MAAMU,CAAxB,EAA2BV,MAAMW,CAAjC,EAAoCX,MAAMY,CAA1C,EAA6CZ,MAAMa,CAAnD;AACA,aAAKV,QAAL,CAAcK,QAAd,EAAwBtB,cAAxB,EAAwC,IAAxC,EAA8C,IAA9C;AACH,KAzI+E;;AA2IhF;;;;;;;;;AASA4B,gBAAY,oBAAUC,MAAV,EAAkBC,MAAlB,EAA0BC,KAA1B,EAAiCC,QAAjC,EAA2CC,gBAA3C,EAA6D;AACrEA,2BAAmBA,oBAAoB,KAAvC;AACA,YAAIhC,aAAa,KAAKjB,cAAL,CAAoBO,UAApB,EAAjB;AACAU,mBAAWT,SAAX;AACA,YAAI0C,WAAWH,QAAQrD,KAAKC,EAAL,GAAU,CAAjC;AACAsB,mBAAWR,GAAX,CAAe,IAAKoC,OAAOnC,CAA3B,EAAgC,IAAI,CAAEmC,OAAOlC,CAA7C,EAAkDmC,MAAlD,EAA2D,CAACC,KAA5D,EAAmE,CAACG,QAApE,EAA8E,KAA9E;AACA,YAAID,gBAAJ,EAAsB;AAClBhC,uBAAWQ,MAAX,CAAkB,IAAKoB,OAAOnC,CAA9B,EAAmC,IAAI,CAAEmC,OAAOlC,CAAhD;AACH;AACDM,mBAAWS,MAAX;AACH,KA9J+E;;AAgKhF;;;;;;;;AAQAyB,oBAAe,wBAAU7B,MAAV,EAAkB8B,OAAlB,EAA2B7B,WAA3B,EAAwCyB,QAAxC,EAAkD;AAC7D;AACA,YAAIjB,WAAW,KAAKhC,WAApB;AACAgC,iBAASX,MAAT,GAAiB,CAAjB;;AAEA,YAAIiC,IAAI,GAAR;AACA,aAAK,IAAInC,IAAI,CAAb,EAAgBA,IAAI8B,QAApB,EAA8B9B,GAA9B,EAAmC;AAC/B,gBAAIR,IAAIhB,KAAK4D,GAAL,CAAS,IAAID,CAAb,EAAgB,CAAhB,IAAqB/B,OAAOZ,CAA5B,GAAgC,OAAO,IAAI2C,CAAX,IAAgBA,CAAhB,GAAoBD,QAAQ1C,CAA5D,GAAgE2C,IAAIA,CAAJ,GAAQ9B,YAAYb,CAA5F;AACA,gBAAIC,IAAIjB,KAAK4D,GAAL,CAAS,IAAID,CAAb,EAAgB,CAAhB,IAAqB/B,OAAOX,CAA5B,GAAgC,OAAO,IAAI0C,CAAX,IAAgBA,CAAhB,GAAoBD,QAAQzC,CAA5D,GAAgE0C,IAAIA,CAAJ,GAAQ9B,YAAYZ,CAA5F;AACAoB,qBAASwB,IAAT,CAAc/D,GAAGoC,CAAH,CAAKlB,CAAL,EAAQC,CAAR,CAAd;AACA0C,iBAAK,MAAML,QAAX;AACH;AACDjB,iBAASwB,IAAT,CAAc/D,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAoBa,YAAYZ,CAAhC,CAAd;;AAEA,aAAKsB,QAAL,CAAcF,QAAd,EAAwBiB,WAAW,CAAnC,EAAsC,KAAtC,EAA6C,KAA7C;AACH,KAvL+E;;AAyLhF;;;;;;;;;AASAQ,qBAAgB,yBAAUlC,MAAV,EAAkBmC,QAAlB,EAA4BC,QAA5B,EAAsCnC,WAAtC,EAAmDyB,QAAnD,EAA6D;AACzE;AACA,YAAIjB,WAAW,KAAKhC,WAApB;AACAgC,iBAASX,MAAT,GAAiB,CAAjB;;AAEA,YAAIiC,IAAI,CAAR;AACA,aAAK,IAAInC,IAAI,CAAb,EAAgBA,IAAI8B,QAApB,EAA8B9B,GAA9B,EAAmC;AAC/B,gBAAIR,IAAIhB,KAAK4D,GAAL,CAAS,IAAID,CAAb,EAAgB,CAAhB,IAAqB/B,OAAOZ,CAA5B,GAAgC,MAAMhB,KAAK4D,GAAL,CAAS,IAAID,CAAb,EAAgB,CAAhB,CAAN,GAA2BA,CAA3B,GAA+BI,SAAS/C,CAAxE,GAA4E,OAAO,IAAI2C,CAAX,IAAgBA,CAAhB,GAAoBA,CAApB,GAAwBK,SAAShD,CAA7G,GAAiH2C,IAAIA,CAAJ,GAAQA,CAAR,GAAY9B,YAAYb,CAAjJ;AACA,gBAAIC,IAAIjB,KAAK4D,GAAL,CAAS,IAAID,CAAb,EAAgB,CAAhB,IAAqB/B,OAAOX,CAA5B,GAAgC,MAAMjB,KAAK4D,GAAL,CAAS,IAAID,CAAb,EAAgB,CAAhB,CAAN,GAA2BA,CAA3B,GAA+BI,SAAS9C,CAAxE,GAA4E,OAAO,IAAI0C,CAAX,IAAgBA,CAAhB,GAAoBA,CAApB,GAAwBK,SAAS/C,CAA7G,GAAiH0C,IAAIA,CAAJ,GAAQA,CAAR,GAAY9B,YAAYZ,CAAjJ;AACAoB,qBAASwB,IAAT,CAAc/D,GAAGoC,CAAH,CAAKlB,CAAL,EAASC,CAAT,CAAd;AACA0C,iBAAK,MAAML,QAAX;AACH;AACDjB,iBAASwB,IAAT,CAAc/D,GAAGoC,CAAH,CAAKL,YAAYb,CAAjB,EAAqBa,YAAYZ,CAAjC,CAAd;;AAEA,aAAKsB,QAAL,CAAcF,QAAd,EAAwBiB,WAAW,CAAnC,EAAsC,KAAtC,EAA6C,KAA7C;AACH,KAjN+E;;AAmNhF;;;;;;AAMAW,oBAAe,wBAAU5C,MAAV,EAAkBiC,QAAlB,EAA4B;AACvC,aAAKY,kBAAL,CAAwB7C,MAAxB,EAAgC,GAAhC,EAAqCiC,QAArC;AACH,KA3N+E;;AA6NhF;;;;;;;AAOAY,wBAAmB,4BAAUC,MAAV,EAAkBC,OAAlB,EAA2Bd,QAA3B,EAAqC;AACpD;AACAxD,WAAGQ,cAAH,CAAkB+D,cAAlB,CAAiC,qBAAjC;AACA,YAAIhD,SAAS,KAAKhB,WAAlB;AACAgB,eAAOK,MAAP,GAAgB,CAAhB;AACA,YAAIQ,CAAJ,EAAOoC,EAAP;AACA,YAAIC,SAAS,MAAMJ,OAAOzC,MAA1B;;AAEA,aAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAI8B,WAAW,CAA/B,EAAkC9B,GAAlC,EAAuC;AACnC,gBAAIgD,KAAKhD,IAAI8B,QAAb;;AAEA;AACA,gBAAIkB,OAAO,CAAX,EAAc;AACVtC,oBAAIiC,OAAOzC,MAAP,GAAgB,CAApB;AACA4C,qBAAK,CAAL;AACH,aAHD,MAGO;AACHpC,oBAAI,IAAKsC,KAAKD,MAAd;AACAD,qBAAK,CAACE,KAAKD,SAASrC,CAAf,IAAoBqC,MAAzB;AACH;;AAED;AACA,gBAAIE,SAAS3E,GAAG4E,gBAAH,CACT5E,GAAG6E,iBAAH,CAAqBR,MAArB,EAA6BjC,IAAI,CAAjC,CADS,EAETpC,GAAG6E,iBAAH,CAAqBR,MAArB,EAA6BjC,IAAI,CAAjC,CAFS,EAGTpC,GAAG6E,iBAAH,CAAqBR,MAArB,EAA6BjC,IAAI,CAAjC,CAHS,EAITpC,GAAG6E,iBAAH,CAAqBR,MAArB,EAA6BjC,IAAI,CAAjC,CAJS,EAKTkC,OALS,EAKAE,EALA,CAAb;AAMAjD,mBAAOwC,IAAP,CAAYY,MAAZ;AACH;AACD,aAAKlC,QAAL,CAAclB,MAAd,EAAsBiC,WAAW,CAAjC,EAAoC,KAApC,EAA2C,KAA3C;AACH,KAlQ+E;;AAoQhF;;;;;;;;;AASAsB,eAAU,mBAAUC,KAAV,EAAiBC,WAAjB,EAA8BC,UAA9B,EAA0CC,SAA1C,EAAqDC,QAArD,EAA+D;AACrE,YAAIxD,MAAMyD,UAAUxD,MAApB;AACA,YAAId,MAAM,KAAKN,cAAL,CAAoBO,UAApB,EAAV;AACA,gBAAQY,GAAR;AACI,iBAAK,CAAL;AACI,oBAAI0D,SAASN,MAAMM,MAAnB;AACAvE,oBAAIgE,SAAJ,CAAcC,KAAd,EAAqBC,YAAY9D,CAAjC,EAAoC,EAAE8D,YAAY7D,CAAZ,GAAgBkE,MAAlB,CAApC;AACA;AACJ,iBAAK,CAAL;AACIvE,oBAAIgE,SAAJ,CAAcC,KAAd,EAAqBC,YAAY9D,CAAjC,EAAoC,EAAE8D,YAAY7D,CAAZ,GAAgB8D,WAAWI,MAA7B,CAApC,EAA0EJ,WAAWK,KAArF,EAA4FL,WAAWI,MAAvG;AACA;AACJ,iBAAK,CAAL;AACIvE,oBAAIgE,SAAJ,CAAcC,KAAd,EAAqBC,YAAY9D,CAAjC,EAAoC8D,YAAY7D,CAAhD,EAAmD8D,WAAWK,KAA9D,EAAqEL,WAAWI,MAAhF,EAAwFH,UAAUhE,CAAlG,EAAqG,EAAEgE,UAAU/D,CAAV,GAAcgE,SAASE,MAAzB,CAArG,EACIF,SAASG,KADb,EACoBH,SAASE,MAD7B;AAEA;AACJ;AACI,sBAAM,IAAIzC,KAAJ,CAAU,0BAAV,CAAN;AACA;AAdR;AAgBH,KAhS+E;;AAkShF;;;;;;AAMA2C,cAAS,kBAAUzE,GAAV,EAAewC,MAAf,EAAuBhB,KAAvB,EAA8B;AACnC,YAAIkD,UAAU1E,OAAO,KAAKN,cAA1B;AACA,YAAIiF,UAAUD,QAAQzE,UAAR,EAAd;AACA,YAAI2E,WAAW,WAAW,IAAIpD,MAAMU,CAArB,IAA0B,GAA1B,IAAiC,IAAIV,MAAMW,CAA3C,IAAgD,GAAhD,IAAuD,IAAIX,MAAMY,CAAjE,CAAf;AACAsC,gBAAQG,YAAR,CAAqBD,WAAW,KAAhC;AACA;AACA,YAAIE,YAAYtC,SAAS,EAAzB;;AAEAmC,gBAAQzE,SAAR;AACAyE,gBAAQzD,MAAR,CAAe,CAACsB,MAAhB,EAAwBA,MAAxB;AACAmC,gBAAQxD,MAAR,CAAe,CAAf,EAAkB2D,SAAlB;AACAH,gBAAQxD,MAAR,CAAeqB,MAAf,EAAuBA,MAAvB;AACAmC,gBAAQxD,MAAR,CAAe2D,SAAf,EAA0B,CAA1B;AACAH,gBAAQxD,MAAR,CAAeqB,MAAf,EAAuB,CAACA,MAAxB;AACAmC,gBAAQxD,MAAR,CAAe,CAAf,EAAkB,CAAC2D,SAAnB;AACAH,gBAAQxD,MAAR,CAAe,CAACqB,MAAhB,EAAwB,CAACA,MAAzB;AACAmC,gBAAQxD,MAAR,CAAe,CAAC2D,SAAhB,EAA2B,CAA3B;AACAH,gBAAQxD,MAAR,CAAe,CAACqB,MAAhB,EAAwBA,MAAxB;AACAmC,gBAAQrE,SAAR;AACAqE,gBAAQpE,IAAR;;AAEA,YAAIwE,KAAKJ,QAAQK,oBAAR,CAA6B,CAA7B,EAAgC,CAAhC,EAAmCF,SAAnC,EAA8C,CAA9C,EAAiD,CAAjD,EAAoDtC,MAApD,CAAT;AACAuC,WAAGE,YAAH,CAAgB,CAAhB,EAAmBL,WAAW,MAA9B;AACAG,WAAGE,YAAH,CAAgB,GAAhB,EAAqBL,WAAW,QAAhC;AACAG,WAAGE,YAAH,CAAgB,GAAhB,EAAqBL,WAAW,QAAhC;AACAF,gBAAQG,YAAR,CAAqBE,EAArB;AACA;AACAJ,gBAAQzE,SAAR;AACA,YAAIgF,eAAe,CAAnB;AACA,YAAIC,aAAajG,GAAGC,GAApB;AACAwF,gBAAQxE,GAAR,CAAY,CAAZ,EAAe,CAAf,EAAkBqC,SAASsC,SAA3B,EAAsCI,YAAtC,EAAoDC,UAApD,EAAgE,KAAhE;AACAR,gBAAQrE,SAAR;AACAqE,gBAAQpE,IAAR;AACH,KAzU+E;;AA2UhF;;;;;;AAMA6E,mBAAc,uBAAUpF,GAAV,EAAewC,MAAf,EAAuBhB,KAAvB,EAA8B;AACxC,YAAIkD,UAAU1E,OAAO,KAAKN,cAA1B;AACA,YAAIiF,UAAUD,QAAQzE,UAAR,EAAd;AACA,YAAI2E,WAAW,WAAU,IAAEpD,MAAMU,CAAlB,IAAuB,GAAvB,IAA8B,IAAEV,MAAMW,CAAtC,IAA2C,GAA3C,IAAkD,IAAEX,MAAMY,CAA1D,CAAf;AACA,YAAI0C,YAAYtC,SAAS,EAAzB;;AAEA,YAAI6C,KAAKV,QAAQK,oBAAR,CAA6B,CAA7B,EAAgC,CAAhC,EAAmCF,SAAnC,EAA8C,CAA9C,EAAiD,CAAjD,EAAoDtC,MAApD,CAAT;AACA6C,WAAGJ,YAAH,CAAgB,CAAhB,EAAmBL,WAAW,MAA9B;AACAS,WAAGJ,YAAH,CAAgB,GAAhB,EAAqBL,WAAW,QAAhC;AACAS,WAAGJ,YAAH,CAAgB,GAAhB,EAAqBL,WAAW,QAAhC;AACAS,WAAGJ,YAAH,CAAgB,GAAhB,EAAqBL,WAAW,QAAhC;AACAF,gBAAQG,YAAR,CAAqBQ,EAArB;AACA;AACAV,gBAAQzE,SAAR;AACA,YAAIgF,eAAe,CAAnB;AACA,YAAIC,aAAajG,GAAGC,GAApB;AACAwF,gBAAQxE,GAAR,CAAY,CAAZ,EAAe,CAAf,EAAkBqC,MAAlB,EAA0B0C,YAA1B,EAAwCC,UAAxC,EAAoD,KAApD;AACAR,gBAAQrE,SAAR;AACAqE,gBAAQpE,IAAR;AACH,KApW+E;;AAsWhF;;;;;;AAMA+E,cAAS,kBAAUC,OAAV,EAAmBnF,CAAnB,EAAsBC,CAAtB,EAAyB;AAC9B,aAAKX,cAAL,CAAoBO,UAApB,GAAiCqF,QAAjC,CAA0CC,OAA1C,EAAmDnF,CAAnD,EAAsD,CAACC,CAAvD;AACH,KA9W+E;;AAgXhF;;;;;;;AAOA4B,kBAAa,sBAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AAC/B,aAAK3C,cAAL,CAAoBmF,YAApB,CAAiC,UAAU3C,CAAV,GAAc,GAAd,GAAoBC,CAApB,GAAwB,GAAxB,GAA8BC,CAA9B,GAAkC,GAAlC,GAAwCC,IAAI,GAA5C,GAAkD,GAAnF;AACA,aAAK3C,cAAL,CAAoB+D,cAApB,CAAmC,UAAUvB,CAAV,GAAc,GAAd,GAAoBC,CAApB,GAAwB,GAAxB,GAA8BC,CAA9B,GAAkC,GAAlC,GAAwCC,IAAI,GAA5C,GAAkD,GAArF;AACH,KA1X+E;;AA4XhF;;;;AAIAmD,kBAAa,sBAAUC,SAAV,EAAqB,CACjC,CAjY+E;;AAmYhF;;;;AAIAC,kBAAa,sBAAUlB,KAAV,EAAiB;AAC1B,aAAK9E,cAAL,CAAoBO,UAApB,GAAiC0F,SAAjC,GAA6CnB,KAA7C;AACH;AAzY+E,CAAxD,CAA5B","file":"CCDrawingPrimitivesCanvas.js","sourceRoot":"../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/core","sourcesContent":["/****************************************************************************\n Copyright (c) 2008-2010 Ricardo Quesada\n Copyright (c) 2011-2012 cocos2d-x.org\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n\n http://www.cocos2d-x.org\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n/**\n * @const\n * @type {number}\n */\ncc.PI2 = Math.PI * 2;\n\n/**\n * Canvas of DrawingPrimitive implement version use for canvasMode\n * @class\n * @extends cc.Class\n * @param {CanvasRenderingContext2D} renderContext\n */\ncc.DrawingPrimitiveCanvas = cc.Class.extend(/** @lends cc.DrawingPrimitiveCanvas# */{\n    _cacheArray:[],\n    _renderContext:null,\n    /**\n     * Constructor of cc.DrawingPrimitiveCanvas\n     * @param {cc.CanvasContextWrapper} renderContext\n     */\n    ctor:function (renderContext) {\n        this._renderContext = renderContext;\n    },\n\n    /**\n     * draws a point given x and y coordinate measured in points\n     * @override\n     * @param {cc.Point} point\n     * @param {Number} size\n     */\n    drawPoint:function (point, size) {\n        if (!size) {\n            size = 1;\n        }\n        var ctx = this._renderContext.getContext();\n        ctx.beginPath();\n        ctx.arc(point.x, -point.y, size, 0, Math.PI * 2, false);\n        ctx.closePath();\n        ctx.fill();\n    },\n\n    /**\n     * draws an array of points.\n     * @override\n     * @param {Array} points point of array\n     * @param {Number} numberOfPoints\n     * @param {Number} size\n     */\n    drawPoints:function (points, numberOfPoints, size) {\n        if (points == null)\n            return;\n\n        if (!size) {\n            size = 1;\n        }\n        var locContext = this._renderContext.getContext();\n\n        locContext.beginPath();\n        for (var i = 0, len = points.length; i < len; i++)\n            locContext.arc(points[i].x, -points[i].y, size, 0, Math.PI * 2, false);\n        locContext.closePath();\n        locContext.fill();\n    },\n\n    /**\n     * draws a line given the origin and destination point measured in points\n     * @override\n     * @param {cc.Point} origin\n     * @param {cc.Point} destination\n     */\n    drawLine:function (origin, destination) {\n        var locContext = this._renderContext.getContext();\n        locContext.beginPath();\n        locContext.moveTo(origin.x , -origin.y );\n        locContext.lineTo(destination.x, -destination.y );\n        locContext.closePath();\n        locContext.stroke();\n    },\n\n    /**\n     * draws a rectangle given the origin and destination point measured in points.\n     * @param {cc.Point} origin\n     * @param {cc.Point} destination\n     */\n    drawRect:function (origin, destination) {\n        //todo need optimize for performance\n        this.drawLine(cc.p(origin.x, origin.y), cc.p(destination.x, origin.y));\n        this.drawLine(cc.p(destination.x, origin.y), cc.p(destination.x, destination.y));\n        this.drawLine(cc.p(destination.x, destination.y), cc.p(origin.x, destination.y));\n        this.drawLine(cc.p(origin.x, destination.y), cc.p(origin.x, origin.y));\n    },\n\n    /**\n     * draws a solid rectangle given the origin and destination point measured in points.\n     * @param {cc.Point} origin\n     * @param {cc.Point} destination\n     * @param {cc.Color} color\n     */\n    drawSolidRect:function (origin, destination, color) {\n        var vertices = [\n            origin,\n            cc.p(destination.x, origin.y),\n            destination,\n            cc.p(origin.x, destination.y)\n        ];\n\n        this.drawSolidPoly(vertices, 4, color);\n    },\n\n    /**\n     * draws a polygon given a pointer to cc.Point coordinates and the number of vertices measured in points.\n     * @override\n     * @param {Array} vertices a pointer to cc.Point coordinates\n     * @param {Number} numOfVertices the number of vertices measured in points\n     * @param {Boolean} closePolygon The polygon can be closed or open\n     * @param {Boolean} [fill=] The polygon can be closed or open and optionally filled with current color\n     */\n    drawPoly:function (vertices, numOfVertices, closePolygon, fill) {\n        fill = fill || false;\n\n        if (vertices == null)\n            return;\n\n        if (vertices.length < 3)\n            throw new Error(\"Polygon's point must greater than 2\");\n\n        var firstPoint = vertices[0], locContext = this._renderContext.getContext();\n        locContext.beginPath();\n        locContext.moveTo(firstPoint.x , -firstPoint.y );\n        for (var i = 1, len = vertices.length; i < len; i++)\n            locContext.lineTo(vertices[i].x , -vertices[i].y );\n\n        if (closePolygon)\n            locContext.closePath();\n\n        if (fill)\n            locContext.fill();\n        else\n            locContext.stroke();\n    },\n\n    /**\n     * draws a solid polygon given a pointer to CGPoint coordinates, the number of vertices measured in points, and a color.\n     * @param {Array} polygons\n     * @param {Number} numberOfPoints\n     * @param {cc.Color} color\n     */\n    drawSolidPoly:function (polygons, numberOfPoints, color) {\n        this.setDrawColor(color.r, color.g, color.b, color.a);\n        this.drawPoly(polygons, numberOfPoints, true, true);\n    },\n\n    /**\n     * draws a circle given the center, radius and number of segments.\n     * @override\n     * @param {cc.Point} center center of circle\n     * @param {Number} radius\n     * @param {Number} angle angle in radians\n     * @param {Number} segments\n     * @param {Boolean} [drawLineToCenter=]\n     */\n    drawCircle: function (center, radius, angle, segments, drawLineToCenter) {\n        drawLineToCenter = drawLineToCenter || false;\n        var locContext = this._renderContext.getContext();\n        locContext.beginPath();\n        var endAngle = angle - Math.PI * 2;\n        locContext.arc(0 | (center.x ), 0 | -(center.y ), radius , -angle, -endAngle, false);\n        if (drawLineToCenter) {\n            locContext.lineTo(0 | (center.x ), 0 | -(center.y ));\n        }\n        locContext.stroke();\n    },\n\n    /**\n     * draws a quad bezier path\n     * @override\n     * @param {cc.Point} origin\n     * @param {cc.Point} control\n     * @param {cc.Point} destination\n     * @param {Number} segments\n     */\n    drawQuadBezier:function (origin, control, destination, segments) {\n        //this is OpenGL Algorithm\n        var vertices = this._cacheArray;\n        vertices.length =0;\n\n        var t = 0.0;\n        for (var i = 0; i < segments; i++) {\n            var x = Math.pow(1 - t, 2) * origin.x + 2.0 * (1 - t) * t * control.x + t * t * destination.x;\n            var y = Math.pow(1 - t, 2) * origin.y + 2.0 * (1 - t) * t * control.y + t * t * destination.y;\n            vertices.push(cc.p(x, y));\n            t += 1.0 / segments;\n        }\n        vertices.push(cc.p(destination.x, destination.y));\n\n        this.drawPoly(vertices, segments + 1, false, false);\n    },\n\n    /**\n     * draws a cubic bezier path\n     * @override\n     * @param {cc.Point} origin\n     * @param {cc.Point} control1\n     * @param {cc.Point} control2\n     * @param {cc.Point} destination\n     * @param {Number} segments\n     */\n    drawCubicBezier:function (origin, control1, control2, destination, segments) {\n        //this is OpenGL Algorithm\n        var vertices = this._cacheArray;\n        vertices.length =0;\n\n        var t = 0;\n        for (var i = 0; i < segments; i++) {\n            var x = Math.pow(1 - t, 3) * origin.x + 3.0 * Math.pow(1 - t, 2) * t * control1.x + 3.0 * (1 - t) * t * t * control2.x + t * t * t * destination.x;\n            var y = Math.pow(1 - t, 3) * origin.y + 3.0 * Math.pow(1 - t, 2) * t * control1.y + 3.0 * (1 - t) * t * t * control2.y + t * t * t * destination.y;\n            vertices.push(cc.p(x , y ));\n            t += 1.0 / segments;\n        }\n        vertices.push(cc.p(destination.x , destination.y));\n\n        this.drawPoly(vertices, segments + 1, false, false);\n    },\n\n    /**\n     * draw a CatmullRom curve\n     * @override\n     * @param {Array} points\n     * @param {Number} segments\n     */\n    drawCatmullRom:function (points, segments) {\n        this.drawCardinalSpline(points, 0.5, segments);\n    },\n\n    /**\n     * draw a cardinal spline path\n     * @override\n     * @param {Array} config\n     * @param {Number} tension\n     * @param {Number} segments\n     */\n    drawCardinalSpline:function (config, tension, segments) {\n        //lazy_init();\n        cc._renderContext.setStrokeStyle(\"rgba(255,255,255,1)\");\n        var points = this._cacheArray;\n        points.length = 0;\n        var p, lt;\n        var deltaT = 1.0 / config.length;\n\n        for (var i = 0; i < segments + 1; i++) {\n            var dt = i / segments;\n\n            // border\n            if (dt === 1) {\n                p = config.length - 1;\n                lt = 1;\n            } else {\n                p = 0 | (dt / deltaT);\n                lt = (dt - deltaT * p) / deltaT;\n            }\n\n            // Interpolate\n            var newPos = cc.CardinalSplineAt(\n                cc.getControlPointAt(config, p - 1),\n                cc.getControlPointAt(config, p - 0),\n                cc.getControlPointAt(config, p + 1),\n                cc.getControlPointAt(config, p + 2),\n                tension, lt);\n            points.push(newPos);\n        }\n        this.drawPoly(points, segments + 1, false, false);\n    },\n\n    /**\n     * draw an image\n     * @override\n     * @param {HTMLImageElement|HTMLCanvasElement} image\n     * @param {cc.Point} sourcePoint\n     * @param {cc.Size} sourceSize\n     * @param {cc.Point} destPoint\n     * @param {cc.Size} destSize\n     */\n    drawImage:function (image, sourcePoint, sourceSize, destPoint, destSize) {\n        var len = arguments.length;\n        var ctx = this._renderContext.getContext();\n        switch (len) {\n            case 2:\n                var height = image.height;\n                ctx.drawImage(image, sourcePoint.x, -(sourcePoint.y + height));\n                break;\n            case 3:\n                ctx.drawImage(image, sourcePoint.x, -(sourcePoint.y + sourceSize.height), sourceSize.width, sourceSize.height);\n                break;\n            case 5:\n                ctx.drawImage(image, sourcePoint.x, sourcePoint.y, sourceSize.width, sourceSize.height, destPoint.x, -(destPoint.y + destSize.height),\n                    destSize.width, destSize.height);\n                break;\n            default:\n                throw new Error(\"Argument must be non-nil\");\n                break;\n        }\n    },\n\n    /**\n     * draw a star\n     * @param {cc.CanvasContextWrapper} ctx canvas context\n     * @param {Number} radius\n     * @param {cc.Color} color\n     */\n    drawStar:function (ctx, radius, color) {\n        var wrapper = ctx || this._renderContext;\n        var context = wrapper.getContext();\n        var colorStr = \"rgba(\" + (0 | color.r) + \",\" + (0 | color.g) + \",\" + (0 | color.b);\n        wrapper.setFillStyle(colorStr + \",1)\");\n        //context.fillStyle = colorStr + \",1)\";\n        var subRadius = radius / 10;\n\n        context.beginPath();\n        context.moveTo(-radius, radius);\n        context.lineTo(0, subRadius);\n        context.lineTo(radius, radius);\n        context.lineTo(subRadius, 0);\n        context.lineTo(radius, -radius);\n        context.lineTo(0, -subRadius);\n        context.lineTo(-radius, -radius);\n        context.lineTo(-subRadius, 0);\n        context.lineTo(-radius, radius);\n        context.closePath();\n        context.fill();\n\n        var rg = context.createRadialGradient(0, 0, subRadius, 0, 0, radius);\n        rg.addColorStop(0, colorStr + \", 1)\");\n        rg.addColorStop(0.3, colorStr + \", 0.8)\");\n        rg.addColorStop(1.0, colorStr + \", 0.0)\");\n        wrapper.setFillStyle(rg);\n        //context.fillStyle = g1;\n        context.beginPath();\n        var startAngle_1 = 0;\n        var endAngle_1 = cc.PI2;\n        context.arc(0, 0, radius - subRadius, startAngle_1, endAngle_1, false);\n        context.closePath();\n        context.fill();\n    },\n\n    /**\n     * draw a color ball\n     * @param {cc.CanvasContextWrapper} ctx canvas context\n     * @param {Number} radius\n     * @param {cc.Color} color\n     */\n    drawColorBall:function (ctx, radius, color) {\n        var wrapper = ctx || this._renderContext;\n        var context = wrapper.getContext();\n        var colorStr = \"rgba(\" +(0|color.r) + \",\" + (0|color.g) + \",\" + (0|color.b);\n        var subRadius = radius / 10;\n\n        var g1 = context.createRadialGradient(0, 0, subRadius, 0, 0, radius);\n        g1.addColorStop(0, colorStr + \", 1)\");\n        g1.addColorStop(0.3, colorStr + \", 0.8)\");\n        g1.addColorStop(0.6, colorStr + \", 0.4)\");\n        g1.addColorStop(1.0, colorStr + \", 0.0)\");\n        wrapper.setFillStyle(g1);\n        //context.fillStyle = g1;\n        context.beginPath();\n        var startAngle_1 = 0;\n        var endAngle_1 = cc.PI2;\n        context.arc(0, 0, radius, startAngle_1, endAngle_1, false);\n        context.closePath();\n        context.fill();\n    },\n\n    /**\n     * fill text\n     * @param {String} strText\n     * @param {Number} x\n     * @param {Number} y\n     */\n    fillText:function (strText, x, y) {\n        this._renderContext.getContext().fillText(strText, x, -y);\n    },\n\n    /**\n     * set the drawing color with 4 unsigned bytes\n     * @param {Number} r red value (0 to 255)\n     * @param {Number} g green value (0 to 255)\n     * @param {Number} b blue value (0 to 255)\n     * @param {Number} a Alpha value (0 to 255)\n     */\n    setDrawColor:function (r, g, b, a) {\n        this._renderContext.setFillStyle(\"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a / 255 + \")\");\n        this._renderContext.setStrokeStyle(\"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a / 255 + \")\");\n    },\n\n    /**\n     * set the point size in points. Default 1.\n     * @param {Number} pointSize\n     */\n    setPointSize:function (pointSize) {\n    },\n\n    /**\n     * set the line width. Default 1.\n     * @param {Number} width\n     */\n    setLineWidth:function (width) {\n        this._renderContext.getContext().lineWidth = width;\n    }\n});"]}