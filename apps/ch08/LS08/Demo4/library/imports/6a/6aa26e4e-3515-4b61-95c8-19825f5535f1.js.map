{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/kmMat4IsIdentity.js"],"names":["kernelConfig","kernelName","kernelInit","init","kernelCleanup","cleanup","kernelSimd","simd","kernelNonSimd","nonSimd","kernelIterations","benchmarks","add","Benchmark","T1","cc","kmMat4","T1x4","isIdentity","isIdentitySIMD","equals","A","B","i","mat","n"],"mappings":";;;;;;AAAA;;AAEC,aAAY;;AAEX;AACA,MAAIA,eAAe;AACjBC,gBAAkB,kBADD;AAEjBC,gBAAkBC,IAFD;AAGjBC,mBAAkBC,OAHD;AAIjBC,gBAAkBC,IAJD;AAKjBC,mBAAkBC,OALD;AAMjBC,sBAAkB;AAND,GAAnB;;AASA;AACAC,aAAWC,GAAX,CAAe,IAAIC,SAAJ,CAAcb,YAAd,CAAf;;AAEA;AACA,MAAIc,KAAK,IAAIC,GAAGC,MAAP,EAAT;AACA,MAAIC,OAAO,IAAIF,GAAGC,MAAP,EAAX;AACA,MAAIE,UAAJ,EAAgBC,cAAhB;;AAEA,WAASC,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AACpB,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwB,EAAEA,CAA1B,EAA6B;AAC3B,UAAIF,EAAEE,CAAF,KAAQD,EAAEC,CAAF,CAAZ,EACE,OAAO,KAAP;AACH;AACD,WAAO,IAAP;AACD;;AAED,WAASpB,IAAT,GAAgB;AACdW,OAAGU,GAAH,CAAO,CAAP,IAAY,GAAZ;AACAV,OAAGU,GAAH,CAAO,CAAP,IAAY,GAAZ;AACAV,OAAGU,GAAH,CAAO,EAAP,IAAa,GAAb;AACAV,OAAGU,GAAH,CAAO,EAAP,IAAa,GAAb;;AAEAP,SAAKO,GAAL,CAAS,CAAT,IAAc,GAAd;AACAP,SAAKO,GAAL,CAAS,CAAT,IAAc,GAAd;AACAP,SAAKO,GAAL,CAAS,EAAT,IAAe,GAAf;AACAP,SAAKO,GAAL,CAAS,EAAT,IAAe,GAAf;;AAEAf,YAAQ,CAAR;AACAF,SAAK,CAAL;;AAEA,WAAOa,OAAON,GAAGU,GAAV,EAAeP,KAAKO,GAApB,KAA6BN,eAAeC,cAAnD;AAED;;AAED,WAASd,OAAT,GAAmB;AACjB,WAAOF,MAAP,CADiB,CACF;AAChB;;AAED,WAASM,OAAT,CAAiBgB,CAAjB,EAAoB;AAClB,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAIE,CAApB,EAAuBF,GAAvB,EAA4B;AAC1BL,mBAAaJ,GAAGI,UAAH,EAAb;AACD;AACF;;AAED,WAASX,IAAT,CAAckB,CAAd,EAAiB;AACf,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAIE,CAApB,EAAuBF,GAAvB,EAA4B;AAC1BJ,uBAAiBF,KAAKE,cAAL,EAAjB;AACD;AACF;AAEF,CA9DA,GAAD","file":"kmMat4IsIdentity.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark","sourcesContent":["// kmMat4IsIdentity\n\n(function () {\n\n  // Kernel configuration\n  var kernelConfig = {\n    kernelName:       \"kmMat4IsIdentity\",\n    kernelInit:       init,\n    kernelCleanup:    cleanup,\n    kernelSimd:       simd,\n    kernelNonSimd:    nonSimd,\n    kernelIterations: 10000\n  };\n\n  // Hook up to the harness\n  benchmarks.add(new Benchmark(kernelConfig));\n\n  // Benchmark data, initialization and kernel functions\n  var T1 = new cc.kmMat4();\n  var T1x4 = new cc.kmMat4();\n  var isIdentity, isIdentitySIMD;\n\n  function equals(A, B) {\n    for (var i = 0; i < 16; ++i) {\n      if (A[i] != B[i])\n        return false;\n    }\n    return true;\n  }\n\n  function init() {\n    T1.mat[0] = 1.0;\n    T1.mat[5] = 1.0;\n    T1.mat[10] = 1.0;\n    T1.mat[15] = 1.0;\n\n    T1x4.mat[0] = 1.0;\n    T1x4.mat[5] = 1.0;\n    T1x4.mat[10] = 1.0;\n    T1x4.mat[15] = 1.0;\n\n    nonSimd(1);\n    simd(1);\n\n    return equals(T1.mat, T1x4.mat) && (isIdentity === isIdentitySIMD);\n    \n  }\n\n  function cleanup() {\n    return init(); // Sanity checking before and after are the same\n  }\n\n  function nonSimd(n) {\n    for (var i = 0; i < n; i++) {\n      isIdentity = T1.isIdentity();\n    }\n  }\n\n  function simd(n) {\n    for (var i = 0; i < n; i++) {\n      isIdentitySIMD = T1x4.isIdentitySIMD();\n    }\n  }\n\n} ());\n"]}