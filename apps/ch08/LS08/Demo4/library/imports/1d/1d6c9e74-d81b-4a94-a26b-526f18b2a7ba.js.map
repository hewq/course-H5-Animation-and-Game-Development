{"version":3,"sources":["../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/shaders/assets/frameworks/cocos2d-html5/cocos2d/shaders/CCShaderCache.js"],"names":["cc","shaderCache","TYPE_POSITION_TEXTURECOLOR","TYPE_POSITION_TEXTURECOLOR_ALPHATEST","TYPE_POSITION_COLOR","TYPE_POSITION_TEXTURE","TYPE_POSITION_TEXTURE_UCOLOR","TYPE_POSITION_TEXTURE_A8COLOR","TYPE_POSITION_UCOLOR","TYPE_POSITION_LENGTH_TEXTURECOLOR","TYPE_SPRITE_POSITION_TEXTURECOLOR","TYPE_SPRITE_POSITION_TEXTURECOLOR_ALPHATEST","TYPE_SPRITE_POSITION_COLOR","TYPE_SPRITE_POSITION_TEXTURECOLOR_GRAY","TYPE_MAX","_keyMap","SHADER_POSITION_TEXTURECOLOR","SHADER_POSITION_TEXTURECOLORALPHATEST","SHADER_POSITION_COLOR","SHADER_POSITION_TEXTURE","SHADER_POSITION_TEXTURE_UCOLOR","SHADER_POSITION_TEXTUREA8COLOR","SHADER_POSITION_UCOLOR","SHADER_POSITION_LENGTHTEXTURECOLOR","SHADER_SPRITE_POSITION_TEXTURECOLOR","SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST","SHADER_SPRITE_POSITION_COLOR","SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY","_programs","_init","loadDefaultShaders","_loadDefaultShader","program","type","initWithVertexShaderByteArray","SHADER_POSITION_TEXTURE_COLOR_VERT","SHADER_POSITION_TEXTURE_COLOR_FRAG","addAttribute","ATTRIBUTE_NAME_POSITION","VERTEX_ATTRIB_POSITION","ATTRIBUTE_NAME_COLOR","VERTEX_ATTRIB_COLOR","ATTRIBUTE_NAME_TEX_COORD","VERTEX_ATTRIB_TEX_COORDS","SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT","SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG","SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG","SHADER_POSITION_COLOR_VERT","SHADER_POSITION_COLOR_FRAG","SHADER_SPRITE_POSITION_COLOR_VERT","SHADER_POSITION_TEXTURE_VERT","SHADER_POSITION_TEXTURE_FRAG","SHADER_POSITION_TEXTURE_UCOLOR_VERT","SHADER_POSITION_TEXTURE_UCOLOR_FRAG","SHADER_POSITION_TEXTURE_A8COLOR_VERT","SHADER_POSITION_TEXTURE_A8COLOR_FRAG","SHADER_POSITION_UCOLOR_VERT","SHADER_POSITION_UCOLOR_FRAG","SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT","SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG","log","link","updateUniforms","i","key","programForKey","reloadDefaultShaders","reset","GLProgram","getProgram","shaderName","addProgram"],"mappings":"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","file":"CCShaderCache.js","sourceRoot":"../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/shaders","sourcesContent":["/****************************************************************************\n Copyright (c) 2008-2010 Ricardo Quesada\n Copyright (c) 2011-2012 cocos2d-x.org\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n\n http://www.cocos2d-x.org\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n\n/**\n * cc.shaderCache is a singleton object that stores manages GL shaders\n * @class\n * @name cc.shaderCache\n */\ncc.shaderCache = /** @lends cc.shaderCache# */{\n\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_TEXTURECOLOR: 0,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_TEXTURECOLOR_ALPHATEST: 1,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_COLOR: 2,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_TEXTURE: 3,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_TEXTURE_UCOLOR: 4,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_TEXTURE_A8COLOR: 5,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_UCOLOR: 6,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_POSITION_LENGTH_TEXTURECOLOR: 7,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_SPRITE_POSITION_TEXTURECOLOR: 8,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_SPRITE_POSITION_TEXTURECOLOR_ALPHATEST: 9,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_SPRITE_POSITION_COLOR: 10,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_SPRITE_POSITION_TEXTURECOLOR_GRAY: 11,\n    /**\n     * @public\n     * @constant\n     * @type {Number}\n     */\n    TYPE_MAX: 11,\n\n    _keyMap: [\n        cc.SHADER_POSITION_TEXTURECOLOR,\n        cc.SHADER_POSITION_TEXTURECOLORALPHATEST,\n        cc.SHADER_POSITION_COLOR,\n        cc.SHADER_POSITION_TEXTURE,\n        cc.SHADER_POSITION_TEXTURE_UCOLOR,\n        cc.SHADER_POSITION_TEXTUREA8COLOR,\n        cc.SHADER_POSITION_UCOLOR,\n        cc.SHADER_POSITION_LENGTHTEXTURECOLOR,\n        cc.SHADER_SPRITE_POSITION_TEXTURECOLOR,\n        cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST,\n        cc.SHADER_SPRITE_POSITION_COLOR,\n        cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY\n    ],\n\n    _programs: {},\n\n    _init: function () {\n        this.loadDefaultShaders();\n        return true;\n    },\n\n    _loadDefaultShader: function (program, type) {\n        switch (type) {\n            case cc.SHADER_POSITION_TEXTURECOLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_POSITION_TEXTURE_COLOR_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                break;\n            case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_POSITION_TEXTURE_COLOR_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n              break;\n            case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY:\n              program.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);\n              program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n              program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n              program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n              break;\n            case cc.SHADER_POSITION_TEXTURECOLORALPHATEST:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                break;\n            case cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST:\n                program.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT, cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                break;\n            case cc.SHADER_POSITION_COLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_COLOR_VERT, cc.SHADER_POSITION_COLOR_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                break;\n            case cc.SHADER_SPRITE_POSITION_COLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_COLOR_VERT, cc.SHADER_POSITION_COLOR_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                break;\n            case cc.SHADER_POSITION_TEXTURE:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_VERT, cc.SHADER_POSITION_TEXTURE_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                break;\n            case cc.SHADER_POSITION_TEXTURE_UCOLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT, cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                break;\n            case cc.SHADER_POSITION_TEXTUREA8COLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT, cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                break;\n            case cc.SHADER_POSITION_UCOLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_UCOLOR_VERT, cc.SHADER_POSITION_UCOLOR_FRAG);\n                program.addAttribute(\"aVertex\", cc.VERTEX_ATTRIB_POSITION);\n                break;\n            case cc.SHADER_POSITION_LENGTHTEXTURECOLOR:\n                program.initWithVertexShaderByteArray(cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT, cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG);\n                program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n                program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n                program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n                break;\n            default:\n                cc.log(\"cocos2d: cc.shaderCache._loadDefaultShader, error shader type\");\n                return;\n        }\n\n        program.link();\n        program.updateUniforms();\n\n        //cc.checkGLErrorDebug();\n    },\n\n    /**\n     * loads the default shaders\n     */\n    loadDefaultShaders: function () {\n        for (var i = 0; i < this.TYPE_MAX; ++i) {\n            var key = this._keyMap[i];\n            this.programForKey(key);\n        }\n    },\n\n    /**\n     * reload the default shaders\n     */\n    reloadDefaultShaders: function () {\n        // reset all programs and reload them\n\n        // Position Texture Color shader\n        var program = this.programForKey(cc.SHADER_POSITION_TEXTURECOLOR);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_TEXTURECOLOR);\n\n        // Sprite Position Texture Color shader\n        program = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);\n\n        // Position Texture Color alpha test\n        program = this.programForKey(cc.SHADER_POSITION_TEXTURECOLORALPHATEST);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_TEXTURECOLORALPHATEST);\n\n        // Sprite Position Texture Color alpha shader\n        program = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);\n\n        //\n        // Position, Color shader\n        //\n        program = this.programForKey(cc.SHADER_POSITION_COLOR);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_COLOR);\n\n        //\n        // Position Texture shader\n        //\n        program = this.programForKey(cc.SHADER_POSITION_TEXTURE);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_TEXTURE);\n\n        //Position Texture Gray shader\n        program = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);\n\n        //\n        // Position, Texture attribs, 1 Color as uniform shader\n        //\n        program = this.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_TEXTURE_UCOLOR);\n\n        //\n        // Position Texture A8 Color shader\n        //\n        program = this.programForKey(cc.SHADER_POSITION_TEXTUREA8COLOR);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_TEXTUREA8COLOR);\n\n        //\n        // Position and 1 color passed as a uniform (to similate glColor4ub )\n        //\n        program = this.programForKey(cc.SHADER_POSITION_UCOLOR);\n        program.reset();\n        this._loadDefaultShader(program, cc.SHADER_POSITION_UCOLOR);\n    },\n\n    /**\n     * returns a GL program for a given key\n     * @param {String} key\n     */\n    programForKey: function (key) {\n        if (!this._programs[key]) {\n            var program = new cc.GLProgram();\n            this._loadDefaultShader(program, key);\n            this._programs[key] = program;\n        }\n\n        return this._programs[key];\n    },\n\n    /**\n     * returns a GL program for a shader name\n     * @param {String} shaderName\n     * @return {cc.GLProgram}\n     */\n    getProgram: function (shaderName) {\n        return this.programForKey(shaderName);\n    },\n\n    /**\n     * adds a CCGLProgram to the cache for a given name\n     * @param {cc.GLProgram} program\n     * @param {String} key\n     */\n    addProgram: function (program, key) {\n        this._programs[key] = program;\n    }\n};\n"]}