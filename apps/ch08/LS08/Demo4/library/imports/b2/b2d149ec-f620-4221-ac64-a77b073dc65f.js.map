{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/kmMat4LookAt.js"],"names":["kernelConfig","kernelName","kernelInit","init","kernelCleanup","cleanup","kernelSimd","simd","kernelNonSimd","nonSimd","kernelIterations","benchmarks","add","Benchmark","eye","cc","kmVec3","center","up","T1","kmMat4","eye1","center1","up1","T1x4","printMatrix","matrix","print","r","str","ri","c","value","toFixed","equals","A","B","i","Math","abs","fill","mat","n","lookAt","lookAtSIMD"],"mappings":"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","file":"kmMat4LookAt.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark","sourcesContent":["// kmMat4LookAt\n\n(function () {\n\n  // Kernel configuration\n  var kernelConfig = {\n    kernelName:       \"kmMat4LookAt\",\n    kernelInit:       init,\n    kernelCleanup:    cleanup,\n    kernelSimd:       simd,\n    kernelNonSimd:    nonSimd,\n    kernelIterations: 10000\n  };\n\n  // Hook up to the harness\n  benchmarks.add(new Benchmark(kernelConfig));\n\n  // Benchmark data, initialization and kernel functions\n  var eye = new cc.kmVec3(), center = new cc.kmVec3(), up = new cc.kmVec3();\n  var T1 = new cc.kmMat4();\n  var eye1 = new cc.kmVec3(), center1 = new cc.kmVec3(), up1 = new cc.kmVec3();\n  var T1x4 = new cc.kmMat4();\n\n  function printMatrix(matrix) {\n    print('--------matrix----------');\n    for (var r = 0; r < 4; ++r) {\n      var str = \"\";\n      var ri = r*4;\n      for (var c = 0; c < 4; ++c) {\n        var value = matrix[ri + c];\n        str += \" \" + value.toFixed(2);\n      }\n      print(str);\n    }\n  }\n\n  function equals(A, B) {\n    for (var i = 0; i < 16; ++i) {\n      if (Math.abs (A[i] - B[i]) > 0.001) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function init() {\n    \n    eye.fill(0, 1, 2);\n    center.fill(2, 1, 0);\n    up.fill(1, 1, 1);\n\n    eye1.fill(0, 1, 2);\n    center1.fill(2, 1, 0);\n    up1.fill(1, 1, 1);\n    /*\n    eye1.data[0] = 0;\n    eye1.data[1] = 1;\n    eye1.data[2] = 2;\n\n    center1.data[0] = 2;\n    center1.data[1] = 1;\n    center1.data[2] = 0;\n\n    up1.data[0] = 1;\n    up1.data[1] = 1;\n    up1.data[2] = 1;\n    */\n    nonSimd(1);\n    //printMatrix(T1.mat);\n    simd(1);\n    //printMatrix(T1x4.mat);\n\n    return equals(T1.mat, T1x4.mat);\n  }\n\n  function cleanup() {\n    return init(); // Sanity checking before and after are the same\n  }\n\n  function nonSimd(n) {\n    for (var i = 0; i < n; i++) {\n      //cc.kmMat4LookAt(T1, eye, center, up);\n      T1.lookAt(eye, center, up);\n    }\n  }\n\n  function simd(n) {\n    for (var i = 0; i < n; i++) {\n      //cc.kmMat4LookAtSIMD(T1x4, eye1, center1, up1);\n      T1x4.lookAtSIMD(eye1, center1, up1);\n    }\n  }\n\n} ());\n"]}