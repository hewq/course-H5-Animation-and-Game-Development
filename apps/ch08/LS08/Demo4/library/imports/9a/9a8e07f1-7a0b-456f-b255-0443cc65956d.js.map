{"version":3,"sources":["../../../../../../../../../assets/frameworks/cocos2d-html5/extensions/cocostudio/loader/parsers/assets/frameworks/cocos2d-html5/extensions/cocostudio/loader/parsers/action-2.x.js"],"names":["load","baseParser","Parser","extend","getNodeJson","json","parseNode","resourcePath","file","self","action","ccs","ActionTimeline","setDuration","setTimeSpeed","timelines","forEach","timeline","parser","parsers","frame","call","cc","log","addTimeline","deferred","animationlist","length","i","animationdata","info","name","startIndex","endIndex","addAnimationInfo","frameList","handle","options","PositionFrame","x","y","setPosition","p","VisibleFrame","visible","setVisible","ScaleFrame","scalex","scaley","setScaleX","setScaleY","RotationFrame","rotation","setRotation","SkewFrame","skewx","skewy","setSkewX","setSkewY","RotationSkewFrame","AnchorPointFrame","anchorx","anchory","setAnchorPoint","InnerActionFrame","type","startFrame","setInnerActionType","setStartFrameIndex","ColorFrame","color","undefined","setColor","AlphaFrame","alpha","setAlpha","texture","plist","path","spriteFrame","TextureFrame","spriteFrameCache","getSpriteFrame","loader","getRes","addSpriteFrames","setTextureName","EventFrame","evnt","setEvent","ZOrderFrame","zorder","setZOrder","innerActionType","currentAnimationFrame","singleFrameIndex","frameIndex","setFrameIndex","InnerActionType","setSingleFrameIndex","setEnterWithName","setAnimationName","BlendFuncFrame","blendFunc","setBlendFunc","BlendFunc","loadEasingDataWithFlatBuffers","setTweenType","points","result","push","setEasingParams","item","registerParser","Timeline","setActionTag","frames","frameData","tween","setTween","easingData","addFrame","_load","_parser"],"mappings":"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","file":"action-2.x.js","sourceRoot":"../../../../../../../../../assets/frameworks/cocos2d-html5/extensions/cocostudio/loader/parsers","sourcesContent":["/****************************************************************************\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n\n http://www.cocos2d-x.org\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n\n(function(load, baseParser){\n\n    var Parser = baseParser.extend({\n\n        getNodeJson: function(json){\n            return json[\"Content\"][\"Content\"][\"Animation\"];\n        },\n\n        parseNode: function(json, resourcePath, file){\n            if(!json)\n                return null;\n\n            var self = this,\n                action = new ccs.ActionTimeline();\n\n            action.setDuration(json[\"Duration\"]);\n            action.setTimeSpeed(json[\"Speed\"] || 1);\n\n            //The process of analysis\n            var timelines = json[\"Timelines\"];\n            timelines.forEach(function(timeline){\n                var parser = self.parsers[timeline[\"Property\"]];\n                var frame;\n                if(parser)\n                    frame = parser.call(self, timeline, resourcePath);\n                else\n                    cc.log(\"parser does not exist : %s\", timeline[\"Property\"]);\n                if(frame)\n                    action.addTimeline(frame);\n            });\n\n            return action;\n        },\n\n        deferred: function(json, resourcePath, action, file){\n            var animationlist = json[\"Content\"][\"Content\"][\"AnimationList\"];\n            var length = animationlist ? animationlist.length : 0;\n            for (var i = 0; i < length; i++){\n                var animationdata = animationlist[i];\n                var info = { name: null, startIndex: null, endIndex: null };\n                info.name = animationdata[\"Name\"];\n                info.startIndex = animationdata[\"StartIndex\"];\n                info.endIndex = animationdata[\"EndIndex\"];\n                action.addAnimationInfo(info);\n            }\n        }\n\n    });\n    var parser = new Parser();\n\n    var frameList = [\n        {\n            name: \"Position\",\n            handle: function(options){\n                var frame = new ccs.PositionFrame();\n                var x = options[\"X\"];\n                var y = options[\"Y\"];\n                frame.setPosition(cc.p(x,y));\n                return frame;\n            }\n        },\n        {\n            name: \"VisibleForFrame\",\n            handle: function(options){\n                var frame = new ccs.VisibleFrame();\n                var visible = options[\"Value\"];\n                frame.setVisible(visible);\n                return frame;\n            }\n        },\n        {\n            name: \"Scale\",\n            handle: function(options){\n                var frame = new ccs.ScaleFrame();\n                var scalex = options[\"X\"];\n                var scaley = options[\"Y\"];\n                frame.setScaleX(scalex);\n                frame.setScaleY(scaley);\n                return frame;\n            }\n        },\n        {\n            name: \"Rotation\",\n            handle: function(options){\n                var frame = new ccs.RotationFrame();\n                var rotation = options[\"Rotation\"] || options[\"Value\"] || 0;\n                frame.setRotation(rotation);\n                return frame;\n            }\n        },\n        {\n            name: \"Skew\",\n            handle: function(options){\n                var frame = new ccs.SkewFrame();\n                var skewx = options[\"X\"];\n                var skewy = options[\"Y\"];\n                frame.setSkewX(skewx);\n                frame.setSkewY(skewy);\n                return frame;\n            }\n        },\n        {\n            name: \"RotationSkew\",\n            handle: function(options){\n                var frame = new ccs.RotationSkewFrame();\n                var skewx = options[\"X\"];\n                var skewy = options[\"Y\"];\n                frame.setSkewX(skewx);\n                frame.setSkewY(skewy);\n                return frame;\n            }\n        },\n        {\n            name: \"Anchor\",\n            handle: function(options){\n                var frame = new ccs.AnchorPointFrame();\n                var anchorx = options[\"X\"];\n                var anchory = options[\"Y\"];\n                frame.setAnchorPoint(cc.p(anchorx, anchory));\n                return frame;\n            }\n        },{\n            name: \"AnchorPoint\",\n            handle: function(options){\n                var frame = new ccs.AnchorPointFrame();\n                var anchorx = options[\"X\"];\n                var anchory = options[\"Y\"];\n                frame.setAnchorPoint(cc.p(anchorx, anchory));\n                return frame;\n            }\n        },{\n            name: \"InnerAction\",\n            handle: function(options){\n                var frame = new ccs.InnerActionFrame();\n                var type = options[\"InnerActionType\"];\n                var startFrame = options[\"StartFrame\"];\n                frame.setInnerActionType(type);\n                frame.setStartFrameIndex(startFrame);\n                return frame;\n            }\n        },\n        {\n            name: \"CColor\",\n            handle: function(options){\n                var frame = new ccs.ColorFrame();\n                var color = options[\"Color\"];\n                if(!color) color = {};\n                color[\"R\"] = color[\"R\"] === undefined ? 255 : color[\"R\"];\n                color[\"G\"] = color[\"G\"] === undefined ? 255 : color[\"G\"];\n                color[\"B\"] = color[\"B\"] === undefined ? 255 : color[\"B\"];\n                frame.setColor(cc.color(color[\"R\"], color[\"G\"], color[\"B\"]));\n                return frame;\n            }\n        },\n        {\n            name: \"Alpha\",\n            handle: function(options){\n                var frame = new ccs.AlphaFrame();\n                var alpha = options[\"Value\"];\n                frame.setAlpha(alpha);\n                return frame;\n            }\n        },\n        {\n            name: \"FileData\",\n            handle: function(options, resourcePath){\n                var frame, texture, plist, path, spriteFrame;\n                frame = new ccs.TextureFrame();\n                texture = options[\"TextureFile\"];\n                if(texture != null) {\n                    plist = texture[\"Plist\"];\n                    path = texture[\"Path\"];\n                    spriteFrame = cc.spriteFrameCache.getSpriteFrame(path);\n                    if(!spriteFrame && plist){\n                        if(cc.loader.getRes(resourcePath + plist)){\n                            cc.spriteFrameCache.addSpriteFrames(resourcePath + plist);\n                            spriteFrame = cc.spriteFrameCache.getSpriteFrame(path);\n                        }else{\n                            cc.log(\"%s need to be preloaded\", resourcePath + plist);\n                        }\n                    }\n                    if(spriteFrame == null){\n                        path = resourcePath + path;\n                    }\n                    frame.setTextureName(path);\n                }\n                return frame;\n            }\n        },\n        {\n            name: \"FrameEvent\",\n            handle: function(options){\n                var frame = new ccs.EventFrame();\n                var evnt = options[\"Value\"];\n                if(evnt != null)\n                    frame.setEvent(evnt);\n                return frame;\n            }\n        },\n        {\n            name: \"ZOrder\",\n            handle: function(options){\n                var frame = new ccs.ZOrderFrame();\n                var zorder = options[\"Value\"];\n                frame.setZOrder(zorder);\n                return frame;\n            }\n        },\n        {\n            name: \"ActionValue\",\n            handle: function (options) {\n\n                var frame = new ccs.InnerActionFrame();\n                var innerActionType = options[\"InnerActionType\"];\n\n                var currentAnimationFrame = options[\"CurrentAniamtionName\"];\n\n                var singleFrameIndex = options[\"SingleFrameIndex\"];\n\n                var frameIndex = options[\"FrameIndex\"];\n                if(frameIndex !== undefined)\n                    frame.setFrameIndex(frameIndex);\n\n                frame.setInnerActionType(ccs.InnerActionType[innerActionType]);\n                frame.setSingleFrameIndex(singleFrameIndex);\n\n                frame.setEnterWithName(true);\n                if (currentAnimationFrame)\n                     frame.setAnimationName(currentAnimationFrame);\n\n                return frame;\n            }\n        },\n        {\n            name: \"BlendFunc\",\n            handle: function(options){\n                var frame = new ccs.BlendFuncFrame();\n                var blendFunc = options[\"BlendFunc\"];\n                if(blendFunc && blendFunc[\"Src\"] !== undefined && blendFunc[\"Dst\"] !== undefined)\n                    frame.setBlendFunc(new cc.BlendFunc(blendFunc[\"Src\"], blendFunc[\"Dst\"]));\n                return frame;\n            }\n        }\n    ];\n\n    var loadEasingDataWithFlatBuffers = function(frame, options){\n        var type = options[\"Type\"];\n        frame.setTweenType(type);\n        var points = options[\"Points\"];\n        var result = [];\n        if(points){\n            points.forEach(function(p){\n                result.push(p[\"X\"]);\n                result.push(p[\"Y\"]);\n            });\n            frame.setEasingParams(result);\n        }\n    };\n\n    frameList.forEach(function(item){\n        parser.registerParser(item.name, function(options, resourcePath){\n            var timeline = new ccs.Timeline();\n            timeline.setActionTag(options[\"ActionTag\"]);\n\n            var frames = options[\"Frames\"];\n            if(frames && frames.length){\n                frames.forEach(function(frameData){\n                    var frame = item.handle(frameData, resourcePath);\n                    frame.setFrameIndex(frameData[\"FrameIndex\"]);\n                    var tween = frameData[\"Tween\"] != null ? frameData[\"Tween\"] : true;\n                    frame.setTween(tween);\n                    //https://github.com/cocos2d/cocos2d-x/pull/11388/files\n                    var easingData = frameData[\"EasingData\"];\n                    if(easingData)\n                        loadEasingDataWithFlatBuffers(frame, easingData);\n                    timeline.addFrame(frame);\n                });\n            }\n            return timeline;\n        });\n    });\n\n    load.registerParser(\"action\", \"2.*\", parser);\n    load.registerParser(\"action\", \"*\", parser);\n\n})(ccs._load, ccs._parser);\n"]}