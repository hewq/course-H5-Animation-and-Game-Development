{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark/kmMat4Multiply.js"],"names":["kernelConfig","kernelName","kernelInit","init","kernelCleanup","cleanup","kernelSimd","simd","kernelNonSimd","nonSimd","kernelIterations","benchmarks","add","Benchmark","T1","cc","kmMat4","T2","T1x4","T2x4","equals","A","B","i","mat","n","multiply","multiplySIMD"],"mappings":";;;;;;AAAA;;AAEC,aAAY;;AAEX;AACA,MAAIA,eAAe;AACjBC,gBAAkB,gBADD;AAEjBC,gBAAkBC,IAFD;AAGjBC,mBAAkBC,OAHD;AAIjBC,gBAAkBC,IAJD;AAKjBC,mBAAkBC,OALD;AAMjBC,sBAAkB;AAND,GAAnB;;AASA;AACAC,aAAWC,GAAX,CAAe,IAAIC,SAAJ,CAAcb,YAAd,CAAf;;AAEA;AACA,MAAIc,KAAK,IAAIC,GAAGC,MAAP,EAAT;AACA,MAAIC,KAAK,IAAIF,GAAGC,MAAP,EAAT;AACA,MAAIE,OAAO,IAAIH,GAAGC,MAAP,EAAX;AACA,MAAIG,OAAO,IAAIJ,GAAGC,MAAP,EAAX;;AAEA,WAASI,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AACpB,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwB,EAAEA,CAA1B,EAA6B;AAC3B,UAAIF,EAAEE,CAAF,KAAQD,EAAEC,CAAF,CAAZ,EACE,OAAO,KAAP;AACH;AACD,WAAO,IAAP;AACD;;AAED,WAASpB,IAAT,GAAgB;AACdW,OAAGU,GAAH,CAAO,CAAP,IAAY,GAAZ;AACAV,OAAGU,GAAH,CAAO,CAAP,IAAY,GAAZ;AACAV,OAAGU,GAAH,CAAO,EAAP,IAAa,GAAb;AACAV,OAAGU,GAAH,CAAO,EAAP,IAAa,GAAb;;AAEAP,OAAGO,GAAH,CAAO,CAAP,IAAY,GAAZ;AACAP,OAAGO,GAAH,CAAO,CAAP,IAAY,GAAZ;AACAP,OAAGO,GAAH,CAAO,EAAP,IAAa,GAAb;AACAP,OAAGO,GAAH,CAAO,EAAP,IAAa,GAAb;;AAEAN,SAAKM,GAAL,CAAS,CAAT,IAAc,GAAd;AACAN,SAAKM,GAAL,CAAS,CAAT,IAAc,GAAd;AACAN,SAAKM,GAAL,CAAS,EAAT,IAAe,GAAf;AACAN,SAAKM,GAAL,CAAS,EAAT,IAAe,GAAf;;AAEAL,SAAKK,GAAL,CAAS,CAAT,IAAc,GAAd;AACAL,SAAKK,GAAL,CAAS,CAAT,IAAc,GAAd;AACAL,SAAKK,GAAL,CAAS,EAAT,IAAe,GAAf;AACAL,SAAKK,GAAL,CAAS,EAAT,IAAe,GAAf;;AAEAf,YAAQ,CAAR;AACAF,SAAK,CAAL;AACA,WAAOa,OAAON,GAAGU,GAAV,EAAeN,KAAKM,GAApB,KAA4BJ,OAAOH,GAAGO,GAAV,EAAeL,KAAKK,GAApB,CAAnC;AACD;;AAED,WAASnB,OAAT,GAAmB;AACjB,WAAOF,MAAP,CADiB,CACF;AAChB;;AAED,WAASM,OAAT,CAAiBgB,CAAjB,EAAoB;AAClB,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAIE,CAApB,EAAuBF,GAAvB,EAA4B;AAC1BT,SAAGY,QAAH,CAAYT,EAAZ;AACD;AACF;;AAED,WAASV,IAAT,CAAckB,CAAd,EAAiB;AACf,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAIE,CAApB,EAAuBF,GAAvB,EAA4B;AAC1BL,WAAKS,YAAL,CAAkBR,IAAlB;AACD;AACF;AAEF,CAvEA,GAAD","file":"kmMat4Multiply.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/simd_benchmark","sourcesContent":["// kmMat4Multiply\n\n(function () {\n\n  // Kernel configuration\n  var kernelConfig = {\n    kernelName:       \"kmMat4Multiply\",\n    kernelInit:       init,\n    kernelCleanup:    cleanup,\n    kernelSimd:       simd,\n    kernelNonSimd:    nonSimd,\n    kernelIterations: 10000\n  };\n\n  // Hook up to the harness\n  benchmarks.add(new Benchmark(kernelConfig));\n\n  // Benchmark data, initialization and kernel functions\n  var T1 = new cc.kmMat4();\n  var T2 = new cc.kmMat4();\n  var T1x4 = new cc.kmMat4();\n  var T2x4 = new cc.kmMat4();\n\n  function equals(A, B) {\n    for (var i = 0; i < 16; ++i) {\n      if (A[i] != B[i])\n        return false;\n    }\n    return true;\n  }\n\n  function init() {\n    T1.mat[0] = 1.0;\n    T1.mat[5] = 1.0;\n    T1.mat[10] = 1.0;\n    T1.mat[15] = 1.0;\n\n    T2.mat[0] = 1.0;\n    T2.mat[5] = 1.0;\n    T2.mat[10] = 1.0;\n    T2.mat[15] = 1.0;\n\n    T1x4.mat[0] = 1.0;\n    T1x4.mat[5] = 1.0;\n    T1x4.mat[10] = 1.0;\n    T1x4.mat[15] = 1.0;\n\n    T2x4.mat[0] = 1.0;\n    T2x4.mat[5] = 1.0;\n    T2x4.mat[10] = 1.0;\n    T2x4.mat[15] = 1.0;\n\n    nonSimd(1);\n    simd(1);\n    return equals(T1.mat, T1x4.mat) && equals(T2.mat, T2x4.mat);\n  }\n\n  function cleanup() {\n    return init(); // Sanity checking before and after are the same\n  }\n\n  function nonSimd(n) {\n    for (var i = 0; i < n; i++) {\n      T1.multiply(T2);\n    }\n  }\n\n  function simd(n) {\n    for (var i = 0; i < n; i++) {\n      T1x4.multiplySIMD(T2x4);\n    }\n  }\n\n} ());\n"]}