{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/external/gaf/Library/assets/frameworks/cocos2d-html5/external/gaf/Library/GAFAtlasLoader.js"],"names":["gaf","_AtlasLoader","execute","condition","success","fail","checkAtlas","atlas","isLoaded","load","path","cc","textureCache","addImage","loadFront","arr","length","slice","loadArray","array"],"mappings":";;;;;;AAAA;;;;AAIAA,IAAIC,YAAJ,GAAmB,EAAnB;AACAD,IAAIC,YAAJ,CAAiBC,OAAjB,GAA2B,UAASC,SAAT,EAAoBC,OAApB,EAA6BC,IAA7B,EAC3B;AACIF,kBAAcC,SAAd,GAA0BC,MAA1B;AACH,CAHD;;AAKAL,IAAIC,YAAJ,CAAiBK,UAAjB,GAA8B,UAASC,KAAT,EAAgB;AAC9C;AACI,WAAO,YAAU;AAAC,eAAOA,SAAS,OAAOA,KAAP,KAAiB,QAA1B,IAAsCA,MAAMC,QAAN,EAA7C;AAA8D,KAAhF;AACH,CAHD;;AAKAR,IAAIC,YAAJ,CAAiBQ,IAAjB,GAAwB,UAASC,IAAT,EAAeN,OAAf,EAAwBC,IAAxB,EACxB;AACIM,OAAGC,YAAH,CAAgBC,QAAhB,CAAyBH,IAAzB,EAA+B,UAASH,KAAT,EAAe;AAC1CP,YAAIC,YAAJ,CAAiBC,OAAjB,CACIF,IAAIC,YAAJ,CAAiBK,UAAjB,CAA4BC,KAA5B,CADJ,EAEI,YAAU;AAACH,oBAAQG,KAAR;AAAe,SAF9B,EAGIF,IAHJ;AAKH,KAND;AAOH,CATD;;AAWAL,IAAIC,YAAJ,CAAiBa,SAAjB,GAA6B,UAASC,GAAT,EAAcX,OAAd,EAAuBC,IAAvB,EAC7B;AACI;AACA;AACA,WAAO,YACP;AACI,YAAIU,IAAIC,MAAJ,GAAa,CAAjB,EAAmB;AACfhB,gBAAIC,YAAJ,CAAiBQ,IAAjB,CACIM,IAAI,CAAJ,CADJ,EAEIX,OAFJ,EAGIJ,IAAIC,YAAJ,CAAiBa,SAAjB,CACIC,IAAIE,KAAJ,CAAU,CAAV,CADJ,EAEIb,OAFJ,EAGIC,IAHJ,CAHJ;AAOA,SARJ,MAUIA;AACP,KAbD;AAcH,CAlBD;;AAoBAL,IAAIC,YAAJ,CAAiBiB,SAAjB,GAA6B,UAASC,KAAT,EAAgBf,OAAhB,EAAyBC,IAAzB,EAC7B;AACIL,QAAIC,YAAJ,CAAiBa,SAAjB,CAA2BK,KAA3B,EAAkCf,OAAlC,EAA2CC,IAA3C;AACH,CAHD","file":"GAFAtlasLoader.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/external/gaf/Library","sourcesContent":["/**\n * Created by admiral on 19.02.2015.\n */\n\ngaf._AtlasLoader = {};\ngaf._AtlasLoader.execute = function(condition, success, fail)\n{\n    condition() ? success() : fail();\n};\n\ngaf._AtlasLoader.checkAtlas = function(atlas) // curried function\n{\n    return function(){return atlas && typeof atlas !== \"string\" && atlas.isLoaded()};\n};\n\ngaf._AtlasLoader.load = function(path, success, fail)\n{\n    cc.textureCache.addImage(path, function(atlas){\n        gaf._AtlasLoader.execute(\n            gaf._AtlasLoader.checkAtlas(atlas),\n            function(){success(atlas)},\n            fail\n        );\n    });\n};\n\ngaf._AtlasLoader.loadFront = function(arr, success, fail)\n{\n    // Call recursively this function for each element starting from the first\n    // stops on first success, or fails after last element\n    return function()\n    {\n        if (arr.length > 0){\n            gaf._AtlasLoader.load(\n                arr[0],\n                success,\n                gaf._AtlasLoader.loadFront(\n                    arr.slice(1),\n                    success,\n                    fail\n        ));}\n        else\n            fail();\n    }\n};\n\ngaf._AtlasLoader.loadArray = function(array, success, fail)\n{\n    gaf._AtlasLoader.loadFront(array, success, fail)();\n};\n"]}