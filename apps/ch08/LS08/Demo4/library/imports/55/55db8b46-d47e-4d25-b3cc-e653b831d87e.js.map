{"version":3,"sources":["../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath/assets/frameworks/cocos2d-html5/cocos2d/kazmath/mat4SIMD.js"],"names":["cc","proto","math","Matrix4","prototype","kmMat4InverseSIMD","pOut","pM","inverseSIMD","inv","src","mat","dest","src0","src1","src2","src3","row0","row1","row2","row3","tmp1","minor0","minor1","minor2","minor3","det","SIMD","float32x4","load","shuffle","mul","swizzle","sub","add","reciprocalApproximation","store","identityMatrix","identity","isIdentitySIMD","inx4","identityx4","ret","equal","signMask","transposeSIMD","outArr","inArr","dst0","dst1","dst2","dst3","tmp01","tmp23","kmMat4MultiplySIMD","pM1","pM2","multiplySIMD","mat4","a","b","out","a0","a1","a2","a3","b0","b1","b2","b3","getMat4MultiplyValueSIMD","kmMat4AssignSIMD","pIn","log","assignFromSIMD","equalsSIMD","m10","m20","epsilon","splat","EPSILON","lessThanOrEqual","abs","m11","m21","m12","m22","m13","m23","kmMat4LookAtSIMD","pEye","pCenter","pUp","lookAtSIMD","eyeVec","centerVec","upVec","center","x","y","z","eye","up","f","tmp","reciprocalSqrtApproximation","s","u","zero","neg","withW"],"mappings":"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","file":"mat4SIMD.js","sourceRoot":"../../../../../../../assets/frameworks/cocos2d-html5/cocos2d/kazmath","sourcesContent":["/**\n Copyright (c) 2008-2010 Ricardo Quesada\n Copyright (c) 2011-2012 cocos2d-x.org\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n Copyright (c) 2008, Luke Benstead.\n All rights reserved.\n\n Redistribution and use in source and binary forms, with or without modification,\n are permitted provided that the following conditions are met:\n\n * Redistributions of source code must retain the above copyright notice,\n this list of conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice,\n this list of conditions and the following disclaimer in the documentation\n and/or other materials provided with the distribution.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n(function(cc) {\n    var proto = cc.math.Matrix4.prototype;\n\n    cc.kmMat4InverseSIMD = function (pOut, pM) {\n        pOut = pM.inverseSIMD();\n        return pOut;\n    };\n\n    proto.inverseSIMD = function(){\n        var inv = new cc.math.Matrix4();\n        var src = this.mat;\n        var dest = inv.mat;\n        var src0, src1, src2, src3;\n        var row0, row1, row2, row3;\n        var tmp1;\n        var minor0, minor1, minor2, minor3;\n        var det;\n\n        // Load the 4 rows\n        var src0 = SIMD.float32x4.load(src, 0);\n        var src1 = SIMD.float32x4.load(src, 4);\n        var src2 = SIMD.float32x4.load(src, 8);\n        var src3 = SIMD.float32x4.load(src, 12);\n\n        // Transpose the source matrix.  Sort of.  Not a true transpose operation\n\n        tmp1 = SIMD.float32x4.shuffle(src0, src1, 0, 1, 4, 5);\n        row1 = SIMD.float32x4.shuffle(src2, src3, 0, 1, 4, 5);\n        row0 = SIMD.float32x4.shuffle(tmp1, row1, 0, 2, 4, 6);\n        row1 = SIMD.float32x4.shuffle(row1, tmp1, 1, 3, 5, 7);\n\n        tmp1 = SIMD.float32x4.shuffle(src0, src1, 2, 3, 6, 7);\n        row3 = SIMD.float32x4.shuffle(src2, src3, 2, 3, 6, 7);\n        row2 = SIMD.float32x4.shuffle(tmp1, row3, 0, 2, 4, 6);\n        row3 = SIMD.float32x4.shuffle(row3, tmp1, 1, 3, 5, 7);\n\n        // ----\n        tmp1   = SIMD.float32x4.mul(row2, row3);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 1, 0, 3, 2); // 0xB1 = 10110001\n        minor0 = SIMD.float32x4.mul(row1, tmp1);\n        minor1 = SIMD.float32x4.mul(row0, tmp1);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 2, 3, 0, 1); // 0x4E = 01001110\n        minor0 = SIMD.float32x4.sub(SIMD.float32x4.mul(row1, tmp1), minor0);\n        minor1 = SIMD.float32x4.sub(SIMD.float32x4.mul(row0, tmp1), minor1);\n        minor1 = SIMD.float32x4.swizzle(minor1, 2, 3, 0, 1); // 0x4E = 01001110\n\n        // ----\n        tmp1   = SIMD.float32x4.mul(row1, row2);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 1, 0, 3, 2); // 0xB1 = 10110001\n        minor0 = SIMD.float32x4.add(SIMD.float32x4.mul(row3, tmp1), minor0);\n        minor3 = SIMD.float32x4.mul(row0, tmp1);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 2, 3, 0, 1); // 0x4E = 01001110\n        minor0 = SIMD.float32x4.sub(minor0, SIMD.float32x4.mul(row3, tmp1));\n        minor3 = SIMD.float32x4.sub(SIMD.float32x4.mul(row0, tmp1), minor3);\n        minor3 = SIMD.float32x4.swizzle(minor3, 2, 3, 0, 1); // 0x4E = 01001110\n\n        // ----\n        tmp1   = SIMD.float32x4.mul(SIMD.float32x4.swizzle(row1, 2, 3, 0, 1), row3); // 0x4E = 01001110\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 1, 0, 3, 2); // 0xB1 = 10110001\n        row2   = SIMD.float32x4.swizzle(row2, 2, 3, 0, 1);  // 0x4E = 01001110\n        minor0 = SIMD.float32x4.add(SIMD.float32x4.mul(row2, tmp1), minor0);\n        minor2 = SIMD.float32x4.mul(row0, tmp1);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 2, 3, 0, 1); // 0x4E = 01001110\n        minor0 = SIMD.float32x4.sub(minor0, SIMD.float32x4.mul(row2, tmp1));\n        minor2 = SIMD.float32x4.sub(SIMD.float32x4.mul(row0, tmp1), minor2);\n        minor2 = SIMD.float32x4.swizzle(minor2, 2, 3, 0, 1); // 0x4E = 01001110\n\n        // ----\n        tmp1   = SIMD.float32x4.mul(row0, row1);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 1, 0, 3, 2); // 0xB1 = 10110001\n        minor2 = SIMD.float32x4.add(SIMD.float32x4.mul(row3, tmp1), minor2);\n        minor3 = SIMD.float32x4.sub(SIMD.float32x4.mul(row2, tmp1), minor3);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 2, 3, 0, 1); // 0x4E = 01001110\n        minor2 = SIMD.float32x4.sub(SIMD.float32x4.mul(row3, tmp1), minor2);\n        minor3 = SIMD.float32x4.sub(minor3, SIMD.float32x4.mul(row2, tmp1));\n\n        // ----\n        tmp1   = SIMD.float32x4.mul(row0, row3);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 1, 0, 3, 2); // 0xB1 = 10110001\n        minor1 = SIMD.float32x4.sub(minor1, SIMD.float32x4.mul(row2, tmp1));\n        minor2 = SIMD.float32x4.add(SIMD.float32x4.mul(row1, tmp1), minor2);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 2, 3, 0, 1); // 0x4E = 01001110\n        minor1 = SIMD.float32x4.add(SIMD.float32x4.mul(row2, tmp1), minor1);\n        minor2 = SIMD.float32x4.sub(minor2, SIMD.float32x4.mul(row1, tmp1));\n\n        // ----\n        tmp1   = SIMD.float32x4.mul(row0, row2);\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 1, 0, 3, 2); // 0xB1 = 10110001\n        minor1 = SIMD.float32x4.add(SIMD.float32x4.mul(row3, tmp1), minor1);\n        minor3 = SIMD.float32x4.sub(minor3, SIMD.float32x4.mul(row1, tmp1));\n        tmp1   = SIMD.float32x4.swizzle(tmp1, 2, 3, 0, 1); // 0x4E = 01001110\n        minor1 = SIMD.float32x4.sub(minor1, SIMD.float32x4.mul(row3, tmp1));\n        minor3 = SIMD.float32x4.add(SIMD.float32x4.mul(row1, tmp1), minor3);\n\n        // Compute determinant\n        det   = SIMD.float32x4.mul(row0, minor0);\n        det   = SIMD.float32x4.add(SIMD.float32x4.swizzle(det, 2, 3, 0, 1), det); // 0x4E = 01001110\n        det   = SIMD.float32x4.add(SIMD.float32x4.swizzle(det, 1, 0, 3, 2), det); // 0xB1 = 10110001\n        tmp1  = SIMD.float32x4.reciprocalApproximation(det);\n        det   = SIMD.float32x4.sub(SIMD.float32x4.add(tmp1, tmp1), SIMD.float32x4.mul(det, SIMD.float32x4.mul(tmp1, tmp1)));\n        det   = SIMD.float32x4.swizzle(det, 0, 0, 0, 0);\n\n        // Compute final values by multiplying with 1/det\n        minor0 = SIMD.float32x4.mul(det, minor0);\n        minor1 = SIMD.float32x4.mul(det, minor1);\n        minor2 = SIMD.float32x4.mul(det, minor2);\n        minor3 = SIMD.float32x4.mul(det, minor3);\n\n        SIMD.float32x4.store(dest, 0, minor0);\n        SIMD.float32x4.store(dest, 4, minor1);\n        SIMD.float32x4.store(dest, 8, minor2);\n        SIMD.float32x4.store(dest, 12, minor3);\n\n        return inv;\n    };\n\n    var identityMatrix = new cc.math.Matrix4().identity();\n    proto.isIdentitySIMD = function () {\n        var inx4 = SIMD.float32x4.load(this.mat, 0);\n        var identityx4 = SIMD.float32x4.load(identityMatrix.mat, 0);\n        var ret = SIMD.float32x4.equal(inx4, identityx4);\n        if(ret.signMask === 0x00)\n            return false;\n\n        inx4 = SIMD.float32x4.load(this.mat, 4);\n        identityx4 = SIMD.float32x4.load(identityMatrix.mat, 4);\n        ret = SIMD.float32x4.equal(inx4, identityx4);\n        if(ret.signMask === 0x00)\n            return false;\n\n        inx4 = SIMD.float32x4.load(this.mat, 8);\n        identityx4 = SIMD.float32x4.load(identityMatrix.mat, 8);\n        ret = SIMD.float32x4.equal(inx4, identityx4);\n        if(ret.signMask === 0x00)\n            return false;\n\n        inx4 = SIMD.float32x4.load(this.mat, 12);\n        identityx4 = SIMD.float32x4.load(identityMatrix.mat, 12);\n        ret = SIMD.float32x4.equal(inx4, identityx4);\n        if(ret.signMask === 0x00)\n            return false;\n        return true;\n    };\n\n    proto.transposeSIMD = function () {\n        var outArr = this.mat, inArr = this.mat;\n        var src0     = SIMD.float32x4.load(inArr, 0);\n        var src1     = SIMD.float32x4.load(inArr, 4);\n        var src2     = SIMD.float32x4.load(inArr, 8);\n        var src3     = SIMD.float32x4.load(inArr, 12);\n        var dst0;\n        var dst1;\n        var dst2;\n        var dst3;\n        var tmp01;\n        var tmp23;\n\n        tmp01 = SIMD.float32x4.shuffle(src0, src1, 0, 1, 4, 5);\n        tmp23 = SIMD.float32x4.shuffle(src2, src3, 0, 1, 4, 5);\n        dst0  = SIMD.float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\n        dst1  = SIMD.float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\n\n        tmp01 = SIMD.float32x4.shuffle(src0, src1, 2, 3, 6, 7);\n        tmp23 = SIMD.float32x4.shuffle(src2, src3, 2, 3, 6, 7);\n        dst2  = SIMD.float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\n        dst3  = SIMD.float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\n\n        SIMD.float32x4.store(outArr, 0, dst0);\n        SIMD.float32x4.store(outArr, 4, dst1);\n        SIMD.float32x4.store(outArr, 8, dst2);\n        SIMD.float32x4.store(outArr, 12, dst3);\n        return this;\n    };\n\n    cc.kmMat4MultiplySIMD = function (pOut, pM1, pM2) {\n        pOut = new cc.math.Matrix4(pM1);\n        return pOut.multiplySIMD(pM2);\n    };\n\n    proto.multiplySIMD = function(mat4) {\n        var a = this.mat;\n        var b = mat4.mat;\n        var out = this.mat;\n\n        var a0 = SIMD.float32x4.load(a,0);\n        var a1 = SIMD.float32x4.load(a,4);\n        var a2 = SIMD.float32x4.load(a,8);\n        var a3 = SIMD.float32x4.load(a,12);\n        var b0 = SIMD.float32x4.load(b, 0);\n        SIMD.float32x4.store(out, 0, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b0, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                     SIMD.float32x4.mul(SIMD.float32x4.swizzle(b0, 1, 1, 1, 1), a1),\n                     SIMD.float32x4.add(\n                          SIMD.float32x4.mul(SIMD.float32x4.swizzle(b0, 2, 2, 2, 2), a2),\n                          SIMD.float32x4.mul(SIMD.float32x4.swizzle(b0, 3, 3, 3, 3), a3)))));\n        var b1 = SIMD.float32x4.load(b, 4);\n        SIMD.float32x4.store(out, 4, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b1, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                    SIMD.float32x4.mul(SIMD.float32x4.swizzle(b1, 1, 1, 1, 1), a1),\n                    SIMD.float32x4.add(\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b1, 2, 2, 2, 2), a2),\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b1, 3, 3, 3, 3), a3)))));\n        var b2 = SIMD.float32x4.load(b, 8);\n        SIMD.float32x4.store(out, 8, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b2, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                    SIMD.float32x4.mul(SIMD.float32x4.swizzle(b2, 1, 1, 1, 1), a1),\n                    SIMD.float32x4.add(\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b2, 2, 2, 2, 2), a2),\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b2, 3, 3, 3, 3), a3)))));\n        var b3 = SIMD.float32x4.load(b, 12);\n        SIMD.float32x4.store(out, 12, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b3, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                    SIMD.float32x4.mul(SIMD.float32x4.swizzle(b3, 1, 1, 1, 1), a1),\n                    SIMD.float32x4.add(\n                        SIMD.float32x4.mul(SIMD.float32x4.swizzle(b3, 2, 2, 2, 2), a2),\n                        SIMD.float32x4.mul(SIMD.float32x4.swizzle(b3, 3, 3, 3, 3), a3)))));\n\n        return this;\n    };\n\n    cc.getMat4MultiplyValueSIMD = function (pM1, pM2) {\n        var mat = new cc.math.Matrix4(pM1);\n        return mat.multiplySIMD(pM2);\n    };\n\n    cc.kmMat4AssignSIMD = function (pOut, pIn) {\n        if(pOut == pIn) {\n            cc.log(\"cc.kmMat4Assign(): pOut equals pIn\");//TODO: ADD SIMD?\n            return pOut;\n        }\n\n        return pOut.assignFromSIMD(pIn);\n    };\n\n    proto.assignFromSIMD = function (mat4) {\n        if(this == mat4) {\n            cc.log(\"cc.mat.Matrix4.assignFrom(): mat4 equals current matrix\");//TODO: ADD SIMD?\n            return this;\n        }\n\n        var outArr = this.mat;\n        var inArr = mat4.mat;\n\n        SIMD.float32x4.store(outArr, 0, SIMD.float32x4.load(inArr, 0));\n        SIMD.float32x4.store(outArr, 4, SIMD.float32x4.load(inArr, 4));\n        SIMD.float32x4.store(outArr, 8, SIMD.float32x4.load(inArr, 8));\n        SIMD.float32x4.store(outArr, 12, SIMD.float32x4.load(inArr, 12));\n\n        return this;\n    };\n\n    proto.equalsSIMD = function (mat4) {\n        if(this === mat4){\n            cc.log(\"cc.kmMat4AreEqual(): pMat1 and pMat2 are same object.\");\n            return true;\n        }\n        var m10 = SIMD.float32x4.load(this.mat, 0);\n        var m20 = SIMD.float32x4.load(mat4.mat, 0);\n\n        var epsilon = SIMD.float32x4.splat(cc.math.EPSILON);\n\n        var ret = SIMD.float32x4.lessThanOrEqual(SIMD.float32x4.abs(SIMD.float32x4.sub(m10, m20)), epsilon);\n        if (ret.signMask === 0)\n            return false;\n\n        var m11 = SIMD.float32x4.load(this.mat, 4);\n        var m21 = SIMD.float32x4.load(mat4.mat, 4);\n        ret = SIMD.float32x4.lessThanOrEqual(SIMD.float32x4.abs(SIMD.float32x4.sub(m11, m21)), epsilon);\n        if (ret.signMask === 0)\n            return false;\n\n        var m12 = SIMD.float32x4.load(this.mat, 8);\n        var m22 = SIMD.float32x4.load(mat4.mat, 8);\n        ret = SIMD.float32x4.lessThanOrEqual(SIMD.float32x4.abs(SIMD.float32x4.sub(m12, m22)), epsilon);\n        if (ret.signMask === 0)\n            return false;\n\n        var m13 = SIMD.float32x4.load(this.mat, 12);\n        var m23 = SIMD.float32x4.load(mat4.mat, 12);\n        ret = SIMD.float32x4.lessThanOrEqual(SIMD.float32x4.abs(SIMD.float32x4.sub(m13, m23)), epsilon);\n        if (ret.signMask === 0)\n            return false;\n        return true;\n    };\n\n    cc.kmMat4LookAtSIMD = function (pOut, pEye, pCenter, pUp) {\n        return pOut.lookAtSIMD(pEye, pCenter, pUp);\n    };\n\n    proto.lookAtSIMD = function(eyeVec, centerVec, upVec) {\n        var out = this.mat;\n\n        var center = SIMD.float32x4(centerVec.x, centerVec.y, centerVec.z, 0.0);\n        var eye = SIMD.float32x4(eyeVec.x, eyeVec.y, eyeVec.z, 0.0);\n        var up = SIMD.float32x4(upVec.x, upVec.y, upVec.z, 0.0);\n\n        // cc.kmVec3Subtract(f, pCenter, pEye);\n        var f = SIMD.float32x4.sub(center, eye);\n        // cc.kmVec3Normalize(f, f);\n        var tmp = SIMD.float32x4.mul(f, f);\n        tmp = SIMD.float32x4.add(tmp, SIMD.float32x4.add(SIMD.float32x4.swizzle(tmp, 1, 2, 0, 3), SIMD.float32x4.swizzle(tmp, 2, 0, 1, 3)));\n        f = SIMD.float32x4.mul(f, SIMD.float32x4.reciprocalSqrtApproximation(tmp));\n\n        // cc.kmVec3Assign(up, pUp);\n        // cc.kmVec3Normalize(up, up);\n        tmp = SIMD.float32x4.mul(up, up);\n        tmp = SIMD.float32x4.add(tmp, SIMD.float32x4.add(SIMD.float32x4.swizzle(tmp, 1, 2, 0, 3), SIMD.float32x4.swizzle(tmp, 2, 0, 1, 3)));\n        up = SIMD.float32x4.mul(up, SIMD.float32x4.reciprocalSqrtApproximation(tmp));\n\n        // cc.kmVec3Cross(s, f, up);\n        var s = SIMD.float32x4.sub(SIMD.float32x4.mul(SIMD.float32x4.swizzle(f, 1, 2, 0, 3), SIMD.float32x4.swizzle(up, 2, 0, 1, 3)),\n                                   SIMD.float32x4.mul(SIMD.float32x4.swizzle(f, 2, 0, 1, 3), SIMD.float32x4.swizzle(up, 1, 2, 0, 3)));\n        // cc.kmVec3Normalize(s, s);\n        tmp = SIMD.float32x4.mul(s, s);\n        tmp = SIMD.float32x4.add(tmp, SIMD.float32x4.add(SIMD.float32x4.swizzle(tmp, 1, 2, 0, 3), SIMD.float32x4.swizzle(tmp, 2, 0, 1, 3)));\n        s = SIMD.float32x4.mul(s, SIMD.float32x4.reciprocalSqrtApproximation(tmp));\n\n        // cc.kmVec3Cross(u, s, f);\n        var u = SIMD.float32x4.sub(SIMD.float32x4.mul(SIMD.float32x4.swizzle(s, 1, 2, 0, 3), SIMD.float32x4.swizzle(f, 2, 0, 1, 3)),\n                                   SIMD.float32x4.mul(SIMD.float32x4.swizzle(s, 2, 0, 1, 3), SIMD.float32x4.swizzle(f, 1, 2, 0, 3)));\n        // cc.kmVec3Normalize(s, s);\n        tmp = SIMD.float32x4.mul(s, s);\n        tmp = SIMD.float32x4.add(tmp, SIMD.float32x4.add(SIMD.float32x4.swizzle(tmp, 1, 2, 0, 3), SIMD.float32x4.swizzle(tmp, 2, 0, 1, 3)));\n        s = SIMD.float32x4.mul(s, SIMD.float32x4.reciprocalSqrtApproximation(tmp));\n\n        //cc.kmMat4Identity(pOut);\n        //pOut.mat[0] = s.x;\n        //pOut.mat[4] = s.y;\n        //pOut.mat[8] = s.z;\n        //pOut.mat[1] = u.x;\n        //pOut.mat[5] = u.y;\n        //pOut.mat[9] = u.z;\n        //pOut.mat[2] = -f.x;\n        //pOut.mat[6] = -f.y;\n        //pOut.mat[10] = -f.z;\n        var zero = SIMD.float32x4.splat(0.0);\n        f = SIMD.float32x4.neg(f);\n        var tmp01 = SIMD.float32x4.shuffle(s, u, 0, 1, 4, 5);\n        var tmp23 = SIMD.float32x4.shuffle(f, zero, 0, 1, 4, 5);\n        var a0  = SIMD.float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\n        var a1  = SIMD.float32x4.shuffle(tmp01, tmp23, 1, 3, 5, 7);\n\n        var tmp01 = SIMD.float32x4.shuffle(s, u, 2, 3, 6, 7);\n        var tmp23 = SIMD.float32x4.shuffle(f, zero, 2, 3, 6, 7);\n        var a2  = SIMD.float32x4.shuffle(tmp01, tmp23, 0, 2, 4, 6);\n        var a3  = SIMD.float32x4(0.0, 0.0, 0.0, 1.0);\n\n        // cc.kmMat4Translation(translate, -pEye.x, -pEye.y, -pEye.z);\n        var b0 = SIMD.float32x4(1.0, 0.0, 0.0, 0.0);\n        var b1 = SIMD.float32x4(0.0, 1.0, 0.0, 0.0);\n        var b2 = SIMD.float32x4(0.0, 0.0, 1.0, 0.0);\n        var b3 = SIMD.float32x4.neg(eye);\n        b3 = SIMD.float32x4.withW(b3, 1.0);\n\n        // cc.kmMat4Multiply(pOut, pOut, translate);\n        SIMD.float32x4.store(out, 0, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b0, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                     SIMD.float32x4.mul(SIMD.float32x4.swizzle(b0, 1, 1, 1, 1), a1),\n                     SIMD.float32x4.add(\n                          SIMD.float32x4.mul(SIMD.float32x4.swizzle(b0, 2, 2, 2, 2), a2),\n                          SIMD.float32x4.mul(SIMD.float32x4.swizzle(b0, 3, 3, 3, 3), a3)))));\n        SIMD.float32x4.store(out, 4, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b1, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                    SIMD.float32x4.mul(SIMD.float32x4.swizzle(b1, 1, 1, 1, 1), a1),\n                    SIMD.float32x4.add(\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b1, 2, 2, 2, 2), a2),\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b1, 3, 3, 3, 3), a3)))));\n        SIMD.float32x4.store(out, 8, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b2, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                    SIMD.float32x4.mul(SIMD.float32x4.swizzle(b2, 1, 1, 1, 1), a1),\n                    SIMD.float32x4.add(\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b2, 2, 2, 2, 2), a2),\n                         SIMD.float32x4.mul(SIMD.float32x4.swizzle(b2, 3, 3, 3, 3), a3)))));\n        SIMD.float32x4.store(out, 12, SIMD.float32x4.add(\n            SIMD.float32x4.mul(\n                SIMD.float32x4.swizzle(b3, 0, 0, 0, 0), a0),\n                SIMD.float32x4.add(\n                    SIMD.float32x4.mul(SIMD.float32x4.swizzle(b3, 1, 1, 1, 1), a1),\n                    SIMD.float32x4.add(\n                        SIMD.float32x4.mul(SIMD.float32x4.swizzle(b3, 2, 2, 2, 2), a2),\n                        SIMD.float32x4.mul(SIMD.float32x4.swizzle(b3, 3, 3, 3, 3), a3)))));\n        return this;\n    };\n\n\n})(cc);\n"]}