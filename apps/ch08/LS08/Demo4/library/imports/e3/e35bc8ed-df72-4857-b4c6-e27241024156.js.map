{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/external/gaf/Library/assets/frameworks/cocos2d-html5/external/gaf/Library/GAFShaderManager.js"],"names":["gaf","_glShaderInit","_Uniforms","ColorTransformMult","ColorTransformOffset","ColorMatrixBody","ColorMatrixAppendix","BlurTexelOffset","GlowTexelOffset","GlowColor","_shaderCreate","fs","vs","program","cc","GLProgram","result","initWithVertexShaderByteArray","assert","addAttribute","ATTRIBUTE_NAME_POSITION","VERTEX_ATTRIB_POSITION","ATTRIBUTE_NAME_COLOR","VERTEX_ATTRIB_COLOR","ATTRIBUTE_NAME_TEX_COORD","VERTEX_ATTRIB_TEX_COORDS","link","updateUniforms","_shaderCreateAlpha","SHADER_COLOR_MATRIX_FRAG","SHADER_POSITION_TEXTURE_COLOR_VERT","getUniformLocationForName","UNIFORM_ALPHA_TINT_MULT","UNIFORM_ALPHA_TINT_OFFSET","UNIFORM_ALPHA_COLOR_MATRIX_BODY","UNIFORM_ALPHA_COLOR_MATRIX_APPENDIX","_shaderCreateBlur","SHADER_GAUSSIAN_BLUR_FRAG","_glContext","getUniformLocation","_programObj","UNIFORM_BLUR_TEXEL_OFFSET","_shaderCreateGlow","SHADER_GLOW_FRAG","UNIFORM_GLOW_TEXEL_OFFSET","UNIFORM_GLOW_COLOR","_Shaders","Alpha","Blur","Glow","_setupShaders","_renderType","game","RENDER_TYPE_WEBGL"],"mappings":"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","file":"GAFShaderManager.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/external/gaf/Library","sourcesContent":["\ngaf._glShaderInit = function() {\n    gaf._Uniforms = {\n        ColorTransformMult: -1,\n        ColorTransformOffset: -1,\n        ColorMatrixBody: -1,\n        ColorMatrixAppendix: -1,\n        BlurTexelOffset: -1,\n        GlowTexelOffset: -1,\n        GlowColor: -1\n    };\n\n    gaf._shaderCreate = function (fs, vs) {\n        var program = new cc.GLProgram();\n        var result = program.initWithVertexShaderByteArray(vs, fs);\n        cc.assert(result, \"Shader init error\");\n        program.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);\n        program.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);\n        program.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD, cc.VERTEX_ATTRIB_TEX_COORDS);\n        result = program.link();\n        cc.assert(result, \"Shader linking error\");\n        program.updateUniforms();\n        return program;\n    };\n\n    gaf._shaderCreateAlpha = function () {\n        var program = gaf._shaderCreate(gaf.SHADER_COLOR_MATRIX_FRAG, cc.SHADER_POSITION_TEXTURE_COLOR_VERT);\n        gaf._Uniforms.ColorTransformMult = program.getUniformLocationForName(gaf.UNIFORM_ALPHA_TINT_MULT);\n        gaf._Uniforms.ColorTransformOffset = program.getUniformLocationForName(gaf.UNIFORM_ALPHA_TINT_OFFSET);\n        gaf._Uniforms.ColorMatrixBody = program.getUniformLocationForName(gaf.UNIFORM_ALPHA_COLOR_MATRIX_BODY);\n        gaf._Uniforms.ColorMatrixAppendix = program.getUniformLocationForName(gaf.UNIFORM_ALPHA_COLOR_MATRIX_APPENDIX);\n        return program;\n    };\n\n    gaf._shaderCreateBlur = function () {\n        var program = gaf._shaderCreate(gaf.SHADER_GAUSSIAN_BLUR_FRAG, cc.SHADER_POSITION_TEXTURE_COLOR_VERT);\n        gaf._Uniforms.BlurTexelOffset = program._glContext.getUniformLocation(program._programObj, gaf.UNIFORM_BLUR_TEXEL_OFFSET);\n\n        return program;\n    };\n\n    gaf._shaderCreateGlow = function () {\n        var program = gaf._shaderCreate(gaf.SHADER_GLOW_FRAG, cc.SHADER_POSITION_TEXTURE_COLOR_VERT);\n        gaf._Uniforms.GlowTexelOffset = program._glContext.getUniformLocation(program._programObj, gaf.UNIFORM_GLOW_TEXEL_OFFSET);\n        gaf._Uniforms.GlowColor = program._glContext.getUniformLocation(program._programObj, gaf.UNIFORM_GLOW_COLOR);\n        return program;\n    };\n\n    gaf._Shaders = {\n        Alpha: gaf._shaderCreateAlpha(),\n        Blur: gaf._shaderCreateBlur(),\n        Glow: gaf._shaderCreateGlow()\n    };\n};\n\ngaf._setupShaders = function() {\n    if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {\n        gaf._glShaderInit();\n    }\n    else {\n        delete gaf._glShaderInit;\n    }\n};\n"]}