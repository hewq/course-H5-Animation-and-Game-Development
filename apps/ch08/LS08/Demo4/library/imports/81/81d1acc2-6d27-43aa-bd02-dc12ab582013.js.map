{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension/assets/frameworks/cocos2d-html5/extensions/gui/control-extension/CCControlHuePicker.js"],"names":["cc","ControlHuePicker","Control","extend","_hue","_huePercentage","_background","_slider","_startPos","_className","ctor","target","pos","prototype","call","initWithTargetAndPos","getHue","setHue","hueValue","setHuePercentage","getHuePercentage","hueValueInPercent","backgroundBox","getBoundingBox","centerX","x","width","centerY","y","height","limit","angleDeg","angle","degreesToRadians","Math","cos","sin","setPosition","setEnabled","enabled","setOpacity","getBackground","getSlider","getStartPos","init","ControlUtils","addSpriteToTargetWithPosAndAnchor","p","_updateSliderPosition","location","dx","dy","atan2","radiansToDegrees","sendActionsForControlEvents","CONTROL_EVENT_VALUECHANGED","_checkSliderPosition","distance","sqrt","pow","onTouchBegan","touch","event","isEnabled","isVisible","touchLocation","getTouchLocation","onTouchMoved","_p","hue","defineGetterSetter","huePercent","background","slider","startPos","create"],"mappings":"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","file":"CCControlHuePicker.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension","sourcesContent":["/**\n *\n * Copyright (c) 2008-2010 Ricardo Quesada\n * Copyright (c) 2011-2012 cocos2d-x.org\n * Copyright (c) 2013-2014 Chukong Technologies Inc.\n *\n * Copyright 2012 Stewart Hamilton-Arrandale.\n * http://creativewax.co.uk\n *\n * Modified by Yannick Loriot.\n * http://yannickloriot.com\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n *\n * converted to Javascript / cocos2d-x by Angus C\n */\n\n/**\n * ControlHuePicker: HUE picker ui component.\n * @class\n * @extends cc.Control\n *\n * @property {Number}       hue         - The hue value\n * @property {Number}       huePercent  - The hue value in percentage\n * @property {cc.Sprite}    background  - <@readonly> The background sprite\n * @property {cc.Sprite}    slider      - <@readonly> The slider sprite\n * @property {cc.Point}     startPos    - <@readonly> The start position of the picker\n */\ncc.ControlHuePicker = cc.Control.extend(/** @lends cc.ControlHuePicker# */{\n    _hue:0,\n    _huePercentage:0,\n    _background:null,\n    _slider:null,\n    _startPos:null,\n    _className:\"ControlHuePicker\",\n\n    /**\n     * The constructor of cc.ControlHuePicker\n     * @param {cc.Node} target\n     * @param {cc.Point} pos position\n     */\n    ctor:function(target, pos) {\n        cc.Control.prototype.ctor.call(this);\n        pos && this.initWithTargetAndPos(target, pos);\n    },\n\n    //maunally put in the setters\n    getHue:function () {\n        return this._hue;\n    },\n    setHue:function (hueValue) {\n        this._hue = hueValue;\n        this.setHuePercentage(this._hue / 360.0);\n    },\n\n    getHuePercentage:function () {\n        return this._huePercentage;\n    },\n    setHuePercentage:function (hueValueInPercent) {\n        this._huePercentage = hueValueInPercent;\n        this._hue = this._huePercentage * 360.0;\n\n        // Clamp the position of the icon within the circle\n        var backgroundBox = this._background.getBoundingBox();\n\n        // Get the center point of the background image\n        var centerX = this._startPos.x + backgroundBox.width * 0.5;\n        var centerY = this._startPos.y + backgroundBox.height * 0.5;\n\n        // Work out the limit to the distance of the picker when moving around the hue bar\n        var limit = backgroundBox.width * 0.5 - 15.0;\n\n        // Update angle\n        var angleDeg = this._huePercentage * 360.0 - 180.0;\n        var angle = cc.degreesToRadians(angleDeg);\n\n        // Set new position of the slider\n        var x = centerX + limit * Math.cos(angle);\n        var y = centerY + limit * Math.sin(angle);\n        this._slider.setPosition(x, y);\n    },\n\n    setEnabled:function (enabled) {\n        cc.Control.prototype.setEnabled.call(this, enabled);\n        if (this._slider) {\n            this._slider.setOpacity(enabled ? 255 : 128);\n        }\n    },\n\n    getBackground:function () {\n        return this._background;\n    },\n    getSlider:function () {\n        return this._slider;\n    },\n    getStartPos:function () {\n        return this._startPos;\n    },\n\n    initWithTargetAndPos:function (target, pos) {\n        if (cc.Control.prototype.init.call(this)) {\n            // Add background and slider sprites\n            this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(\"huePickerBackground.png\", target, pos, cc.p(0.0, 0.0));\n            this._slider = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(\"colourPicker.png\", target, pos, cc.p(0.5, 0.5));\n\n            this._slider.setPosition(pos.x, pos.y + this._background.getBoundingBox().height * 0.5);\n            this._startPos = pos;\n\n            // Sets the default value\n            this._hue = 0.0;\n            this._huePercentage = 0.0;\n            return true;\n        } else\n            return false;\n    },\n\n    _updateSliderPosition:function (location) {\n        // Clamp the position of the icon within the circle\n        var backgroundBox = this._background.getBoundingBox();\n\n        // Get the center point of the background image\n        var centerX = this._startPos.x + backgroundBox.width * 0.5;\n        var centerY = this._startPos.y + backgroundBox.height * 0.5;\n\n        // Work out the distance difference between the location and center\n        var dx = location.x - centerX;\n        var dy = location.y - centerY;\n\n        // Update angle by using the direction of the location\n        var angle = Math.atan2(dy, dx);\n        var angleDeg = cc.radiansToDegrees(angle) + 180.0;\n\n        // use the position / slider width to determin the percentage the dragger is at\n        this.setHue(angleDeg);\n\n        // send CCControl callback\n        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);\n    },\n    _checkSliderPosition:function (location) {\n        // compute the distance between the current location and the center\n        var distance = Math.sqrt(Math.pow(location.x + 10, 2) + Math.pow(location.y, 2));\n\n        // check that the touch location is within the circle\n        if (80 > distance && distance > 59)        {\n            this._updateSliderPosition(location);\n            return true;\n        }\n        return false;\n    },\n\n    onTouchBegan:function (touch, event) {\n        if (!this.isEnabled() || !this.isVisible())        {\n            return false;\n        }\n        var touchLocation = this.getTouchLocation(touch);\n\n        // Check the touch position on the slider\n        return this._checkSliderPosition(touchLocation);\n    },\n    onTouchMoved:function (touch, event) {\n        // Get the touch location\n        var touchLocation = this.getTouchLocation(touch);\n\n        //small modification: this allows changing of the colour, even if the touch leaves the bounding area\n        //this._updateSliderPosition(touchLocation);\n        //this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);\n        // Check the touch position on the slider\n        this._checkSliderPosition(touchLocation);\n    }\n});\n\nvar _p = cc.ControlHuePicker.prototype;\n\n// Extended properties\n/** @expose */\n_p.hue;\ncc.defineGetterSetter(_p, \"hue\", _p.getHue, _p.setHue);\n/** @expose */\n_p.huePercent;\ncc.defineGetterSetter(_p, \"huePercent\", _p.getHuePercentage, _p.setHuePercentage);\n/** @expose */\n_p.background;\ncc.defineGetterSetter(_p, \"background\", _p.getBackground);\n/** @expose */\n_p.slider;\ncc.defineGetterSetter(_p, \"slider\", _p.getSlider);\n/** @expose */\n_p.startPos;\ncc.defineGetterSetter(_p, \"startPos\", _p.getStartPos);\n\n_p = null;\n\n/**\n * @deprecated\n * @param target\n * @param pos\n * @returns {ControlHuePicker}\n */\ncc.ControlHuePicker.create = function (target, pos) {\n    return new cc.ControlHuePicker(target, pos);\n};"]}