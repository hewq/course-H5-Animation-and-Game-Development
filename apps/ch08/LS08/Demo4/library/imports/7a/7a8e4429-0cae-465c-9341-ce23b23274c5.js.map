{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/external/pluginx/platform/assets/frameworks/cocos2d-html5/external/pluginx/platform/facebook.js"],"names":["plugin","extend","name","version","_userInfo","_isLoggedIn","HttpMethod","CODE_SUCCEED","AppEvent","FB","AppEvents","EventNames","ACTIVATED_APP","COMPLETED_REGISTRATION","VIEWED_CONTENT","SEARCHED","RATED","COMPLETED_TUTORIAL","ADDED_TO_CART","ADDED_TO_WISHLIST","INITIATED_CHECKOUT","ADDED_PAYMENT_INFO","PURCHASED","ACHIEVED_LEVEL","UNLOCKED_ACHIEVEMENT","SPENT_CREDITS","AppEventParam","ParameterNames","CURRENCY","REGISTRATION_METHOD","CONTENT_TYPE","CONTENT_ID","SEARCH_STRING","SUCCESS","MAX_RATING_VALUE","PAYMENT_INFO_AVAILABLE","NUM_ITEMS","LEVEL","DESCRIPTION","AppEventParamValue","_checkLoginStatus","self","getLoginStatus","response","status","ctor","config","init","FacebookAgent","getInstance","login","permissions","callback","every","item","push","permissionsStr","join","permissList","split","accessToken","error_message","scope","return_scopes","isLoggedIn","logout","_requestPermissions","getAccessToken","getUserID","_share","info","ui","method","caption","description","href","picture","didComplete","post_id","dialog","canPresentDialog","obj","p","JSON","stringify","undefined","api","path","httpmethod","params","error","_getPermissionList","permissionList","i","length","destroyInstance","canvas","pay","appRequest","logEvent","eventName","valueToSum","parameters","activateApp","logPurchase","amount","currency","param"],"mappings":"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","file":"facebook.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/external/pluginx/platform","sourcesContent":["/****************************************************************************\n Copyright (c) 2013-2014 Chukong Technologies Inc.\n\n http://www.cocos2d-x.org\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in\n all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n THE SOFTWARE.\n ****************************************************************************/\n\n/**\n * Facebook SDK for Web Platform <br/>\n * FacebookAgent...\n *\n * @property {String} name - plugin name\n * @property {String} version - API version\n */\nplugin.extend('facebook', {\n    name: \"\",\n    version: \"\",\n    _userInfo: null,\n    _isLoggedIn: false,\n\n    /**\n     * HTTP methods constants\n     * @constant\n     * @type {Object}\n     */\n    HttpMethod: {\n        'GET': 'get',\n        'POST': 'post',\n        'DELETE': 'delete'\n    },\n\n    /**\n     * Succeed code returned in callbacks\n     * @constant\n     * @type {Number}\n     */\n    CODE_SUCCEED: 0,\n\n    /**\n     * App event names constants\n     * @constant\n     * @type {Object}\n     */\n    AppEvent: {\n        'ACTIVATED_APP': FB.AppEvents.EventNames.ACTIVATED_APP,\n        'COMPLETED_REGISTRATION': FB.AppEvents.EventNames.COMPLETED_REGISTRATION,\n        'VIEWED_CONTENT': FB.AppEvents.EventNames.VIEWED_CONTENT,\n        'SEARCHED': FB.AppEvents.EventNames.SEARCHED,\n        'RATED': FB.AppEvents.EventNames.RATED,\n        'COMPLETED_TUTORIAL': FB.AppEvents.EventNames.COMPLETED_TUTORIAL,\n        'ADDED_TO_CART': FB.AppEvents.EventNames.ADDED_TO_CART,\n        'ADDED_TO_WISHLIST': FB.AppEvents.EventNames.ADDED_TO_WISHLIST,\n        'INITIATED_CHECKOUT': FB.AppEvents.EventNames.INITIATED_CHECKOUT,\n        'ADDED_PAYMENT_INFO': FB.AppEvents.EventNames.ADDED_PAYMENT_INFO,\n        'PURCHASED': FB.AppEvents.EventNames.PURCHASED,\n        'ACHIEVED_LEVEL': FB.AppEvents.EventNames.ACHIEVED_LEVEL,\n        'UNLOCKED_ACHIEVEMENT': FB.AppEvents.EventNames.UNLOCKED_ACHIEVEMENT,\n        'SPENT_CREDITS': FB.AppEvents.EventNames.SPENT_CREDITS\n    },\n\n    /**\n     * App event parameter names constants\n     * @constant\n     * @type {Object}\n     */\n    AppEventParam: {\n        'CURRENCY': FB.AppEvents.ParameterNames.CURRENCY,\n        'REGISTRATION_METHOD': FB.AppEvents.ParameterNames.REGISTRATION_METHOD,\n        'CONTENT_TYPE': FB.AppEvents.ParameterNames.CONTENT_TYPE,\n        'CONTENT_ID': FB.AppEvents.ParameterNames.CONTENT_ID,\n        'SEARCH_STRING': FB.AppEvents.ParameterNames.SEARCH_STRING,\n        'SUCCESS': FB.AppEvents.ParameterNames.SUCCESS,\n        'MAX_RATING_VALUE': FB.AppEvents.ParameterNames.MAX_RATING_VALUE,\n        'PAYMENT_INFO_AVAILABLE': FB.AppEvents.ParameterNames.PAYMENT_INFO_AVAILABLE,\n        'NUM_ITEMS': FB.AppEvents.ParameterNames.NUM_ITEMS,\n        'LEVEL': FB.AppEvents.ParameterNames.LEVEL,\n        'DESCRIPTION': FB.AppEvents.ParameterNames.DESCRIPTION\n    },\n\n    /**\n     * App event parameter values constants\n     * @constant\n     * @type {Object}\n     */\n    AppEventParamValue: {\n        'VALUE_YES': \"1\",\n        'VALUE_NO': \"0\"\n    },\n\n    _checkLoginStatus: function() {\n        var self = this;\n        FB.getLoginStatus(function (response) {\n            if (response && response.status === 'connected') {\n                //login\n                self._isLoggedIn = true;\n                //save user info\n                self._userInfo = response['authResponse'];\n            } else {\n                // Reset cached status\n                self._isLoggedIn = false;\n                self._userInfo = {};\n            }\n        });\n    },\n\n    ctor: function (config) {\n        this.name = \"facebook\";\n        this.version = \"1.0\";\n        this._userInfo = {};\n        this._isLoggedIn = false;\n\n        if (!FB) {\n            return;\n        }\n\n        //This configuration will be read from the project.json.\n        FB.init(config);\n        this._checkLoginStatus();\n\n        plugin.FacebookAgent = this;\n    },\n    /**\n     * Gets the current object\n     * @returns {FacebookAgent}\n     */\n    getInstance: function () {\n        return this;\n    },\n    /**\n     * Login to facebook\n     * @param {Function} callback\n     * @param {Array} permissions\n     * @example\n     * //example\n     * plugin.FacebookAgent.login();\n     */\n    login: function (permissions, callback) {\n        var self = this;\n        if (typeof permissions == 'function') {\n            callback = permissions;\n            permissions = [];\n        }\n        if (permissions.every(function (item) {\n            if (item != 'public_profile')\n                return true;\n        })) {\n            permissions.push(\"public_profile\");\n        }\n        var permissionsStr = permissions.join(',');\n        FB.login(function (response) {\n            if (response['authResponse']) {\n                //save user info\n                self._isLoggedIn = true;\n                self._userInfo = response['authResponse'];\n                var permissList = response['authResponse']['grantedScopes'].split(\",\");\n                typeof callback === 'function' && callback(0, {\n                    accessToken: response['authResponse']['accessToken'],\n                    permissions: permissList\n                });\n            } else {\n                self._isLoggedIn = false;\n                self._userInfo = {};\n                typeof callback === 'function' && callback(response['error_code'] || 1, {\n                    error_message: response['error_message'] || \"Unknown error\"\n                });\n            }\n        }, {\n            scope: permissionsStr,\n            return_scopes: true\n        });\n    },\n    /**\n     * Checking login status\n     * @return {Bool} Whether user is logged in\n     * @example\n     * //example\n     * plugin.FacebookAgent.isLoggedIn(type, msg);\n     */\n    isLoggedIn: function () {\n        //this._checkLoginStatus();\n        return this._isLoggedIn;\n    },\n\n    /**\n     * Logout of facebook\n     * @param {Function} callback\n     * @example\n     * //example\n     * plugin.FacebookAgent.logout(callback);\n     */\n    logout: function (callback) {\n        var self = this;\n        FB.logout(function (response) {\n            if (response['authResponse']) {\n                // user is now logged out\n                self._isLoggedIn = false;\n                self._userInfo = {};\n                typeof callback === 'function' && callback(0, {\"isLoggedIn\": false});\n            } else {\n                typeof callback === 'function' && callback(response['error_code'] || 1, {\n                    error_message: response['error_message'] || \"Unknown error\"\n                });\n            }\n        });\n    },\n\n    /**\n     * Acquiring new permissions\n     * @deprecated since v3.0\n     * @param permissions\n     * @param callback\n     * @example\n     * //example\n     * plugin.FacebookAgent.requestPermissions([\"manage_pages\"], callback);\n     */\n    _requestPermissions: function (permissions, callback) {\n        var permissionsStr = permissions.join(',');\n        var self = this;\n        FB.login(function (response) {\n            if (response['authResponse']) {\n                var permissList = response['authResponse']['grantedScopes'].split(\",\");\n                //save user info\n                self._isLoggedIn = true;\n                self._userInfo = response['authResponse'];\n                typeof callback === 'function' && callback(0, {\n                    permissions: permissList\n                });\n            } else {\n                self._isLoggedIn = false;\n                self._userInfo = {};\n                typeof callback === 'function' && callback(response['error_code'] || 1, {\n                    error_message: response['error_message'] || \"Unknown error\"\n                });\n            }\n        }, {\n            scope: permissionsStr,\n            return_scopes: true\n        });\n    },\n\n    /**\n     * Acquiring AccessToken\n     * @return {String}\n     * @example\n     * //example\n     * var accessToken = plugin.FacebookAgent.getAccessToken();\n     */\n    getAccessToken: function () {\n        return this._userInfo ? this._userInfo['accessToken'] : null;\n    },\n\n    /**\n     * Acquiring User ID\n     * @return {String}\n     * @example\n     * //example\n     * var userID = plugin.FacebookAgent.getUserID();\n     */\n    getUserID: function () {\n        return this._userInfo ? this._userInfo['userID'] : null;\n    },\n\n    _share: function (info, callback) {\n        FB.ui({\n                method: 'share',\n                name: info['title'],\n                caption: info['caption'],\n                description: info['text'],\n                href: info['link'],\n                picture: info['imageUrl']\n            },\n            function (response) {\n                if (response) {\n                    if (response['post_id'])\n                        typeof callback === 'function' && callback(0, {\n                            didComplete: true,\n                            post_id: response['post_id']\n                        });\n                    else\n                        typeof callback === 'function' && callback(response['error_code'] || 1, {\n                            error_message: response['error_message'] || \"Unknown error\"\n                        });\n                } else {\n                    typeof callback === 'function' && callback(1, {\n                        error_message: \"Unknown error\"\n                    });\n                }\n            });\n    },\n\n    /**\n     * Request a web dialog for Facebook sharing\n     * @param info\n     * @param callback\n     */\n    dialog: function (info, callback) {\n        if (!info) {\n            typeof callback === 'function' && callback(1, {\n                error_message: \"No info parameter provided\"\n            });\n            return;\n        }\n        if (!this.canPresentDialog(info)) {\n            typeof callback === 'function' && callback(1, {\n                error_message: \"The requested dialog: \" + info['dialog'] + \" can not be presented on Web\"\n            });\n            return;\n        }\n\n        // Preprocess properties\n        info['name'] = info['name'] || info['site'];\n        delete info['site'];\n\n        info['href'] = info['href'] || info['link'] || info['siteUrl'];\n        delete info['siteUrl'];\n        delete info['link'];\n\n        info['picture'] = info['picture'] || info['image'] || info['photo'] || info['imageUrl'] || info['imagePath'];\n        delete info['imageUrl'];\n        delete info['imagePath'];\n        delete info['photo'];\n        delete info['image'];\n\n        info['caption'] = info['title'] || info['caption'];\n        delete info['title'];\n\n        info['description'] = info['text'] || info['description'];\n        delete info['text'];\n\n        var method = info['dialog'];\n        delete info['dialog'];\n\n        if (method === 'shareLink' || method == 'feedDialog') {\n            info['method'] = 'share';\n        } else if (method == 'messageLink') {\n            info['method'] = 'send';\n            info['link'] = info['href'];\n        } else if (method == 'shareOpenGraph') {\n            info['method'] = 'share_open_graph';\n\n            if (info['url']) {\n                var obj = {};\n                if (info[\"preview_property_name\"])\n                    obj[info[\"preview_property_name\"]] = info[\"url\"];\n                else\n                    obj[\"object\"] = info[\"url\"];\n\n                for (var p in info) {\n                    if (p != \"method\" && p != \"action_type\" && p != \"action_properties\") {\n                        info[p] && (obj[p] = info[p]);\n                        delete info[p];\n                    }\n                }\n\n                info['action_properties'] = JSON.stringify(obj);\n            }\n        }\n\n        FB.ui(info,\n            function (response) {\n                if (response && typeof callback === 'function') {\n                    if (response['post_id'] || response['success']) {\n                        callback(0, {\n                            didComplete: true,\n                            post_id: response['post_id'] || \"\"\n                        });\n                    }\n                    else {\n                        if (response['error_code']) {\n                             callback(response['error_code'], {\n                                 error_message : response['error_message'] || 'Unknown error'\n                             });\n                        }\n                        else callback(0, response);\n                    }\n                } else if (response == undefined && typeof callback === 'function') {\n                    callback(1, {\n                        error_message: \"Unknown error\"\n                    });\n                }\n            });\n    },\n\n    /**\n     * Check whether the share request can be achieved\n     * @param info\n     */\n    canPresentDialog: function (info) {\n        if (info && info['dialog'] && (\n            info['dialog'] === 'shareLink' ||\n                info['dialog'] === 'feedDialog' ||\n                info['dialog'] === 'shareOpenGraph' ||\n                info['dialog'] === 'messageLink'))\n            return true;\n        else\n            return false;\n    },\n    /**\n     * FB.api\n     * @param {String} path\n     * @param {Number} httpmethod\n     * @param {Object} params\n     * @param {Function} callback\n     */\n    api: function (path, httpmethod, params, callback) {\n        if (typeof params === 'function') {\n            callback = params;\n            params = {};\n        }\n        FB.api(path, httpmethod, params, function (response) {\n            if (response.error) {\n                typeof callback === 'function' && callback(response['error']['code'], {\n                    error_message: response['error']['message'] || 'Unknown error'\n                })\n            } else {\n                typeof callback === 'function' && callback(0, response);\n            }\n        });\n    },\n\n    _getPermissionList: function (callback) {\n        FB.api(\"/me/permissions\", function (response) {\n            if (response['data']) {\n                var permissionList = [];\n                for (var i = 0; i < response['data'].length; i++) {\n                    if (response['data'][i][\"status\"] == \"granted\") {\n                        permissionList.push(response['data'][i]['permission']);\n                    }\n                }\n                typeof callback == 'function' && callback(0, {\n                    permissions: permissionList\n                });\n            } else {\n                if (!response['error'])\n                    response['error'] = {};\n                typeof callback == 'function' && callback(response['error']['code'] || 1, {\n                    error_message: response['error']['message'] || 'Unknown error'\n                });\n            }\n        })\n    },\n\n    destroyInstance: function () {\n    },\n    canvas:{\n        /**\n         * Payment request\n         * @param {Object} info\n         * @param {Function} callback\n         */\n        pay: function (info, callback) {\n            /*\n             * Reference document\n             * https://developers.facebook.com/docs/payments/reference/paydialog\n             */\n            info['method'] = 'pay';\n            info['action'] = 'purchaseitem';\n\n            FB.ui(info, function (response) {\n                if (response['error_code']) {\n                    callback(response['error_code'] || 1, {\n                        error_message: response['error_message'] || response['error_msg'] || 'Unknown error'\n                    });\n                } else {\n                    callback(0, response);\n                }\n            })\n        }\n    },\n\n    /**\n     * Send an app requests to friends\n     * @param {Object} info\n     * @param {Function} callback\n     */\n    appRequest: function (info, callback) {\n        if (!info) {\n            typeof callback === 'function' && callback(1, {\n                error_message: \"No info parameter provided\"\n            });\n            return;\n        }\n\n        info['method'] = \"apprequests\";\n\n        FB.ui(info,\n            function (response) {\n                if (response) {\n                    if (response['error_code']) {\n                        typeof callback === 'function' && callback(response['error_code'], {\n                            error_message : response['error_message'] || 'Unknown error'\n                        });\n                    }\n                    else {\n                        typeof callback === 'function' && callback(0, response);\n                    }\n                } else {\n                    typeof callback === 'function' && callback(1, {\n                        error_message: \"Unknown error\"\n                    });\n                }\n            });\n    },\n\n    /**\n     * Log an event\n     * @param {String} eventName\n     * @param {Number} valueToSum\n     * @param {Object} parameters\n     */\n    logEvent: function (eventName, valueToSum, parameters) {\n        if (eventName == undefined) return;\n        if (valueToSum === undefined && parameters === undefined) {\n            FB.AppEvents.logEvent(eventName, null, null);\n        } else if (typeof valueToSum === \"number\" && parameters === undefined) {\n            FB.AppEvents.logEvent(eventName, valueToSum);\n        } else if (typeof valueToSum === \"object\" && parameters === undefined) {\n            FB.AppEvents.logEvent(eventName, null, valueToSum);\n        } else {\n            FB.AppEvents.logEvent(eventName, valueToSum, parameters);\n        }\n    },\n\n    /**\n     * Activate App\n     */\n    activateApp: function () {\n        FB.AppEvents.activateApp();\n    },\n\n    /**\n     * Log a purchase\n     * @param {Number} amount Amount of the purchase\n     * @param {String} currency The currency\n     * @param {Object} param Supplemental parameters\n     */\n    logPurchase:function(amount, currency, param){\n        FB.AppEvents.logPurchase(amount, currency, param);\n    }\n});\n"]}