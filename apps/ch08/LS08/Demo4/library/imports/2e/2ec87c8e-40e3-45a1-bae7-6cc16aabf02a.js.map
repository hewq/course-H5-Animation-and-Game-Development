{"version":3,"sources":["../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension/assets/frameworks/cocos2d-html5/extensions/gui/control-extension/CCControlSaturationBrightnessPicker.js"],"names":["cc","ControlSaturationBrightnessPicker","Control","extend","_saturation","_brightness","_background","_overlay","_shadow","_slider","_startPos","_boxPos","_boxSize","_className","ctor","target","pos","prototype","call","initWithTargetAndPos","getSaturation","getBrightness","getBackground","getOverlay","getShadow","getSlider","getStartPos","init","ControlUtils","addSpriteToTargetWithPosAndAnchor","p","getContentSize","width","setEnabled","enabled","setOpacity","updateWithHSV","hsv","hsvTemp","HSV","s","h","v","rgb","RGBfromHSV","setColor","color","r","g","b","updateDraggerWithHSV","x","y","_updateSliderPosition","sliderPosition","centerX","getBoundingBox","centerY","height","dx","dy","dist","Math","sqrt","angle","atan2","limit","cos","sin","setPosition","abs","_checkSliderPosition","location","sendActionsForControlEvents","CONTROL_EVENT_VALUECHANGED","onTouchBegan","touch","event","isEnabled","isVisible","touchLocation","getTouchLocation","onTouchMoved","_p","saturation","defineGetterSetter","brightness","background","overlay","shadow","slider","startPos","create"],"mappings":"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","file":"CCControlSaturationBrightnessPicker.js","sourceRoot":"../../../../../../../../assets/frameworks/cocos2d-html5/extensions/gui/control-extension","sourcesContent":["/**\n *\n * Copyright (c) 2008-2010 Ricardo Quesada\n * Copyright (c) 2011-2012 cocos2d-x.org\n * Copyright (c) 2013-2014 Chukong Technologies Inc.\n *\n * Copyright 2012 Stewart Hamilton-Arrandale.\n * http://creativewax.co.uk\n *\n * Modified by Yannick Loriot.\n * http://yannickloriot.com\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n *\n * converted to Javascript / cocos2d-x by Angus C\n */\n\n/**\n * ControlSaturationBrightnessPicker: Saturation brightness picker ui component.\n * @class\n * @extends cc.Control\n *\n * @property {Number}       saturation  - <@readonly> Saturation value of the picker\n * @property {Number}       brightness  - <@readonly> Brightness value of the picker\n * @property {cc.Sprite}    background  - <@readonly> The background sprite\n * @property {cc.Sprite}    overlay     - <@readonly> The overlay sprite\n * @property {cc.Sprite}    shadow      - <@readonly> The shadow sprite\n * @property {cc.Sprite}    slider      - <@readonly> The slider sprite\n * @property {cc.Point}     startPos    - <@readonly> The start position of the picker\n */\ncc.ControlSaturationBrightnessPicker = cc.Control.extend(/** @lends cc.ControlSaturationBrightnessPicker# */{\n    _saturation:0,\n    _brightness:0,\n\n    _background:null,\n    _overlay:null,\n    _shadow:null,\n    _slider:null,\n    _startPos:null,\n\n    _boxPos:0,\n    _boxSize:0,\n    _className:\"ControlSaturationBrightnessPicker\",\n\n    /**\n     * The constructor of cc.ControlSaturationBrightnessPicker\n     * @param {cc.Node} target\n     * @param {cc.Point} pos position\n     */\n    ctor:function (target, pos) {\n        cc.Control.prototype.ctor.call(this);\n        pos && this.initWithTargetAndPos(target, pos);\n    },\n    getSaturation:function () {\n        return this._saturation;\n    },\n    getBrightness:function () {\n        return this._brightness;\n    },\n\n    //not sure if these need to be there actually. I suppose someone might want to access the sprite?\n    getBackground:function () {\n        return this._background;\n    },\n    getOverlay:function () {\n        return this._brightness;\n    },\n    getShadow:function () {\n        return this._shadow;\n    },\n    getSlider:function () {\n        return this._slider;\n    },\n    getStartPos:function () {\n        return this._startPos;\n    },\n\n    initWithTargetAndPos:function (target, pos) {\n        if (cc.Control.prototype.init.call(this)) {\n            // Add background and slider sprites\n            this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(\"colourPickerBackground.png\", target, pos, cc.p(0.0, 0.0));\n            this._overlay = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(\"colourPickerOverlay.png\", target, pos, cc.p(0.0, 0.0));\n            this._shadow = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(\"colourPickerShadow.png\", target, pos, cc.p(0.0, 0.0));\n            this._slider = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(\"colourPicker.png\", target, pos, cc.p(0.5, 0.5));\n\n            this._startPos = pos; // starting position of the colour picker\n            this._boxPos = 35;    // starting position of the virtual box area for picking a colour\n            this._boxSize = this._background.getContentSize().width / 2;    // the size (width and height) of the virtual box for picking a colour from\n            return true;\n        } else\n            return false;\n    },\n\n    setEnabled:function (enabled) {\n        cc.Control.prototype.setEnabled.call(this, enabled);\n        if (this._slider) {\n            this._slider.setOpacity(enabled ? 255 : 128);\n        }\n    },\n\n    updateWithHSV:function (hsv) {\n        var hsvTemp = new cc.HSV();\n        hsvTemp.s = 1;\n        hsvTemp.h = hsv.h;\n        hsvTemp.v = 1;\n\n        var rgb = cc.ControlUtils.RGBfromHSV(hsvTemp);\n        this._background.setColor(cc.color(0 | (rgb.r * 255), 0 | (rgb.g * 255), 0 | (rgb.b * 255)));\n    },\n    updateDraggerWithHSV:function (hsv) {\n        // Set the position of the slider to the correct saturation and brightness\n        var pos = cc.p(this._startPos.x + this._boxPos + (this._boxSize * (1 - hsv.s)),\n            this._startPos.y + this._boxPos + (this._boxSize * hsv.v));\n\n        // update\n        this._updateSliderPosition(pos);\n    },\n\n    _updateSliderPosition:function (sliderPosition) {\n        // Clamp the position of the icon within the circle\n\n        // Get the center point of the bkgd image\n        var centerX = this._startPos.x + this._background.getBoundingBox().width * 0.5;\n        var centerY = this._startPos.y + this._background.getBoundingBox().height * 0.5;\n\n        // Work out the distance difference between the location and center\n        var dx = sliderPosition.x - centerX;\n        var dy = sliderPosition.y - centerY;\n        var dist = Math.sqrt(dx * dx + dy * dy);\n\n        // Update angle by using the direction of the location\n        var angle = Math.atan2(dy, dx);\n\n        // Set the limit to the slider movement within the colour picker\n        var limit = this._background.getBoundingBox().width * 0.5;\n\n        // Check distance doesn't exceed the bounds of the circle\n        if (dist > limit) {\n            sliderPosition.x = centerX + limit * Math.cos(angle);\n            sliderPosition.y = centerY + limit * Math.sin(angle);\n        }\n\n        // Set the position of the dragger\n        this._slider.setPosition(sliderPosition);\n\n\n        // Clamp the position within the virtual box for colour selection\n        if (sliderPosition.x < this._startPos.x + this._boxPos)\n            sliderPosition.x = this._startPos.x + this._boxPos;\n        else if (sliderPosition.x > this._startPos.x + this._boxPos + this._boxSize - 1)\n            sliderPosition.x = this._startPos.x + this._boxPos + this._boxSize - 1;\n        if (sliderPosition.y < this._startPos.y + this._boxPos)\n            sliderPosition.y = this._startPos.y + this._boxPos;\n        else if (sliderPosition.y > this._startPos.y + this._boxPos + this._boxSize)\n            sliderPosition.y = this._startPos.y + this._boxPos + this._boxSize;\n\n        // Use the position / slider width to determin the percentage the dragger is at\n        this._saturation = 1.0 - Math.abs((this._startPos.x + this._boxPos - sliderPosition.x) / this._boxSize);\n        this._brightness = Math.abs((this._startPos.y + this._boxPos - sliderPosition.y) / this._boxSize);\n    },\n\n    _checkSliderPosition:function (location) {\n        // Clamp the position of the icon within the circle\n        // get the center point of the bkgd image\n        var centerX = this._startPos.x + this._background.getBoundingBox().width * 0.5;\n        var centerY = this._startPos.y + this._background.getBoundingBox().height * 0.5;\n\n        // work out the distance difference between the location and center\n        var dx = location.x - centerX;\n        var dy = location.y - centerY;\n        var dist = Math.sqrt(dx * dx + dy * dy);\n\n        // check that the touch location is within the bounding rectangle before sending updates\n        if (dist <= this._background.getBoundingBox().width * 0.5) {\n            this._updateSliderPosition(location);\n            this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);\n            return true;\n        }\n        return false;\n    },\n\n    onTouchBegan:function (touch, event) {\n        if (!this.isEnabled() || !this.isVisible())        {\n            return false;\n        }\n        // Get the touch location\n        var touchLocation = this.getTouchLocation(touch);\n\n        // Check the touch position on the slider\n        return this._checkSliderPosition(touchLocation);\n    },\n\n    onTouchMoved:function (touch, event) {\n        // Get the touch location\n        var touchLocation = this.getTouchLocation(touch);\n\n        //small modification: this allows changing of the colour, even if the touch leaves the bounding area\n        //this._updateSliderPosition(touchLocation);\n        //this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);\n        // Check the touch position on the slider\n        this._checkSliderPosition(touchLocation);\n    }\n});\n\nvar _p = cc.ControlSaturationBrightnessPicker.prototype;\n\n// Extended properties\n/** @expose */\n_p.saturation;\ncc.defineGetterSetter(_p, \"saturation\", _p.getSaturation);\n/** @expose */\n_p.brightness;\ncc.defineGetterSetter(_p, \"brightness\", _p.getBrightness);\n/** @expose */\n_p.background;\ncc.defineGetterSetter(_p, \"background\", _p.getBackground);\n/** @expose */\n_p.overlay;\ncc.defineGetterSetter(_p, \"overlay\", _p.getOverlay);\n/** @expose */\n_p.shadow;\ncc.defineGetterSetter(_p, \"shadow\", _p.getShadow);\n/** @expose */\n_p.slider;\ncc.defineGetterSetter(_p, \"slider\", _p.getSlider);\n/** @expose */\n_p.startPos;\ncc.defineGetterSetter(_p, \"startPos\", _p.getStartPos);\n\n_p = null;\n\n/**\n * Creates a cc.ControlSaturationBrightnessPicker\n * @param {cc.Node} target\n * @param {cc.Point} pos position\n * @returns {ControlSaturationBrightnessPicker}\n */\ncc.ControlSaturationBrightnessPicker.create = function (target, pos) {\n    return new cc.ControlSaturationBrightnessPicker(target, pos);\n};"]}